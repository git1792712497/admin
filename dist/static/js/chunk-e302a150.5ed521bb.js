(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e302a150"],{"30c2":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"g",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return d}));var a=n("b775");function o(t){return Object(a["a"])({url:"/contract/attach/getinfo/"+t,method:"get"})}function r(t){return Object(a["a"])({url:"/contract/sign",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/contract/attach/param",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/contract/attach",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/contract/attach",method:"put",data:t})}function l(t){return Object(a["a"])({url:"/sign/seal/getSealList",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/contract/attach/getPic/"+t,method:"get"})}function d(t){return Object(a["a"])({url:"/contract/attach/perfect/"+t,method:"get"})}},4791:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"tabStyle"},[n("div",{staticStyle:{margin:"20px 0px","font-size":"14px"}},[t._v("北京立夏智能科技有限公司 已签合约")]),n("el-card",{staticClass:"elCard"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{staticClass:"el",attrs:{placeholder:"按主题搜索",clearable:"",size:"small"},on:{blur:t.handleQuery},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)},function(e){return t.handleQuery(e)}]},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}},[n("i",{staticClass:"el-icon-search",staticStyle:{"margin-left":"0px"},attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("el-row",{attrs:{gutter:10}},[n("span",{staticStyle:{"margin-right":"20px","font-size":"10px"}},[t._v(t._s(t.ids.length)+"个选择")]),n("el-dropdown",{staticClass:"el-dropdown-link",staticStyle:{"margin-right":"10px"},attrs:{"split-button":"",size:"mini"}},[t._v(" 下 载 "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"caozuo",nativeOn:{click:function(e){return t.downcontact(e)}}},[t._v("下载合约文件及存证报告 ")]),n("el-dropdown-item",{staticClass:"caozuo",nativeOn:{click:function(e){return t.downcontact(e)}}},[t._v("下载列表")])],1)],1),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["contract:info:remove"],expression:"['contract:info:remove']"}],staticClass:"anniu",attrs:{size:"mini",plain:""},on:{click:t.handleDelete}},[t._v("删除")])],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.infoList,"default-sort":{prop:"createTime"},"header-cell-style":{backgroundColor:"#f8fafd",fontSize:"12px",fontWeight:"normal",height:"45px",padding:"0px"},"cell-style":{border:"none",fontSize:"10px",padding:"0px"}},on:{"selection-change":t.handleSelectionChange,"cell-click":t.handleUpdate}},[n("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),n("el-table-column",{attrs:{label:"主题",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{color:"gray"}},[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{label:"签约人",align:"center",prop:"signEndDate","show-overflow-tooltip":!0,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.companyNames+e.row.names))])]}}])}),n("el-table-column",{attrs:{label:"时间",align:"center",prop:"contractEndDate","show-overflow-tooltip":!0,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.parseTime(e.row.updateTime,"{y}年{m}月{d}日{h}:{m}:{s}")+t.statusdict[e.row.status]))])]}}])}),n("el-table-column",{attrs:{label:"状态",align:"center",prop:"status","show-overflow-tooltip":!0,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.status?n("el-row",[n("el-col",{attrs:{span:1,offset:8}},[n("li",{staticStyle:{color:"blue"}})]),n("el-col",{attrs:{span:6}},[n("span",{staticStyle:{color:"gray","margin-top":"8px"}},[t._v("草稿")])])],1):t._e(),"1"==e.row.status?n("el-row",[n("el-col",{attrs:{span:1,offset:8}},[n("li",{staticStyle:{color:"#2fca34"}})]),n("el-col",{attrs:{span:6}},[n("span",{staticStyle:{color:"gray"}},[t._v("签约中")])])],1):t._e(),"2"==e.row.status?n("el-row",[n("el-col",{attrs:{span:1,offset:8}},[n("li",{staticStyle:{color:"#db5879"}})]),n("el-col",{attrs:{span:6}},[n("span",{staticStyle:{color:"gray"}},[t._v("签约完成")])])],1):t._e(),"3"==e.row.status?n("el-row",[n("el-col",{attrs:{span:1,offset:8}},[n("li",{staticStyle:{color:"gray"}})]),n("el-col",{attrs:{span:6}},[n("span",{staticStyle:{color:"gray"}},[t._v("已撤销")])])],1):t._e(),"4"==e.row.status?n("el-row",[n("el-col",{attrs:{span:1,offset:8}},[n("li",{staticStyle:{color:"gray"}})]),n("el-col",{attrs:{span:6}},[n("span",{staticStyle:{color:"gray"}},[t._v("已超时")])])],1):t._e()]}}])}),n("el-table-column",{attrs:{label:"签约规则",align:"center",prop:"contractRule","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{staticClass:"el-dropdown-link",attrs:{"split-button":"",size:"mini"},nativeOn:{click:function(t){t.stopPropagation()}}},["0"==e.row.status?n("span",{on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("重新发起")]):t._e(),"1"==e.row.status?n("span",{on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("去签约")]):t._e(),"2"==e.row.status?n("span",{on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("查 看")]):t._e(),"3"==e.row.status||"4"==e.row.status?n("span",{on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("查 看")]):t._e(),"0"==e.row.status?n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return t.handleDeleteRow(e.row)}}},[t._v("删除")])],1):t._e(),"1"==e.row.status?n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return t.downcontact(e.row)}}},[t._v("下载")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.cheHui(e.row)}}},[t._v("撤回")]),n("el-dropdown-item",[n("span",{on:{click:t.cuiBan}},[t._v("催办")])])],1):t._e(),"2"==e.row.status?n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return t.downcontact(e.row)}}},[t._v("下载文件")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.downcontact(e.row)}}},[t._v("下载文件及存证报告 ")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.zuoFei(e.row)}}},[t._v("作废")])],1):t._e(),"3"==e.row.status||"4"==e.row.status?n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return t.downcontact(e.row)}}},[t._v("下载")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.chongxinfaqi(e.row)}}},[t._v("重新发起")])],1):t._e()],1)]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"msg-pagination-container",attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1)],1)])},o=[],r=n("ade3"),i=(n("d81d"),n("b0c0"),n("adc1")),c=n("30c2"),s={name:"Info",data:function(){var t;return t={dateRange:[],Allnum:void 0,caogao:void 0,qianyue:void 0,wancheng:void 0,zhongzhi:void 0,ids:[],activeName:"first",loading:!0},Object(r["a"])(t,"ids",[]),Object(r["a"])(t,"single",!0),Object(r["a"])(t,"multiple",!0),Object(r["a"])(t,"showSearch",!1),Object(r["a"])(t,"showSearch1",!1),Object(r["a"])(t,"showSearch2",!1),Object(r["a"])(t,"showSearch3",!1),Object(r["a"])(t,"showSearch4",!1),Object(r["a"])(t,"total",0),Object(r["a"])(t,"infoList",[]),Object(r["a"])(t,"title",""),Object(r["a"])(t,"open",!1),Object(r["a"])(t,"queryParams",{pageNum:1,pageSize:10,contractIdentifier:null,evid:null,name:null,signEndDate:null,contractEndDate:null,status:null,createTime:null,updateTime:null,deletedtime:null,contractRule:null,contractLabel:null,contractType:null,createby:null,contractOwner:null,contractEdition:null,isSeq:null}),Object(r["a"])(t,"form",{}),Object(r["a"])(t,"rules",{}),Object(r["a"])(t,"statusarr",[]),Object(r["a"])(t,"statusdict",["保存草稿","签约发起","签约完成","签约终止","签约终止"]),t},created:function(){this.getList(),this.getCounts()},methods:{getList:function(){var t=this;this.loading=!0,this.getCounts(),Object(i["f"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(e){t.infoList=e.rows,t.total=e.total,t.loading=!1}))},getCounts:function(){var t=this;Object(i["d"])().then((function(e){if(t.caogao=0,t.qianyue=0,t.wancheng=0,t.zhongzhi=0,e.data.length>0)for(var n=0;n<e.data.length;n++){if(0==e.data[n].status)t.caogao=e.data[n].count;else if(1==e.data[n].status){var a=0;t.qianyue=a+e.data[n].count}else if(2==e.data[n].status){var o=0;t.wancheng=o+e.data[n].count}else if(3==e.data[n].status||3==e.data[n].status){var r=0;t.zhongzhi=r+e.data[n].count}t.Allnum=t.caogao+t.qianyue+t.wancheng+t.zhongzhi}else t.caogao=0,t.qianyue=0,t.wancheng=0,t.zhongzhi=0}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,contractIdentifier:null,evid:null,name:null,signEndDate:null,contractEndDate:null,status:"",createTime:null,updateTime:null,deletedtime:null,contractRule:null,contractLabel:null,contractType:null,createby:null,contractOwner:null,contractEdition:null,isSeq:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.resetForm("queryForm1"),this.handleQuery()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.single=1!==t.length,this.multiple=!t.length},handleAdd:function(){this.reset();var t="add";this.$router.push("/sign/signviews/"+t)},handleUpdate:function(t){var e=this;this.reset();var n=t.id||this.ids;"0"==t.status?this.$router.push("/sign/signviews/"+n):"1"==t.status?Object(c["e"])(n).then((function(t){if(200===t.code){var a=t.buttonType;"1"==a?e.$router.push("/sign/editparams/"+n):e.$router.push("/contact/info/infoXq/"+n)}})):"2"!=t.status&&"3"!=t.status||this.$router.push("/contact/info/infoXq/"+n)},chongxinfaqi:function(t){var e=t.id;this.$router.push("/sign/signviews/"+e)},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.id?Object(i["h"])(t.form).then((function(e){200===e.code&&(t.msgSuccess("修改成功"),t.open=!1,t.getList())})):Object(i["a"])(t.form).then((function(e){200===e.code&&(t.msgSuccess("新增成功"),t.open=!1,t.getList())})))}))},handleDelete:function(t){var e=this,n=t.id||this.ids;n.length>0?this.$confirm("是否确认删除数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(n)})).then((function(){e.getList(),e.msgSuccess("删除成功")})).catch((function(){})):alert("请先选择要删除的项")},handleDeleteRow:function(t){var e=this,n=t.id||this.ids;this.$confirm("是否确认删除数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(n)})).then((function(){e.getList(),e.msgSuccess("删除成功")})).catch((function(){}))},downcontact:function(t){var e=t.id;this.zipdownload(e,t.name)},handleClick:function(t,e){this.resetQuery(),"first"==this.activeName?(this.queryParams.statusarr=[],this.getList()):"seconed"==this.activeName?(this.queryParams.statusarr=[2],this.getList()):"thired"==this.activeName?(this.queryParams.statusarr=[1],this.getList()):"forth"==this.activeName?(this.queryParams.statusarr=[3,4],this.getList()):"fifth"==this.activeName&&(this.queryParams.statusarr=[0],this.getList())},cuiBan:function(){this.$confirm("您确定给XXX发送信息催促签订合同吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"btnFalses"})},zuoFei:function(t){var e=this;this.$confirm("当前文件状态已更改为作废，但您仍需要和原合同签署的各方签订作废协议。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"btnFalses"}).then((function(){var n=t.id;Object(i["h"])({contractInfo:{status:"3",id:n}}).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())}))}))},cheHui:function(t){var e=this;this.$confirm("确定撤回当前签署流程吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"btnFalses"}).then((function(){var n=t.id;Object(i["h"])({contractInfo:{status:"3",id:n}}).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())}))}))}}},l=s,u=(n("c244"),n("0c7c")),d=Object(u["a"])(l,a,o,!1,null,"5afb27f1",null);e["default"]=d.exports},adc1:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return d}));var a=n("b775");function o(t){return Object(a["a"])({url:"/contract/info/list",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/contract/info/"+t,method:"get"})}function i(t){return Object(a["a"])({url:"/contract/info",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/contract/info",method:"put",data:t})}function s(t){return Object(a["a"])({url:"/contract/info/"+t,method:"delete"})}function l(t){return Object(a["a"])({url:"/contract/info/export",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/contract/info/sendContract",method:"put",data:t})}function d(t){return Object(a["a"])({url:"/contract/info/count",method:"Get",data:t})}},b35f:function(t,e,n){},c244:function(t,e,n){"use strict";n("b35f")}}]);