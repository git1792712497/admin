(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-879a068a"],{"0b36":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[i("el-form-item",{attrs:{label:"编码",prop:"infoCode"}},[i("el-input",{attrs:{placeholder:"请输入编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.infoCode,callback:function(t){e.$set(e.queryParams,"infoCode",t)},expression:"queryParams.infoCode"}})],1),i("el-form-item",{attrs:{label:"名称",prop:"infoName"}},[i("el-input",{attrs:{placeholder:"请输入名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.infoName,callback:function(t){e.$set(e.queryParams,"infoName",t)},expression:"queryParams.infoName"}})],1),i("el-form-item",{attrs:{label:"创建时间",prop:"createtime"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择创建时间"},model:{value:e.queryParams.createtime,callback:function(t){e.$set(e.queryParams,"createtime",t)},expression:"queryParams.createtime"}})],1),i("el-form-item",[i("el-button",{attrs:{icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),i("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")]),i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:info:add"],expression:"['system:info:add']"}],attrs:{icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.infoList},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e.show?i("el-table-column",{attrs:{label:"序号",align:"center",prop:"id"}}):e._e(),i("el-table-column",{attrs:{label:"编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.view(t.row.id)}}},[e._v(" "+e._s(t.row.infoCode)+" ")])]}}])}),i("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.view(t.row.id)}}},[e._v(" "+e._s(t.row.infoName)+" ")])]}}])}),i("el-table-column",{attrs:{label:"是否显示",align:"center",prop:"infoShow"}}),i("el-table-column",{attrs:{label:"显示顺序",align:"center",prop:"infoOrder"}}),e.show?i("el-table-column",{attrs:{label:"存放code表的id",align:"center",prop:"codeId"}}):e._e(),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createtime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.parseTime(t.row.createtime,"{y}-{m}-{d}")))])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:info:edit"],expression:"['system:info:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v("修改")]),i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:info:remove"],expression:"['system:info:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),i("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"编码",prop:"infoCode"}},[i("el-input",{attrs:{placeholder:"请输入编码"},model:{value:e.form.infoCode,callback:function(t){e.$set(e.form,"infoCode",t)},expression:"form.infoCode"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称",prop:"infoName"}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.infoName,callback:function(t){e.$set(e.form,"infoName",t)},expression:"form.infoName"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"是否显示",prop:"infoShow"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.infoShow,callback:function(t){e.$set(e.form,"infoShow",t)},expression:"form.infoShow"}},e._l(e.infoShowOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"显示顺序",prop:"infoOrder"}},[i("el-input",{attrs:{placeholder:"请输入显示顺序"},model:{value:e.form.infoOrder,callback:function(t){e.$set(e.form,"infoOrder",t)},expression:"form.infoOrder"}})],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.submitForm}},[e._v("确 定")]),i("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),i("el-drawer",{ref:"drawer",attrs:{title:"",visible:e.dialog,direction:"rtl","custom-class":"demo-drawer",size:e.size},on:{"update:visible":function(t){e.dialog=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"demo-drawer__footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.addDrawer}},[e._v("新 增")]),i("el-button",{attrs:{size:"mini"},on:{click:e.cancelForm}},[e._v("取 消")])],1),i("el-collapse",{attrs:{data:e.drawerList,accordion:""}},e._l(e.drawerList,(function(t,a){return i("div",{staticStyle:{position:"relative"}},[i("i",{staticClass:"el-icon-delete",staticStyle:{position:"absolute",left:"80px",top:"15px"},on:{click:function(i){return e.shanchu(t,a)}}}),i("i",{staticClass:"el-icon-folder-opened",staticStyle:{position:"absolute",left:"120px",top:"15px"},on:{click:function(i){return e.openDialogI(t)}}}),i("el-collapse-item",{attrs:{title:"区段信息"},model:{value:t.data,callback:function(i){e.$set(t,"data",i)},expression:"item.data"}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"编码","label-width":e.formLabelWidth,prop:"viewCode"}},[i("el-input",{attrs:{size:"mini",autocomplete:"off"},model:{value:t.viewCode,callback:function(i){e.$set(t,"viewCode",i)},expression:"item.viewCode"}})],1)],1),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"显示样式",prop:"viewStyle","label-width":e.formLabelWidth}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:t.viewStyle,callback:function(i){e.$set(t,"viewStyle",i)},expression:"item.viewStyle"}},e._l(e.viewStyleOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{size:"mini",autocomplete:"off"},model:{value:t.viewName,callback:function(i){e.$set(t,"viewName",i)},expression:"item.viewName"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"是/否编辑"}},[i("el-radio-group",{model:{value:t.viewEdit,callback:function(i){e.$set(t,"viewEdit",i)},expression:"item.viewEdit"}},e._l(e.viewEditOptions,(function(t){return i("el-radio",{key:t.dictValue,attrs:{size:"mini",label:t.dictValue}},[e._v(" "+e._s(t.dictLabel))])})),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.infoName,callback:function(i){e.$set(t,"infoName",i)},expression:"item.infoName"}})],1),i("el-form-item",{attrs:{label:"子集",prop:"viewSubset"}},[i("treeselect",{attrs:{size:"mini",options:e.treedata,"show-count":!1,placeholder:"请选择子集"},model:{value:t.viewSubset,callback:function(i){e.$set(t,"viewSubset",i)},expression:"item.viewSubset"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"显示"}},[i("el-radio-group",{model:{value:t.viewShow,callback:function(i){e.$set(t,"viewShow",i)},expression:"item.viewShow"}},e._l(e.viewShowOptions,(function(t){return i("el-radio",{key:t.dictValue,attrs:{size:"mini",label:t.dictValue}},[e._v(" "+e._s(t.dictLabel))])})),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{size:"mini",autocomplete:"off",type:"textarea",placeholder:"请输入内容"},model:{value:t.remark,callback:function(i){e.$set(t,"remark",i)},expression:"item.remark"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",[i("el-button",{on:{click:function(t){return e.sure(a)}}},[e._v("保存")])],1)],1)],1)],1)],1)],1)})),0)],1)]),i("el-dialog",{attrs:{title:"表格数据",visible:e.openDialog,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.openDialog=t}}},[i("el-table",{attrs:{data:e.gridData}},[e.show?i("el-table-column",{attrs:{label:"序号",align:"center",prop:"id"}}):e._e(),i("el-table-column",{attrs:{label:"字段名",align:"center",prop:"itemCode"}}),i("el-table-column",{attrs:{label:"字段显示名称",align:"center",prop:"dataitemName"}}),i("el-table-column",{attrs:{label:"数据类型",align:"center",prop:"flag"}}),e.show?i("el-table-column",{attrs:{label:"存放view表的id",align:"center",prop:"saveViewId"}}):e._e(),i("el-table-column",{attrs:{label:"是否显示",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(i){return e.handleStatusChange(t.row)}},model:{value:t.row.saveShow,callback:function(i){e.$set(t.row,"saveShow",i)},expression:"scope.row.saveShow"}})]}}])})],1)],1)],1)},n=[],o=i("ade3"),r=(i("d81d"),i("a434"),i("b775"));function l(e){return Object(r["a"])({url:"/system/info/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/system/info/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/system/info",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/system/info",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/system/info/"+e,method:"delete"})}function m(e){return Object(r["a"])({url:"/system/view/list",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/system/view",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/system/view",method:"put",data:e})}var h=i("a878"),w=i("ca17"),v=i.n(w);i("542c");function b(e,t){return Object(r["a"])({url:"/system/saveDataset/list?sid="+e+"&vid="+t,method:"get"})}function g(e){return Object(r["a"])({url:"/system/saveDataset",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/system/saveDataset",method:"put",data:e})}var S={name:"Info",components:{Treeselect:v.a},data:function(){var e;return e={loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,infoList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,infoCode:null,infoName:null,infoShow:null,infoOrder:null,codeId:null,createtime:null},infoShowOptions:[],viewShowOptions:[],viewEditOptions:[],viewStyleOptions:[],show:!1,form:{},rules:{},dialog:!1},Object(o["a"])(e,"loading",!1),Object(o["a"])(e,"drawerList",[{viewCode:"",viewName:"",viewSubset:"",view_edit:"",viewShow:!1,viewStyle:"",remark:"",id:"",data:""}]),Object(o["a"])(e,"formLabelWidth","80px"),Object(o["a"])(e,"timer",null),Object(o["a"])(e,"size","600px"),Object(o["a"])(e,"dataNum",-1),Object(o["a"])(e,"treedata",[]),Object(o["a"])(e,"treedata",[{id:0,label:"数据集合",flag:"0",children:[]}]),Object(o["a"])(e,"gridData",[]),Object(o["a"])(e,"openDialog",!1),Object(o["a"])(e,"show",!1),e},created:function(){var e=this;this.getView(),this.getList(),this.getTreeselect(),this.getDicts("evidence_info_showInfo").then((function(t){e.infoShowOptions=t.data})),this.getDicts("evidence_view_showOptions").then((function(t){e.viewShowOptions=t.data})),this.getDicts("evidence_view_editOptions").then((function(t){e.viewEditOptions=t.data})),this.getDicts("evidence_view_viewStyle").then((function(t){e.viewStyleOptions=t.data}))},methods:{getList:function(){var e=this,t=this.$route.params&&this.$route.params.id;this.queryParams.codeId=t,this.loading=!0,l(this.queryParams).then((function(t){e.infoList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,infoCode:null,infoName:null,infoShow:null,infoOrder:null,codeId:null,createtime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加"},handleUpdate:function(e){var t=this;this.reset();var i=e.id||this.ids;s(i).then((function(e){t.form=e.data,t.open=!0,t.title="修改"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i=e.$route.params&&e.$route.params.id;e.form.codeId=i,null!=e.form.id?u(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):c(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))}}))},handleDelete:function(e){var t=this,i=e.id||this.ids;this.$confirm('是否确认删除编号为"'+i+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(i)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},cancelForm:function(){this.loading=!1,this.dialog=!1,clearTimeout(this.timer)},addDrawer:function(e){this.drawerList.push({id:this.drawerList.id,data:"",viewCode:"",viewName:"",viewSubset:"",view_edit:"",viewShow:"",viewStyle:"",remark:""})},shanchu:function(e,t){if(null!=this.drawerList[t].id)return this.msgError("数据已保存，不可以删除");this.drawerList.splice(t,1)},view:function(e){var t=this,i=e;this.queryParams.InfoId=i,this.dialog=!0,m(this.queryParams).then((function(e){t.drawerList=e.rows}))},getView:function(){var e=this;m(this.queryParams).then((function(t){e.drawerList=t.rows}))},sure:function(e){var t=this;if(null!=this.drawerList[e].id)p(this.drawerList[e]).then((function(e){200===e.code&&(t.msgSuccess("修改成功"),t.getView())}));else{var i=this.queryParams.InfoId;this.drawerList[e].infoId=i,f(this.drawerList[e]).then((function(e){200===e.code&&(t.msgSuccess("新增成功"),t.getView())}))}},getTreeselect:function(){var e=this;Object(h["i"])().then((function(t){e.treedata[0].children=t.data}))},getSaveDatesets:function(){var e=this,t=this.drawerList.viewSubset,i=this.drawerList.id;b(t,i).then((function(t){e.gridData=t.rows}))},openDialogI:function(e){console.log(e.id),this.drawerList.viewSubset=e.viewSubset,this.drawerList.id=e.id,e.viewSubset?void 0==e.id?this.msgSuccess("请先保存内容，再进行下一步操作"):(this.openDialog=!0,this.getSaveDatesets()):this.msgSuccess("请先选择子集，再进行下一步操作")},handleStatusChange:function(e){var t=this;e.saveViewId=this.drawerList.id;var i="0"===e.saveShow?"显示":"不显示";this.$confirm('确认要"'+i+'"编号为"'+e.dataitemId+'"的数据吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return null!=e.id?y(e).then((function(e){e.code})):g(e).then((function(e){e.code}))})).then((function(){t.msgSuccess(i+"成功")})).catch((function(){e.saveShow="0"===e.saveShow?"1":"0"}))}}},k=S,O=(i("eb25"),i("0c7c")),_=Object(O["a"])(k,a,n,!1,null,null,null);t["default"]=_.exports},"8e1b":function(e,t,i){},a878:function(e,t,i){"use strict";i.d(t,"i",(function(){return n})),i.d(t,"f",(function(){return o})),i.d(t,"a",(function(){return r})),i.d(t,"j",(function(){return l})),i.d(t,"c",(function(){return s})),i.d(t,"h",(function(){return c})),i.d(t,"g",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"k",(function(){return m})),i.d(t,"d",(function(){return f})),i.d(t,"e",(function(){return p}));var a=i("b775");function n(){return Object(a["a"])({url:"/system/dataset/treeselect",method:"get"})}function o(e){return Object(a["a"])({url:"/system/dataset/"+e,method:"get"})}function r(e){return Object(a["a"])({url:"/system/dataset",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/system/dataset",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/system/dataset/"+e,method:"post"})}function c(e){return Object(a["a"])({url:"/system/datasetitem/list",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/system/datasetitem/"+e,method:"get"})}function d(e){return Object(a["a"])({url:"/system/datasetitem",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/system/datasetitem",method:"put",data:e})}function f(e){return Object(a["a"])({url:"/system/datasetitem/"+e,method:"delete"})}function p(e){return Object(a["a"])({url:"/system/datasetitem/export",method:"get",params:e})}},eb25:function(e,t,i){"use strict";i("8e1b")}}]);