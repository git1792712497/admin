(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae863d4"],{"0523":function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"h",(function(){return n})),a.d(e,"g",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"e",(function(){return u}));var s=a("b775");function i(t){return Object(s["a"])({url:"/sign/template/list",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/sign/template/upload",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/sign/template",method:"put",data:t})}function o(t){return Object(s["a"])({url:"/sign/template/count",method:"Get",data:t})}function l(t){return Object(s["a"])({url:"/sign/template/"+t,method:"delete"})}function c(t){return Object(s["a"])({url:"/sign/template/"+t,method:"get"})}function d(t){return Object(s["a"])({url:"/sign/template/gettemplateimg/",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/sign/template/gettemplateparams/",method:"get",params:t})}},"4ec9":function(t,e,a){"use strict";var s=a("6d61"),i=a("6566");t.exports=s("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"791e":function(t,e,a){"use strict";a("d4d6")},bc45:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageContent_2lAGg",attrs:{id:"pageContent_2lAGg"}},[a("div",{staticClass:"leftContent_2NoKi"},[a("div",{staticClass:"doc-list-context1"},[a("div",{staticClass:"doc-list"},[a("div",{staticClass:"doc-item"},[a("div",{staticClass:"doc-img"},[a("el-row",[a("el-col",{attrs:{span:4}}),a("el-col",{attrs:{span:20}},[t.disabled?a("div",{staticClass:"doc-name",staticStyle:{"font-size":"12px","font-weight":"590"}},[t._v(t._s(t.form.name))]):t._e(),t.disabled?t._e():a("el-input",{staticClass:"doc-name",attrs:{size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-col",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{span:1}},[a("el-popover",{attrs:{placement:"right-start",width:"280",trigger:"hover"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{"text-align":"left",margin:"0"}},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.downcontact(t.form)}}},[t._v("下载")]),a("div",{staticStyle:{"font-size":"11px",color:"#333","margin-bottom":"5px"}},[t._v(t._s(this.form.name))]),a("el-row",[a("div",{staticStyle:{"font-size":"11px",color:"#333"}},[t._v("于"+t._s(t.parseTime(this.form.updateTime,"{y}年{m}月{d}日{h}:{m}:{s}")+t.statusdict[this.form.status]))])])],1),a("svg-icon",{staticStyle:{"font-size":"22px","margin-left":"10px"},attrs:{slot:"reference","class-name":"search-icon","icon-class":"shudian"},slot:"reference"})],1)],1)],1),a("el-carousel",{attrs:{height:"340px",autoplay:!1},on:{change:t.handelChange}},t._l(this.paramsform,(function(e,s){return a("el-carousel-item",{key:s,staticClass:"car"},[a("el-image",{attrs:{src:t.baseurl+e,alt:""},nativeOn:{click:function(a){return t.jump(s+1,e)}}})],1)})),1)],1)])])]),a("div",{staticClass:"doc-list-context2"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("模板状态")])]),a("el-radio",{staticClass:"radioSty",staticStyle:{"margin-left":"20%","padding-bottom":"-10000px"},attrs:{disabled:t.disabled,label:"0"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("开启")]),a("el-radio",{staticClass:"radioSty",attrs:{disabled:t.disabled,label:"1"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("停用")])],1),a("el-card",{staticStyle:{"margin-top":"10px",height:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("权限设置")])]),a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-form-item",[a("el-select",{staticStyle:{width:"210px"},attrs:{multiple:"",filterable:"",placeholder:"请选择人员",disabled:t.disabled,size:"mini"},model:{value:t.userid,callback:function(e){t.userid=e},expression:"userid"}},t._l(t.userOptions,(function(t){return a("el-option",{key:t.userName,attrs:{label:t.nickName,value:t.userName}})})),1)],1)],1),a("el-row",[a("el-form-item",[a("treeselect",{staticStyle:{width:"210px",overflow:"hidden"},attrs:{multiple:!0,options:t.deptOptions,"show-count":!0,appendToBody:!0,limit:5,limitText:function(t){return"及其它"+t+"项"},disabled:t.disabled,placeholder:"请选择公司",size:"mini"},model:{value:t.deptid,callback:function(e){t.deptid=e},expression:"deptid"}})],1)],1)],1)],1)],1)]),a("div",{staticClass:"pdfContent_1PW2f"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isShow,expression:"isShow"}],ref:"pdfBox",staticClass:"pdf-container",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.1)"}},[a("div",{staticClass:"pdf-box",style:{width:t.pdfWidth/2+"px"}},t._l(t.page_count,(function(e){return a("div",{key:e,staticClass:"pdfPage_1yRne",style:{width:t.pdfWidth/2+"px",height:t.pdfHeight/2+"px"}},[a("canvas",{style:{width:t.pdfWidth/2+"px",height:t.pdfHeight/2+"px"},attrs:{id:"the-canvas"+e}}),a("div",{staticClass:"dragLayer_3ccsq",attrs:{id:"can"+e}})])})),0),a("div",{staticClass:"bottom-btn"},[a("span",[t._v("页码："),a("input",{directives:[{name:"model",rawName:"v-model",value:t.page_num,expression:"page_num"}],staticClass:"input-text",attrs:{type:"text",placeholder:"1"},domProps:{value:t.page_num},on:{input:function(e){e.target.composing||(t.page_num=e.target.value)}}}),t._v(" / "+t._s(t.page_count)+" ")]),a("el-button",{staticStyle:{"padding-left":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.jump(t.page_num,t.attach_id)}}},[t._v("跳转 ")])],1)])]),a("div",{staticClass:"taskInfoArea_3ThxW",attrs:{id:"taskInfoArea_3ThxW"}},[a("div",{staticClass:"tab-context"},[a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.activeName,expression:"activeName == 2"}],staticClass:"item"},[a("p",{staticClass:"titleh2_3zdht"},[t._v("模板参数")]),a("div",{staticClass:"componentsList_1OIrB"},[0==t.isDisplay?a("div",[a("el-empty",{attrs:{description:"该模版没有需要定义的参数"}})],1):t._e(),t._l(t.param,(function(e,s){return 1==t.isDisplay?a("div",{key:s},[a("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{"body-style":{padding:"5px 10px 5px 10px"}}},[a("el-form",{ref:"queryForm",refInFor:!0,attrs:{"label-width":"75px",model:t.attachParams}},[a("el-form-item",{attrs:{prop:"name",label:"名称"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"labelStyle"},[t._v("名称：")])]),a("span",{staticStyle:{"font-size":"8px"}},[t._v(t._s(e.name))])]),a("el-form-item",{attrs:{prop:"type"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"labelStyle"},[t._v("文本类型：")])]),a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:t.disabled},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"value"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"labelStyle"},[t._v("默认值：")])]),a("el-input",{attrs:{size:"mini",disabled:t.disabled},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),a("el-form-item",{attrs:{prop:"explain"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"labelStyle"},[t._v("填写说明：")])]),a("el-input",{attrs:{size:"mini",disabled:t.disabled},model:{value:e.explain,callback:function(a){t.$set(e,"explain",a)},expression:"item.explain"}})],1),a("el-form-item",{attrs:{prop:"isRequired"}},[a("el-radio",{staticClass:"radioSty",attrs:{label:"1",disabled:t.disabled},model:{value:e.isRequired,callback:function(a){t.$set(e,"isRequired",a)},expression:"item.isRequired"}},[t._v("必填")]),a("el-radio",{staticClass:"radioSty",attrs:{label:"2",disabled:t.disabled},model:{value:e.isRequired,callback:function(a){t.$set(e,"isRequired",a)},expression:"item.isRequired"}},[t._v("非必填")])],1)],1)],1)],1):t._e()}))],2)])]),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.disabled,expression:"!disabled"}],staticClass:"anniu",staticStyle:{padding:"12px 44px 12px 44px"},attrs:{type:"primary",size:"mini"},on:{click:t.saveTem}},[t._v("保存 ")]),a("el-button",{staticClass:"anniu",staticStyle:{padding:"12px 44px 12px 44px"},attrs:{type:"primary",size:"mini"},on:{click:t.goback}},[t._v("返回 ")])],1)])])},i=[],n=(a("b0c0"),a("ac1f"),a("1276"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("a15b"),a("e9c4"),a("0523")),r=a("c0c7"),o=a("fcb7"),l=a("ca17"),c=a.n(l),d=(a("542c"),{components:{Treeselect:c.a},data:function(){return{isDisplay:0,radio:"1",deptid:[],userid:[],userOptions:[],deptOptions:[],haspower:!1,baseurl:"/prod-api",isShow:!1,scrollTop:0,activeName:"2",pageNum:1,scale:1,page_num:0,page_count:0,maxscale:2,minscale:.5,pdfWidth:0,pdfHeight:0,contract_info:{},contract_attach:[],attach_id:"",contract_img:[],attach_idArr:"",contract_id:"",paramsform:[],attachParams:{name:void 0,type:void 0,value:void 0,explain:void 0,isRequired:void 0},form:{ststus:void 0},param:{},options:[{value:"1",label:"文本"},{value:"2",label:"数字"},{value:"3",label:"数值"},{value:"4",label:"货币金额"},{value:"5",label:"手机号"},{value:"6",label:"邮箱"},{value:"7",label:"身份证号"}],arrList:[],heights:void 0,widths:void 0,disabled:!1,visible:!1,statusdict:["保存草稿","签约发起","签约完成","签约终止","签约终止"]}},created:function(){var t=this;this.getList(),this.getTemps(),this.pickUser(),this.getDepts("organization").then((function(e){t.organizationList=e.data})),this.getTemplateparams(),this.getTreeselect(),this.getHeights()},mounted:function(){this.$nextTick((function(){this.$refs.pdfBox.addEventListener("scroll",this.handleScroll,!1)}))},methods:{downcontact:function(t){var e=t.id;this.zipdownload(e,t.name)},handelChange:function(t){this.jump(t+1)},getHeights:function(){var t=document.documentElement.scrollWidth||document.body.scrollWidth;document.documentElement.clientHeight;this.widths=t-250-350-200,this.heights=30*this.widths/21},getTemplateparams:function(){var t=this,e=this.$route.params&&this.$route.params.id;Object(n["e"])({id:e}).then((function(e){t.param=e.data,t.param.length>0?t.isDisplay=1:t.isDisplay=0}))},getList:function(){var t=this,e=this.$store.state.user.name,a=this.$route.params&&this.$route.params.id;Object(n["d"])(a).then((function(a){t.form=a.data,console.log("this.form",t.form),t.form.ownerid&&(t.userid=t.form.ownerid.split(",")),t.form.deptid&&(t.deptid=t.form.deptid.split(","));for(var s=t.form.ownerid.split(","),i=0;i<s.length;i++){if(e==s[i]){t.disabled=!1;break}t.disabled=!0}}))},getTemps:function(){var t=this;this.isShow=!0;var e=this.$route.params&&this.$route.params.id;Object(n["c"])({id:e}).then((function(e){200===e.code&&(t.paramsform=e.data,t.page_count=t.paramsform.length,t.loadFile())}))},loadFile:function(){var t=this;this.$nextTick((function(){t.pageNum=0,t.page_num=1,t.isShow=!1,t.attach_idArr=new Map;for(var e=0;e<t.paramsform.length;e++){var a=t.paramsform[e];t.pageNum++,t.renderPage(t.pageNum,a)}}))},renderPage:function(t,e){var a=document.getElementById("the-canvas"+t),s=a.getContext("2d"),i=new Image;i.onload=function(){s.drawImage(i,0,0,a.width,a.height)},i.src=this.baseurl+e,this.pdfHeight=a.height=2*this.heights,this.pdfWidth=a.width=2*this.widths},handleScroll:function(t){var e=this;this.scrollTop=this.$refs.pdfBox.scrollTop;var a=document.querySelectorAll(".pdfPage_1yRne"),s=[];a.forEach((function(t,a){e.scrollTop>=t.offsetTop&&s.push(a)})),this.page_num=Math.max.apply(null,s)+1},jump:function(t,e){var a=0;this.contract_attach.forEach((function(s,i){s.id!=e?a+=s.paramsform.length:t=a+t}));var s=this,i=this.page_num-1;if(t&&(i=t-1),i>this.page_count)this.$message.error("请输入有效范围内的数字");else{var n=document.querySelectorAll(".pdfPage_1yRne"),r=n[i].offsetTop,o=this.scrollTop,l=r/30>>0;if(r>o)d();else{var c=o-r;l=c/30>>0,u()}}function d(){o<r?(o+=l,s.$refs.pdfBox.scrollTop=o,setTimeout(d,10)):s.$refs.pdfBox.scrollTop=r}function u(){o>r?(o-=l,s.$refs.pdfBox.scrollTop=o,setTimeout(u,10)):s.$refs.pdfBox.scrollTop=r}},pickUser:function(){var t=this;Object(r["l"])().then((function(e){t.userOptions=e.data}))},getTreeselect:function(){var t=this;Object(o["h"])().then((function(e){t.deptOptions=e.data}))},saveTem:function(){var t=this,e=this.$route.params&&this.$route.params.id;this.form.userid=this.userid.join(","),this.form.deptid=this.deptid.join(","),this.$confirm("确定要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isShow=!0,Object(n["g"])({templateparams:JSON.stringify(t.param),id:e,deptid:t.form.deptid,ownerid:t.form.userid,status:t.form.status,name:t.form.name}).then((function(e){200===e.code&&(t.msgSuccess("保存成功"),t.isShow=!1,t.getList(),t.$router.go(-1))}))}))},goback:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)}}}),u=d,p=(a("791e"),a("0c7c")),m=Object(p["a"])(u,s,i,!1,null,"8475f79c",null);e["default"]=m.exports},c0c7:function(t,e,a){"use strict";a.d(e,"k",(function(){return n})),a.d(e,"l",(function(){return r})),a.d(e,"g",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"p",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"m",(function(){return p})),a.d(e,"b",(function(){return m})),a.d(e,"h",(function(){return f})),a.d(e,"q",(function(){return h})),a.d(e,"r",(function(){return g})),a.d(e,"o",(function(){return v})),a.d(e,"s",(function(){return b})),a.d(e,"j",(function(){return x})),a.d(e,"n",(function(){return y})),a.d(e,"i",(function(){return _})),a.d(e,"e",(function(){return w})),a.d(e,"f",(function(){return O}));var s=a("b775"),i=a("4918");function n(t){return Object(s["a"])({url:"/system/user/list",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/system/user/pick",method:"get",params:t})}function o(t){return Object(s["a"])({url:"/system/user/"+Object(i["f"])(t),method:"get"})}function l(t){return Object(s["a"])({url:"/system/user",method:"post",data:t})}function c(t){return Object(s["a"])({url:"/system/user",method:"put",data:t})}function d(t){return Object(s["a"])({url:"/system/user/"+t,method:"delete"})}function u(t){return Object(s["a"])({url:"/system/user/export",method:"get",params:t})}function p(t,e){var a={userId:t,password:e};return Object(s["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function m(t,e){var a={userId:t,status:e};return Object(s["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function f(){return Object(s["a"])({url:"/system/user/profile",method:"get"})}function h(t){return Object(s["a"])({url:"/system/user/profile",method:"put",data:t})}function g(t,e){var a={oldPassword:t,newPassword:e};return Object(s["a"])({url:"/system/user/profile/updatePwd",method:"put",params:a})}function v(t,e){var a={oldPassword:t,newPassword:e};return Object(s["a"])({url:"/system/user/profile/updateSignPwd",method:"put",params:a})}function b(t){return Object(s["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function x(){return Object(s["a"])({url:"/system/user/importTemplate",method:"get"})}function y(t){return Object(s["a"])({url:"/system/user/authentication",method:"post",params:t})}function _(t){return Object(s["a"])({url:"/system/user/queryfacerecord",method:"get",params:t})}function w(t){return Object(s["a"])({url:"/system/user/facerecordsucess/"+t,method:"get"})}function O(){return Object(s["a"])({url:"/system/user/selfuser",method:"get"})}},d4d6:function(t,e,a){}}]);