(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ee33c2f"],{"13bf":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("canvas",{ref:"canvas",on:{mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}})},a=[],n=s("2909"),o=(s("a9e3"),s("d3b7"),{props:{width:{type:Number,default:800},height:{type:Number,default:300},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1},isClearBgColor:{type:Boolean,default:!0},format:{type:String,default:"image/png"},quality:{type:Number,default:1}},data:function(){return{hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}},computed:{ratio:function(){return this.height/this.width},stageInfo:function(){return this.$refs.canvas.getBoundingClientRect()},myBg:function(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(t){this.$refs.canvas.style.background=t}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var t=this,e=this.$refs.canvas;e.height=this.height,e.width=this.width,e.style.background=this.myBg,this.$_resizeHandler(),document.onmouseup=function(){t.isDrawing=!1}},methods:{$_resizeHandler:function(){var t=this.$refs.canvas;t.style.width=this.width+"px";var e=parseFloat(window.getComputedStyle(t).width);t.style.height=this.ratio*e+"px",this.canvasTxt=t.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=e/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},mouseDown:function(t){t=t||event,t.preventDefault(),this.isDrawing=!0,this.hasDrew=!0;var e={x:t.offsetX,y:t.offsetY};this.drawStart(e)},mouseMove:function(t){if(t=t||event,t.preventDefault(),this.isDrawing){var e={x:t.offsetX,y:t.offsetY};this.drawMove(e)}},mouseUp:function(t){t=t||event,t.preventDefault();var e={x:t.offsetX,y:t.offsetY};this.drawEnd(e),this.isDrawing=!1},touchStart:function(t){if(t=t||event,t.preventDefault(),this.hasDrew=!0,1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(e)}},touchMove:function(t){if(t=t||event,t.preventDefault(),1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(e)}},touchEnd:function(t){if(t=t||event,t.preventDefault(),1===t.touches.length){var e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(e)}},drawStart:function(t){this.startX=t.x,this.startY=t.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t)},drawMove:function(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=t.y,this.startX=t.x,this.points.push(t)},drawEnd:function(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t),this.points.push({x:-1,y:-1})},generate:function(t){var e=this,s=t&&t.format?t.format:this.format,i=t&&t.quality?t.quality:this.quality,a=new Promise((function(t,a){if(e.hasDrew){var o=e.canvasTxt.getImageData(0,0,e.$refs.canvas.width,e.$refs.canvas.height);e.canvasTxt.globalCompositeOperation="destination-over",e.canvasTxt.fillStyle=e.myBg,e.canvasTxt.fillRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.resultImg=e.$refs.canvas.toDataURL(s,i);var r=e.resultImg;if(e.canvasTxt.clearRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.canvasTxt.putImageData(o,0,0),e.canvasTxt.globalCompositeOperation="source-over",e.isCrop){var c,l=e.getCropArea(o.data),u=document.createElement("canvas"),d=u.getContext("2d");u.width=l[2]-l[0],u.height=l[3]-l[1];var h=(c=e.canvasTxt).getImageData.apply(c,Object(n["a"])(l));d.globalCompositeOperation="destination-over",d.putImageData(h,0,0),d.fillStyle=e.myBg,d.fillRect(0,0,u.width,u.height),r=u.toDataURL(s,i),u=null}t(r)}else a("Warning: Not Signned!")}));return a},reset:function(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.isClearBgColor&&(this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)"),this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea:function(t){for(var e=this.$refs.canvas.width,s=0,i=this.$refs.canvas.height,a=0,n=0;n<this.$refs.canvas.width;n++)for(var o=0;o<this.$refs.canvas.height;o++){var r=4*(n+this.$refs.canvas.width*o);(t[r]>0||t[r+1]>0||t[r+2]||t[r+3]>0)&&(a=Math.max(o,a),s=Math.max(n,s),i=Math.min(o,i),e=Math.min(n,e))}e++,s++,i++,a++;var c=[e,i,s,a];return c}}}),r=o,c=(s("8e61"),s("0c7c")),l=Object(c["a"])(r,i,a,!1,null,"a1968bcc",null),u=l.exports;u.install=function(t){this.installed||(this.installed=!0,t.component("vueEsign",u))};e["a"]=u},"1e91":function(t,e,s){"use strict";s.d(e,"f",(function(){return a})),s.d(e,"d",(function(){return n})),s.d(e,"b",(function(){return o})),s.d(e,"h",(function(){return r})),s.d(e,"c",(function(){return c})),s.d(e,"i",(function(){return l})),s.d(e,"a",(function(){return u})),s.d(e,"g",(function(){return d})),s.d(e,"e",(function(){return h}));var i=s("b775");function a(t){return Object(i["a"])({url:"/sign/seal/list",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/sign/seal/"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/sign/seal",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/sign/seal",method:"put",data:t})}function c(t){return Object(i["a"])({url:"/sign/seal/"+t,method:"delete"})}function l(t){return Object(i["a"])({url:"/sign/seal/upload",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/sign/seal/addPersonSign",method:"post",data:t})}function d(t){return console.log(t),Object(i["a"])({url:"/sign/sealusage/list",method:"get",params:t})}function h(t){return Object(i["a"])({url:"/sign/sealusage/"+t,method:"get"})}},"1f27":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("van-nav-bar",{attrs:{title:"签署合同","left-text":"返回","right-text":"下载","left-arrow":"","safe-area-inset-top":!0},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),0==t.sign_status||2==t.sign_status?i("div",[i("van-row",[i("van-col",{attrs:{span:"4"}},[i("van-circle",{attrs:{rate:t.rate,"layer-color":"#ebedf0",text:t.text,size:"50"},model:{value:t.currentRate,callback:function(e){t.currentRate=e},expression:"currentRate"}})],1),i("van-col",{attrs:{span:"6"}},[t._v(" 共"+t._s(this.contract_attach.length)+"份合同"),i("br"),t._v("已签署"+t._s(this.sealonSum)+"份 ")]),i("van-col",{attrs:{span:"14"}},[i("van-dropdown-menu",[i("van-dropdown-item",{attrs:{options:t.attach_option},on:{change:t.changeItem},model:{value:t.attach_value,callback:function(e){t.attach_value=e},expression:"attach_value"}})],1)],1)],1)],1):i("div",[i("van-dropdown-menu",[i("van-dropdown-item",{attrs:{options:t.attach_option},on:{change:t.changeItem},model:{value:t.attach_value,callback:function(e){t.attach_value=e},expression:"attach_value"}})],1)],1)],1),i("div",{staticClass:"pageContent_2lAGg",attrs:{id:"pageContent"}},[t._m(0),t._m(1),t._m(2),t.showsticky?i("div",[i("van-sticky",{attrs:{"offset-top":110}},[i("van-button",{attrs:{plain:"",type:"primary"},on:{click:t.changelocation}},[t._v("盖章位置"),i("br"),t._v(t._s(t.locationNum)+"/"+t._s(t.locationSum))])],1),i("van-sticky",{attrs:{"offset-top":160}},[i("van-button",{attrs:{plain:"",type:"primary",id:"yijian"},on:{click:t.locationClick}},[t._v("一键签")])],1),"1"!=t.signatoryType?i("van-sticky",{attrs:{"offset-top":210}},[i("van-button",{attrs:{plain:"",type:"primary"},on:{click:t.pageClick}},[t._v("骑缝章")])],1):t._e()],1):t._e(),i("div",{staticClass:"pdfContent_1PW2f"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isShow,expression:"!isShow"}],ref:"pdfBox",staticClass:"pdf-container",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.1)"}},[i("div",{staticClass:"pdf-box",style:{width:t.pdfWidth/3+"px"}},[t._l(t.page_count,(function(e){return i("div",{key:e,staticClass:"pdfPage_1yRne",style:{width:t.pdfWidth/3+"px",height:t.pdfHeight/3+"px"}},[i("canvas",{staticClass:"the_canvas",style:{width:t.pdfWidth/3+"px",height:t.pdfHeight/3+"px"},attrs:{id:"the-canvas"+e}}),i("div",{staticClass:"dragLayer_3ccsq",attrs:{id:"can"+e}}),i("transition",{attrs:{name:"slide-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEdges,expression:"showEdges"}],staticClass:"es-pdf-page__edges",class:{"es-pdf-page__edges--visible":t.signEdges},staticStyle:{width:"30px"},style:{width:t.slideWidth+"px",height:t.pdfHeight/3+"px"},attrs:{id:"edge_"+e}})])],1)})),i("div",{staticClass:"pdfPage_1yRne",style:{width:t.pdfWidth/3+"px",height:t.pdfHeight/3+"px"}})],2),i("div",{staticClass:"bottom-btn"},[i("span",[t._v("页码："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.page_num,expression:"page_num"}],staticClass:"input-text",attrs:{type:"text",placeholder:"1"},domProps:{value:t.page_num},on:{input:function(e){e.target.composing||(t.page_num=e.target.value)}}}),t._v(" / "+t._s(t.page_count)+" ")]),i("el-button",{staticStyle:{"padding-left":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.jump(t.page_num,t.attach_id)}}},[t._v("跳转")])],1)])]),i("van-popup",{style:{width:"40%",height:"100%"},attrs:{position:"left"},model:{value:t.sealshow,callback:function(e){t.sealshow=e},expression:"sealshow"}},[i("div",{staticClass:"taskInfoArea_3ThxW"},[i("div",{staticClass:"tab-context"},[i("p",{staticStyle:{"text-align":"center","font-size":"12px"}},[t._v("可用的印章")]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&(0==t.sign_status||2==t.sign_status),expression:"auth_status == 0 && contract_info.status < 2 && (sign_status == 0||sign_status == 2)"}]},[t.person_seals.length>0?i("div",[i("div",{staticClass:"seal-box-wrap"},[t._l(t.person_seals,(function(e){return i("div",{key:e.id,staticClass:"seal-box"},["1"!=t.signatoryType?i("div",{staticClass:"seal-wrapper-item"},[i("div",{staticClass:"sign-img",staticStyle:{height:"100px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+e.sealpath+")"},attrs:{id:e.id},on:{pointerdown:t.sealOn}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]):t._e(),"1"==t.signatoryType?i("div",{staticClass:"seal-wrapper-item-person"},[i("div",{staticClass:"sign-img",staticStyle:{height:"37px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+e.sealpath+")"},attrs:{id:e.id},on:{pointerdown:t.sealOn}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]):t._e(),i("p",{staticClass:"seal-box-title"},[t._v(t._s(e.name))])])})),i("div",{key:"signtime",staticClass:"seal-box"},[i("div",{staticClass:"signtime-wrapper-item"},[i("div",{staticClass:"sign-time",staticStyle:{height:"25px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+"/profile/signtimeImg/"+t.today+"_"+t.signtimetype+".png)"},attrs:{id:t.signtimetype},on:{pointerdown:t.sealOn}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]),i("p",{staticClass:"seal-box-title"},[t._v("时间戳")])])],2)]):i("div",{staticClass:"item"},[i("el-empty",{attrs:{description:"暂无印章"}})],1),"1"==t.signatoryType?i("div",{staticClass:"seal-box-wrap"},[i("div",{staticClass:"seal-box",on:{click:t.addsign}},[i("div",{staticClass:"seal-wrapper-item"},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s("5434")}})],1)])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&"await"==t.sign_status,expression:"auth_status == 0 && contract_info.status < 2 && sign_status == 'await'"}],staticClass:"item"},[i("van-empty",{attrs:{description:"待他人签署"}})],1)])])]),i("van-popup",{style:{width:"40%",height:"100%"},attrs:{position:"left"},model:{value:t.sealtable,callback:function(e){t.sealtable=e},expression:"sealtable"}},[i("div",{staticClass:"taskInfoArea_3ThxW"},[i("div",{staticClass:"tab-context"},[i("p",{staticStyle:{"text-align":"center","font-size":"12px"}},[t._v("可用的印章")]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&(0==t.sign_status||2==t.sign_status),expression:"auth_status == 0 && contract_info.status < 2 && (sign_status == 0||sign_status == 2)"}]},[t.person_seals.length>0?i("div",[i("div",{staticClass:"seal-box-wrap"},[t._l(t.person_seals,(function(e){return i("div",{key:e.id,staticClass:"seal-box"},["1"!=t.signatoryType?i("div",{staticClass:"seal-wrapper-item"},[i("div",{staticClass:"sign-img",staticStyle:{height:"100px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+e.sealpath+")"},attrs:{id:e.id},on:{pointerdown:t.sealOnclick}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]):t._e(),"1"==t.signatoryType?i("div",{staticClass:"seal-wrapper-item-person"},[i("div",{staticClass:"sign-img",staticStyle:{height:"37px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+e.sealpath+")"},attrs:{id:e.id},on:{pointerdown:t.sealOnclick}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]):t._e(),i("p",{staticClass:"seal-box-title"},[t._v(t._s(e.name))])])})),i("div",{key:"signtime",staticClass:"seal-box"},[i("div",{staticClass:"signtime-wrapper-item"},[i("div",{staticClass:"sign-time",staticStyle:{height:"25px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+"/profile/signtimeImg/"+t.today+"_"+t.signtimetype+".png)"},attrs:{id:t.signtimetype},on:{pointerdown:t.sealOnclick}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]),i("p",{staticClass:"seal-box-title"},[t._v("时间戳")])])],2)]):i("div",{staticClass:"item"},[i("van-empty",{attrs:{description:"暂无印章"}})],1),"1"==t.signatoryType?i("div",{staticClass:"seal-box-wrap"},[i("div",{staticClass:"seal-box",on:{click:t.addsign}},[i("div",{staticClass:"seal-wrapper-item"},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s("5434")}})],1)])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&"await"==t.sign_status,expression:"auth_status == 0 && contract_info.status < 2 && sign_status == 'await'"}],staticClass:"item"},[i("van-empty",{attrs:{description:"待他人签署"}})],1)])])]),i("van-popup",{style:{width:"40%",height:"100%"},attrs:{position:"left"},model:{value:t.pagesealshow,callback:function(e){t.pagesealshow=e},expression:"pagesealshow"}},[i("div",{staticClass:"taskInfoArea_3ThxW"},[i("div",{staticClass:"tab-context"},[i("p",{staticStyle:{"text-align":"center","font-size":"12px"}},[t._v("可用的印章")]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&(0==t.sign_status||2==t.sign_status),expression:"auth_status == 0 && contract_info.status < 2 && (sign_status == 0||sign_status == 2)"}]},[t.person_seals.length>0?i("div",[i("div",{staticClass:"seal-box-wrap"},t._l(t.person_seals,(function(e){return i("div",{key:e.id,staticClass:"seal-box"},["1"!=t.signatoryType?i("div",{staticClass:"seal-wrapper-item"},[i("div",{staticClass:"sign-img",staticStyle:{height:"100px",width:"100px"},style:{backgroundImage:"url("+t.baseurl+e.sealpath+")"},attrs:{id:e.id},on:{pointerdown:t.pagesealOn}},[i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteIt(e)}}},[t._v("删除")])])]):t._e(),i("p",{staticClass:"seal-box-title"},[t._v(t._s(e.name))])])})),0)]):i("div",{staticClass:"item"},[i("el-empty",{attrs:{description:"暂无印章"}})],1),"1"==t.signatoryType?i("div",{staticClass:"seal-box-wrap"},[i("div",{staticClass:"seal-box",on:{click:t.addsign}},[i("div",{staticClass:"seal-wrapper-item"},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s("5434")}})],1)])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.auth_status&&t.contract_info.status<2&&"await"==t.sign_status,expression:"auth_status == 0 && contract_info.status < 2 && sign_status == 'await'"}],staticClass:"item"},[i("van-empty",{attrs:{description:"待他人签署"}})],1)])])]),i("van-dialog",{staticStyle:{margin:"0 auto","text-align":"center"},attrs:{title:"请签名",width:"360px","custom-class":"tips-dialog","show-confirm-button":!1},model:{value:t.personsign,callback:function(e){t.personsign=e},expression:"personsign"}},[i("vue-esign",{ref:"esign",attrs:{width:360,height:180,isCrop:t.isCrop,lineWidth:t.lineWidth,lineColor:t.lineColor,bgColor:t.bgColor,format:"png"},on:{"update:bgColor":function(e){t.bgColor=e},"update:bg-color":function(e){t.bgColor=e}}}),i("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重新输入")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleGenerate}},[t._v("生成签名")])],1)],1),0==t.sign_status||2==t.sign_status?i("div",{staticStyle:{display:"flex","place-content":"center","justify-content":"space-evenly"}},[i("van-button",{attrs:{round:"",type:"info",color:"#DC001E"},on:{click:t.showseal}},[t._v("选择印章/签字")]),i("van-button",{attrs:{round:"",type:"info",color:"#DC001E"},on:{click:t.showSign}},[t._v("确认签署")])],1):t._e()])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentArea"},[s("p",{staticClass:"sealCompInfo_3v9iQ"}),s("div",{staticClass:"itemConentStyle"}),s("div",[t._v("个人签字")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentTime"},[s("p",{staticClass:"sealCompInfo_3v9iQ"}),s("div",{staticClass:"itemConentStyle"}),s("div",[t._v("签署时间")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentSign"},[s("p",{staticClass:"sealCompInfo_3v9iQ"}),s("div",{staticClass:"itemConentStyle_2MWEL"}),s("div",{staticClass:"infoMsg_3NkPg"},[t._v("企业签章")])])}],n=(s("d3b7"),s("159b"),s("b680"),s("6062"),s("3ca3"),s("ddb0"),s("ac1f"),s("1276"),s("caad"),s("a15b"),s("4ec9"),s("466d"),s("ace4"),s("5cc6"),s("9a8c"),s("a975"),s("735e"),s("c1ac"),s("d139"),s("3a7b"),s("d5d6"),s("82f8"),s("e91f"),s("60bd"),s("5f96"),s("3280"),s("3fcc"),s("ca91"),s("25a1"),s("cd26"),s("3c5d"),s("2954"),s("649e"),s("219c"),s("170b"),s("b39a"),s("72f7"),s("99af"),s("2b0e")),o=s("6b41"),r=s("b650"),c=s("2d6d"),l=s("d314"),u=s("e41f"),d=s("3104"),h=s("f0ca"),p=s("2241"),g=s("5d26"),f=s("9ffb"),m=s("d1e1"),v=(s("157a"),s("d055")),y=s.n(v),x=s("30c2"),b=s("adc1"),_=s("4d5c"),C=s("a958"),w=s("4918"),I=s("1e91"),S=s("c0c7"),T=s("13bf"),E="";n["default"].use(o["a"]),n["default"].use(r["a"]),n["default"].use(c["a"]),n["default"].use(l["a"]),n["default"].use(u["a"]),n["default"].use(d["a"]),n["default"].use(h["a"]),n["default"].use(p["a"]),n["default"].use(g["a"]),n["default"].use(f["a"]),n["default"].use(m["a"]);var k={components:{vueEsign:T["a"]},data:function(){return{baseurl:"/prod-api",activeNameLeft:"1",isShow:!1,setFlag:!1,showPerson:!1,sign_status:"",auth_status:0,signEdges:!1,showEdges:!1,signVisible:!1,sealtable:!1,count:0,timer:null,dom:null,scrollTop:0,codeTimer:null,bizId:"",authUrl:"http://49.232.81.91:80/authentication",qrSuccess:!1,scanSuccess:!1,faceActiveName:"1",pageNum:1,scale:1,page_num:0,page_count:0,maxscale:2,minscale:.5,pdfWidth:0,pdfHeight:0,slideWidth:30,right:!0,left:!0,code:"",mobile:"",pos_x:"",pos_y:"",posPage:"",seal_id:"",activities:[],commonStructsList:[],contract_info:{},contract_attach:[],attach_id:"",contract_img:[],contract_logs:[],person_seals:[],sign_auth_type:"",attach_idArr:"",contractId:"",signatoryId:"",signatoryType:"",locationnaid:"",sealuuid:"",signtimetype:"1",today:"",personsign:!1,lineWidth:6,lineColor:"#000000",bgColor:"",resultImg:"",isCrop:!1,uuid:"",active:0,attach_value:0,attach_option:[],sealshow:!1,pagesealshow:!1,locationSum:0,locationNum:1,showsticky:!1,currentRate:0,rate:0,sealonSum:0}},created:function(){this.contractId=this.$route.params.id,this.mobile=localStorage.getItem("siteMobile"),this.today=this.getToday(),this.getParameter(),this.getData()},destroyed:function(){this.timer&&clearInterval(this.timer),this.codeTimer&&clearInterval(this.codeTimer)},mounted:function(){this.$nextTick((function(){this.$refs.pdfBox.addEventListener("scroll",this.handleScroll,!1),this.$refs.pdfBox.addEventListener("click",this.onClickDoc,!1)}))},watch:{scale:function(t,e){document.querySelectorAll(".mark").forEach((function(s){s.style.left=parseInt(s.style.left)/(e/t)+"px",s.style.top=parseInt(s.style.top)/(e/t)+"px",s.style.height=100*t+"px",s.style.width=100*t+"px"})),document.querySelectorAll(".text_mark").forEach((function(s){s.style.left=parseInt(s.style.left)/(e/t)+"px",s.style.top=parseInt(s.style.top)/(e/t)+"px",s.style.height=28*t+"px",s.style.width=190*t+"px"})),document.querySelectorAll(".text_mark2").forEach((function(s){s.style.left=parseInt(s.style.left)/(e/t)+"px",s.style.top=parseInt(s.style.top)/(e/t)+"px",s.style.height=100*t+"px",s.style.width=100*t+"px"})),this.slideWidth=120*t}},computed:{text:function(){return this.currentRate.toFixed(0)+"%"}},methods:{conputedCircle:function(){var t=this,e=new Set,s=[];document.querySelectorAll(".mark").forEach((function(i){var a=i.className,n=parseInt(i.getAttribute("page")),o=t.attach_idArr.get(n).split("||")[0];if(a.indexOf("slide-sign")>0){var r=parseInt(i.style.top)/t.scale;if(s.includes(r))return;s.push(r),e.add(o)}else e.add(o)})),this.sealonSum=e.size,this.rate=100*e.size/this.contract_attach.length},onClickDoc:function(){0!=this.sign_status&&2!=this.sign_status||(this.showsticky=!this.showsticky)},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){alert("按钮")},showseal:function(t){t.stopPropagation(),this.sealshow=!0},getToday:function(){var t=Object(w["e"])(new Date,"{y}{m}{d}");return t},getParameter:function(){var t=this;Object(b["e"])(this.contractId).then((function(e){200===e.code&&(t.contract_info=e.data)}))},toPerson:function(){this.showPerson=!0,this.createQrc()},queryfacerecord:function(){var t=this;Object(S["i"])({uuid:this.uuid}).then((function(e){200===e.code&&Object(S["e"])(t.uuid).then((function(e){200===e.code&&t.$router.go(0)}))}))},onCopy:function(t){this.$message.success("复制成功")},onError:function(t){this.$message.error("复制失败")},close:function(){this.codeTimer&&clearInterval(this.codeTimer)},checkFace:function(){var t=0,e=setInterval((function(){t+=1,console.log(t),e&&2==t&&(console.log("关闭"),clearInterval(e))}),5e3);this.scanSuccess=!0,this.codeTimer&&clearInterval(this.codeTimer)},getUUID:function(){for(var t=[],e="0123456789abcdef",s=0;s<32;s++)t[s]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1);var i=t.join("");return i},createQrc:function(){var t=this;this.uuid=this.getUUID();var e=this.authUrl+"?orderNo="+this.uuid;this.qrSuccess=!1,this.$nextTick((function(){E=document.getElementById("qrccode-canvas")})),setTimeout((function(){y.a.toCanvas(E,e,(function(e){e?t.qrSuccess=!1:(t.qrSuccess=!0,t.codeTimer=setInterval((function(){t.checkFace()}),5e3))}))}),1e3)},sendCode:function(){},companySign:function(){var t=this;if(this.code||1!=this.sign_auth_type){var e=1;e=this.showEdges?2:1;1==this.sign_auth_type?{sign_type:e,total_page:this.page_count,posPage:this.posPage,seal_id:this.seal_id,width:100,pos_x:this.pos_x/this.scale,pos_y:this.pdfHeight/this.scale-this.pos_y/this.scale-100,updateTime:this.contract_info.updateTime,id:this.contractId,code:this.code}:{sign_type:e,total_page:this.page_count,posPage:this.posPage,seal_id:this.seal_id,width:100,pos_x:this.pos_x/this.scale,pos_y:this.pdfHeight/this.scale-this.pos_y/this.scale-100,updateTime:this.contract_info.updateTime,id:this.contractId,bizId:this.bizId},this.$alert("签署成功！  点击确认返回合同列表","签署成功",{type:"success",confirmButtonText:"确定",center:!0,callback:function(e){t.$router.push(t.fun.getUrl("Manage"))}})}else this.$message.error("请输入验证码")},getData:function(){var t=this;this.page_count=0,Object(x["d"])(this.contractId).then((function(e){if(200===e.code){t.contract_attach=e.data,t.attach_id=t.contract_attach[0].id,t.attach_value=t.contract_attach[0].id,t.commonStructsList=[];for(var s=0;s<t.contract_attach.length;s++){var i={text:t.contract_attach[s].contractDocName,value:t.contract_attach[s].id};if(t.attach_option.push(i),t.page_count=t.page_count+t.contract_attach[s].contractImgList.length,t.contract_attach[s].signLocation)for(var a=JSON.parse(t.contract_attach[s].signLocation),n=0;n<a.length;n++)t.commonStructsList.push(a[n])}Object(_["a"])(t.contractId).then((function(e){if(200==e.code){for(var s=e.data,i=0;i<s.length;i++)t.sign_status=s[i].signStatus,0!=t.sign_status&&2!=t.sign_status||""!=t.signatoryId||(t.signatoryId=s[i].id,t.signatoryType=s[i].signatoryType);if("1"==t.signatoryType){var a=e.user;t.auth_status=a.authentication}var n={flag:"1"==t.signatoryType?"2":0};Object(x["f"])(n).then((function(e){200==e.code&&(t.person_seals=e.data)})),t.loadFile()}}))}})),Object(C["d"])(this.contractId).then((function(e){if(200===e.code&&(t.contract_logs=e.data,t.contract_logs))for(var s=0;s<t.contract_logs.length;s++){var i=t.contract_logs[s].statusDesc,a=t.contract_logs[s].status,n="",o="";"0"==a?(n="el-icon-paperclip",o="red"):"1"==a?n="el-icon-edit":"2"==a?n="el-icon-delete":"3"==a?o="red":n="",t.activities.push({content:i,timestamp:t.contract_logs[s].createTime,color:o,size:"large",icon:n})}})),this.sign_auth_type=1},setTemplate:function(){for(var t=this,e=0;e<this.commonStructsList.length;e++)if(this.signatoryId==t.commonStructsList[e].signatoryId){var s=parseInt(t.commonStructsList[e].posX)*(this.pdfWidth/3)/595,i=parseInt(t.commonStructsList[e].posY)*(this.pdfHeight/3)/841;if("paging"==t.commonStructsList[e].docPage){t.showEdges=!0;var a=document.querySelector(".componentSign").cloneNode(!0);a.style.left=s+"px",a.style.top=i+"px",document.touchmove=null,document.touchend=null;for(var n=1;n<=t.page_count;n++){var o=a.cloneNode(!0);document.querySelector("#edge_"+n).appendChild(o),o.setAttribute("page",n),o.setAttribute("id",t.commonStructsList[e].signatoryId),o.setAttribute("uuid",t.commonStructsList[e].uuid),o.className="componentSign text_mark2 slide-location",o.style.display="flex",o.style.width="30px",o.onclick=t.locationClick}}else if(1==t.commonStructsList[e].formType){var r=document.querySelector(".componentArea").cloneNode(!0);document.querySelector("#can"+t.commonStructsList[e].docPage).appendChild(r),r.style.left=s+"px",r.style.top=i+"px",r.style.width=this.pdfWidth/3*100/595+"px",r.style.height=this.pdfWidth/3*50/595+"px",r.style.display="flex",r.classList.add("text_mark"),r.setAttribute("page",t.commonStructsList[e].docPage),r.setAttribute("id",t.commonStructsList[e].signatoryId),r.setAttribute("uuid",t.commonStructsList[e].uuid),r.setAttribute("formType",t.commonStructsList[e].formType),r.onclick=t.locationClick,this.locationSum++}else if(3==t.commonStructsList[e].formType){var c=document.querySelector(".componentTime").cloneNode(!0);document.querySelector("#can"+t.commonStructsList[e].docPage).appendChild(c),c.style.left=s+"px",c.style.top=i+"px",c.style.width=this.pdfWidth/3*100/595+"px",c.style.height=this.pdfWidth/3*30/595+"px",c.style.display="flex",c.classList.add("text_mark"),c.setAttribute("page",t.commonStructsList[e].docPage),c.setAttribute("id",t.commonStructsList[e].signatoryId),c.setAttribute("uuid",t.commonStructsList[e].uuid),c.setAttribute("formType",t.commonStructsList[e].formType),c.onclick=t.signtimeClick}else{var l=document.querySelector(".componentSign").cloneNode(!0);document.querySelector("#can"+t.commonStructsList[e].docPage).appendChild(l),l.style.left=s+"px",l.style.top=i+"px",l.style.width=this.pdfWidth/3*100/595+"px",l.style.height=this.pdfWidth/3*100/595+"px",l.style.display="flex",l.classList.add("text_mark2"),l.setAttribute("page",t.commonStructsList[e].docPage),l.setAttribute("id",t.commonStructsList[e].signatoryId),l.setAttribute("uuid",t.commonStructsList[e].uuid),l.setAttribute("formType",t.commonStructsList[e].formType),l.onclick=t.locationClick,this.locationSum++}}},changelocation:function(){var t=this;t.locationSum<=t.locationNum&&(t.locationNum=1,this.jump(t.locationNum,t.attach_id));for(var e=0;e<this.commonStructsList.length;e++)if(this.signatoryId==t.commonStructsList[e].signatoryId)if("paging"==t.commonStructsList[e].docPage);else if(1==t.commonStructsList[e].formType){if(t.page_num<t.commonStructsList[e].docPage){this.jump(t.commonStructsList[e].docPage,t.attach_id),t.locationNum++;break}}else if(3==t.commonStructsList[e].formType);else if(t.page_num<t.commonStructsList[e].docPage){this.jump(t.commonStructsList[e].docPage,t.attach_id),t.locationNum++;break}},pageClick:function(){this.pagesealshow=!0},TextMouseenter:function(t){t.currentTarget.childNodes[0].style.display="flex"},TextMouseleave:function(t){t.currentTarget.childNodes[0].style.display="none"},TextDeleteIt:function(t){document.querySelector(".dragLayer_3ccsq").removeChild(t.currentTarget.parentNode)},mouseenter:function(t){t.stopPropagation(),t.currentTarget.childNodes[0].style.display="block"},mouseleave:function(t){t.stopPropagation(),t.currentTarget.childNodes[0].style.display="none"},deleteIt:function(t){t.currentTarget.parentNode.parentNode.removeChild(t.currentTarget.parentNode),this.conputedCircle()},deleteloseal:function(t){t.stopPropagation(),t.currentTarget.parentNode.parentNode.removeChild(t.currentTarget.parentNode),this.conputedCircle()},deleteIt2:function(){document.querySelectorAll(".slide-sign").forEach((function(t){t.parentNode.removeChild(t)})),this.conputedCircle()},delseallocation:function(t){t.currentTarget.parentNode.parentNode.childNodes[0].style.display="block",t.currentTarget.parentNode.parentNode.removeChild(t.currentTarget.parentNode),this.conputedCircle()},delseallocationqf:function(t){t.stopPropagation();var e=t.currentTarget.parentNode.parentNode.parentNode.id,s=t.currentTarget.parentNode.parentNode.parentNode.getAttribute("uuid");document.querySelectorAll(".slide-location").forEach((function(t){t.id==e&&s==t.getAttribute("uuid")&&t.childNodes[1].removeChild(t.childNodes[1].childNodes[0])})),this.conputedCircle()},sealOn:function(t){var e=this,s=t.currentTarget.cloneNode(!0);this.sealshow=!1;var i=0;document.querySelector("#app").clientWidth>1026&&(i=document.querySelector(".el-scrollbar__view").clientWidth),document.touchmove=function(t){s.style.left=e.getPos(t).x-parseInt(s.clientWidth/2)-i+"px",s.style.top=e.getPos(t).y-parseInt(s.clientHeight)+"px",s.className="sign-img mark"};var a=this.getPos(t).x+this.$refs.pdfBox.scrollLeft-parseInt(s.clientWidth/2)-document.querySelector(".pdf-box").offsetLeft-i,n=90+this.scrollTop-parseInt(s.clientHeight/2),o=0;n>this.pdfHeight/3*this.page_num&&parseInt(this.page_num)<parseInt(this.page_count)?(n-=this.pdfHeight/3*this.page_num,o=this.page_num+1):(n-=this.pdfHeight/3*(this.page_num-1),o=this.page_num),this.pos_x=a,this.pos_y=n,s.className="sign-img mark",s.setAttribute("page",o),s.style.left=a+"px",s.style.top=n+"px","1"==this.signatoryType?s.style.height=this.pdfWidth/3*59.43/595+"px":s.style.height=this.pdfWidth/3*118.86/595+"px",s.style.width=this.pdfWidth/3*118.86/595+"px",document.querySelector("#can"+o).appendChild(s),document.onmousemove=null,document.onmouseup=null,s.onmouseenter=this.mouseenter,s.onmouseleave=this.mouseleave,s.addEventListener("touchstart",this.touch_start,!0),s.addEventListener("touchmove",this.touch_move,!0),s.childNodes[0].onclick=this.deleteIt,this.setFlag=!1,this.conputedCircle()},touch_start:function(t){t.stopPropagation(),this.positionX=parseInt(t.changedTouches[0].clientX),this.positionY=parseInt(t.changedTouches[0].clientY),this.dx=this.positionX-t.target.offsetLeft,this.dy=this.positionY-t.target.offsetTop},touch_move:function(t,e){t.preventDefault();var s=t.currentTarget,i=parseInt(t.changedTouches[0].clientX),a=parseInt(t.changedTouches[0].clientY),n=i-this.dx,o=a-this.dy;n<=0?n=0:n>=document.querySelector(".pdf-box").clientWidth-s.clientWidth&&(n=document.querySelector(".pdf-box").clientWidth-s.clientWidth),o<=0?o=0:o>=this.pdfHeight/3-s.clientHeight&&(o=this.pdfHeight/3-s.clientHeight),t.currentTarget.style.left=n+"px",t.currentTarget.style.top=o+"px"},pagesealOn:function(t){t.stopPropagation(),this.showEdges=!0;var e=t.currentTarget.cloneNode(!0);this.pagesealshow=!1,this.showsticky=!1;for(var s=1;s<=this.page_count;s++){var i=e.cloneNode(!0);document.querySelector("#edge_"+s).appendChild(i),i.setAttribute("page",s),i.className="sign-img mark slide-sign",i.style.height=118.86*this.scale+"px",i.style.width=30*this.scale+"px",i.style.top="90px",document.onmousemove=null,document.onmouseup=null,i.onmouseenter=this.mouseenter,i.onmouseleave=this.mouseleave,i.addEventListener("touchstart",this.touch_start),i.addEventListener("touchmove",this.pagetouch_move),i.childNodes[0].onclick=this.deleteIt2}this.conputedCircle()},pagetouch_move:function(t,e){t.preventDefault();var s=t.currentTarget,i=parseInt(t.changedTouches[0].clientX),a=parseInt(t.changedTouches[0].clientY),n=i-this.dx,o=a-this.dy;this.showEdges||n<=0?n=0:n>=document.querySelector(".pdf-box").clientWidth-s.clientWidth&&(n=document.querySelector(".pdf-box").clientWidth-s.clientWidth),o<=0?o=0:o>=this.pdfHeight/3-s.clientHeight&&(o=this.pdfHeight/3-s.clientHeight),t.currentTarget.style.left=n+"px",t.currentTarget.style.top=o+"px",document.querySelectorAll(".slide-sign").forEach((function(t){t.style.left=n+"px",t.style.top=o+"px"}))},getPos:function(t){return{x:t.clientX,y:t.clientY}},handleClick:function(t,e){},handleScroll:function(t){var e=this;this.scrollTop=this.$refs.pdfBox.scrollTop;var s=document.querySelectorAll(".pdfPage_1yRne"),i=[];s.forEach((function(t,s){e.scrollTop>=t.offsetTop&&i.push(s)})),this.page_num=Math.max.apply(null,i)+1},jump:function(t,e){var s=0;this.contract_attach.forEach((function(i,a){i.id!=e?s+=i.contractImgList.length:t=s+t}));var i=this,a=this.page_num-1;if(t&&(a=t-1),a>this.page_count)this.$message.error("请输入有效范围内的数字");else{var n=document.querySelectorAll(".pdfPage_1yRne"),o=n[a].offsetTop,r=this.scrollTop,c=o/30>>0;if(o>r)u();else{var l=r-o;c=l/30>>0,d()}}function u(){r<o?(r+=c,i.$refs.pdfBox.scrollTop=r,setTimeout(u,10)):i.$refs.pdfBox.scrollTop=o}function d(){r>o?(r-=c,i.$refs.pdfBox.scrollTop=r,setTimeout(d,10)):i.$refs.pdfBox.scrollTop=o}},renderPage:function(t,e){var s=document.getElementById("the-canvas"+t);this.pdfHeight=s.height=3*document.body.clientWidth*841/595,this.pdfWidth=s.width=3*document.body.clientWidth;var i=s.getContext("2d"),a=new Image;a.src=this.baseurl+e,a.onload=function(){i.drawImage(a,0,0,s.width,s.height);var t=i.createPattern(a,"no-repeat");i.fillStyle=t,i.fillRect(10,10,s.width,s.height)}},loadFile:function(){var t=this;this.$nextTick((function(){t.pageNum=1,t.page_num=1,t.attach_idArr=new Map;for(var e=0;e<t.contract_attach.length;e++){var s=t.contract_attach[e].contractImgList;t.isShow=!0;for(var i=1;i<=s.length;i++){var a=s[i-1].contractImgUrl,n=s[i-1].seq;t.attach_idArr.set(t.pageNum,t.contract_attach[e].id+"||"+n),t.renderPage(t.pageNum,a),t.pageNum++}}0!=t.sign_status&&2!=t.sign_status||t.setTemplate()}))},showSign:function(){var t=this;if(document.querySelectorAll(".mark").length<=0)this.$message.error("请先拖拽盖章");else{var e=[],s=[];document.querySelectorAll(".mark").forEach((function(i){var a=595*parseInt(i.style.left)/(t.pdfWidth/3),n=841*parseInt(i.style.top)/(t.pdfHeight/3),o=i.className,r=parseInt(i.getAttribute("page")),c=t.attach_idArr.get(r).split("||")[0],l=t.attach_idArr.get(r).split("||")[1];if(o.indexOf("slide-sign")>0){var u=parseInt(i.style.top)/t.scale;if(s.includes(u))return;s.push(u);var d={contractId:t.contractId,sealid:i.id,posX:parseInt(a),posY:parseInt(n),docPage:"paging",attachid:c,seq:l};e.push(d)}else{var h={contractId:t.contractId,sealid:i.id,posX:parseInt(a),posY:parseInt(n),docPage:r,attachid:c,seq:l};e.push(h)}})),this.isShow=!1,Object(x["g"])(e).then((function(e){if(200===e.code){var s={id:t.signatoryId,signStatus:"1",contractId:t.contractId};Object(_["e"])(s).then((function(e){200==e.code&&t.$router.go(0)}))}}))}},locationClick:function(t){if(0==this.auth_status){var e=t.currentTarget;this.locationnaid=e.id,this.sealuuid=e.getAttribute("uuid"),this.sealtable=!0}},perslocationClick:function(t){for(var e=document.querySelectorAll(".text_mark"),s=0;s<e.length;s++)if(("yijian"==this.locationnaid||this.sealuuid==e[s].getAttribute("uuid"))&&1==e[s].getAttribute("formType")){e[s].className;e[s].style.height=this.pdfWidth/3*56.6/595+"px",e[s].style.width=this.pdfWidth/3*118.86/595+"px";var i=t.cloneNode(!0);i.setAttribute("page",e[s].getAttribute("page")),i.style.height=this.pdfWidth/3*56.6/595+"px",i.style.width=this.pdfWidth/3*118.86/595+"px",i.style.left=e[s].style.left,i.style.top=e[s].style.top,i.className="sign-img-page mark",i.touchstart=this.mouseenter,i.touchend=this.mouseleave,i.childNodes[0].onclick=this.deleteloseal,e[s].childNodes[1].childNodes[0]&&e[s].childNodes[1].removeChild(e[s].childNodes[1].childNodes[0]),e[s].childNodes[1].appendChild(i)}},signtimeClick:function(){if(0==this.auth_status)for(var t=document.querySelectorAll(".sign-time"),e=document.querySelectorAll(".text_mark"),s=0;s<e.length;s++)if(3==e[s].getAttribute("formType")){e[s].className;e[s].style.height=this.pdfWidth/3*28.3/595+"px",e[s].style.width=this.pdfWidth/3*141.5/595+"px";var i=t[0].cloneNode(!0);i.setAttribute("page",e[s].getAttribute("page")),i.style.height=this.pdfWidth/3*28.3/595+"px",i.style.width=this.pdfWidth/3*141.5/595+"px",i.style.left=e[s].style.left,i.style.top=e[s].style.top,i.className="sign-img-page mark",i.touchstart=this.mouseenter,i.touchend=this.mouseleave,i.childNodes[0].onclick=this.deleteloseal,e[s].childNodes[1].childNodes[0]&&e[s].childNodes[1].removeChild(e[s].childNodes[1].childNodes[0]),e[s].childNodes[1].appendChild(i)}},sealOnclick:function(t){for(var e=t.currentTarget,s=document.querySelectorAll(".text_mark2"),i=0;i<s.length;i++){var a=s[i].className;if(a.indexOf("slide-location")>=0){if("yijian"==this.locationnaid||this.sealuuid==s[i].getAttribute("uuid")){s[i].style.height=this.pdfWidth/3*118.86/595+"px",s[i].style.width=this.pdfWidth/3*30/595+"px";var n=e.cloneNode(!0);n.setAttribute("page",s[i].getAttribute("page")),n.style.height=this.pdfWidth/3*118.86/595+"px",n.style.width=this.pdfWidth/3*30/595+"px",n.style.left=s[i].style.left,n.style.top=s[i].style.top,n.className="sign-img-page mark slide-sign",document.onmousemove=null,document.onmouseup=null,n.onclick=this.mouseenter,n.onmouseleave=this.mouseleave,n.childNodes[0].onclick=this.delseallocationqf,s[i].childNodes[1].childNodes[0]&&s[i].childNodes[1].removeChild(s[i].childNodes[1].childNodes[0]),s[i].childNodes[1].appendChild(n)}}else if("yijian"==this.locationnaid||this.sealuuid==s[i].getAttribute("uuid")){s[i].style.height=this.pdfWidth/3*118.86/595+"px",s[i].style.width=this.pdfWidth/3*118.86/595+"px";var o=e.cloneNode(!0);o.setAttribute("page",s[i].getAttribute("page")),o.style.height=this.pdfWidth/3*118.86/595+"px",o.style.width=this.pdfWidth/3*118.86/595+"px",o.style.left=s[i].style.left,o.style.top=s[i].style.top,o.className="sign-img-page mark",document.onmousemove=null,document.onmouseup=null,o.onclick=this.mouseenter,o.onmouseleave=this.mouseleave,o.childNodes[0].onclick=this.deleteloseal,s[i].childNodes[1].childNodes[0]&&s[i].childNodes[1].removeChild(s[i].childNodes[1].childNodes[0]),s[i].childNodes[1].appendChild(o)}}this.signtimeClick(),this.perslocationClick(e),this.sealtable=!1,this.conputedCircle()},addsign:function(){this.sealshow=!1,this.personsign=!0},handleReset:function(){this.$refs["esign"].reset()},handleGenerate:function(){var t=this;this.$refs["esign"].generate().then((function(e){t.resultImg=e;var s=new FormData;s.append("file",t.base64ImgtoFile(e)),Object(I["a"])(s).then((function(e){if(200===e.code){var s={flag:"1"==t.signatoryType?"2":0};Object(x["f"])(s).then((function(e){200==e.code&&(t.person_seals=e.data,t.personsign=!1)}))}t.visible=!1}))})).catch((function(e){t.$message({message:e+" 未签名！",type:"warning"}),alert(e)}))},base64ImgtoFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",s=t.split(","),i=s[0].match(/:(.*?);/)[1],a=i.split("/")[1],n=atob(s[1]),o=n.length,r=new Uint8Array(o);while(o--)r[o]=n.charCodeAt(o);return new File([r],"".concat(e,".").concat(a),{type:i})},changeItem:function(t){this.jump(1,t)}}},A=k,N=(s("b059"),s("0c7c")),j=Object(N["a"])(A,i,a,!1,null,"6cc87696",null);e["default"]=j.exports},"30c2":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"g",(function(){return n})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"h",(function(){return c})),s.d(e,"f",(function(){return l})),s.d(e,"d",(function(){return u})),s.d(e,"e",(function(){return d}));var i=s("b775");function a(t){return Object(i["a"])({url:"/contract/attach/getinfo/"+t,method:"get"})}function n(t){return Object(i["a"])({url:"/contract/sign",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/contract/attach/param",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/contract/attach",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/contract/attach",method:"put",data:t})}function l(t){return Object(i["a"])({url:"/sign/seal/getSealList",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/contract/attach/getPic/"+t,method:"get"})}function d(t){return Object(i["a"])({url:"/contract/attach/perfect/"+t,method:"get"})}},"4d5c":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"d",(function(){return o})),s.d(e,"e",(function(){return r})),s.d(e,"a",(function(){return c}));var i=s("b775");function a(t){return Object(i["a"])({url:"/contract/signatory/"+t,method:"get"})}function n(t){return Object(i["a"])({url:"/contract/signatory/getSignatory/"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/contract/signatory",method:"put",data:t})}function r(t){return Object(i["a"])({url:"/contract/signatory/updatebyone",method:"put",data:t})}function c(t){return Object(i["a"])({url:"/contract/signatory/getInfoSelf/"+t,method:"get"})}},5434:function(t,e){t.exports="data:image/png;base64,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"},"7ca1":function(t,e,s){},"8e61":function(t,e,s){"use strict";s("a429")},a429:function(t,e,s){},a958:function(t,e,s){"use strict";s.d(e,"e",(function(){return a})),s.d(e,"d",(function(){return n})),s.d(e,"a",(function(){return o})),s.d(e,"f",(function(){return r})),s.d(e,"b",(function(){return c})),s.d(e,"c",(function(){return l}));var i=s("b775");function a(t){return Object(i["a"])({url:"/contract/logs/list",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/contract/logs/"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/contract/logs",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/contract/logs",method:"put",data:t})}function c(t){return Object(i["a"])({url:"/contract/logs/"+t,method:"delete"})}function l(t){return Object(i["a"])({url:"/contract/logs/export",method:"get",params:t})}},adc1:function(t,e,s){"use strict";s.d(e,"f",(function(){return a})),s.d(e,"e",(function(){return n})),s.d(e,"a",(function(){return o})),s.d(e,"h",(function(){return r})),s.d(e,"b",(function(){return c})),s.d(e,"c",(function(){return l})),s.d(e,"g",(function(){return u})),s.d(e,"d",(function(){return d}));var i=s("b775");function a(t){return Object(i["a"])({url:"/contract/info/list",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/contract/info/"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/contract/info",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/contract/info",method:"put",data:t})}function c(t){return Object(i["a"])({url:"/contract/info/"+t,method:"delete"})}function l(t){return Object(i["a"])({url:"/contract/info/export",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/contract/info/sendContract",method:"put",data:t})}function d(t){return Object(i["a"])({url:"/contract/info/count",method:"Get",data:t})}},b059:function(t,e,s){"use strict";s("7ca1")},c0c7:function(t,e,s){"use strict";s.d(e,"k",(function(){return n})),s.d(e,"l",(function(){return o})),s.d(e,"g",(function(){return r})),s.d(e,"a",(function(){return c})),s.d(e,"p",(function(){return l})),s.d(e,"c",(function(){return u})),s.d(e,"d",(function(){return d})),s.d(e,"m",(function(){return h})),s.d(e,"b",(function(){return p})),s.d(e,"h",(function(){return g})),s.d(e,"q",(function(){return f})),s.d(e,"r",(function(){return m})),s.d(e,"o",(function(){return v})),s.d(e,"s",(function(){return y})),s.d(e,"j",(function(){return x})),s.d(e,"n",(function(){return b})),s.d(e,"i",(function(){return _})),s.d(e,"e",(function(){return C})),s.d(e,"f",(function(){return w}));var i=s("b775"),a=s("4918");function n(t){return Object(i["a"])({url:"/system/user/list",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/system/user/pick",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/system/user/"+Object(a["f"])(t),method:"get"})}function c(t){return Object(i["a"])({url:"/system/user",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/system/user",method:"put",data:t})}function u(t){return Object(i["a"])({url:"/system/user/"+t,method:"delete"})}function d(t){return Object(i["a"])({url:"/system/user/export",method:"get",params:t})}function h(t,e){var s={userId:t,password:e};return Object(i["a"])({url:"/system/user/resetPwd",method:"put",data:s})}function p(t,e){var s={userId:t,status:e};return Object(i["a"])({url:"/system/user/changeStatus",method:"put",data:s})}function g(){return Object(i["a"])({url:"/system/user/profile",method:"get"})}function f(t){return Object(i["a"])({url:"/system/user/profile",method:"put",data:t})}function m(t,e){var s={oldPassword:t,newPassword:e};return Object(i["a"])({url:"/system/user/profile/updatePwd",method:"put",params:s})}function v(t,e){var s={oldPassword:t,newPassword:e};return Object(i["a"])({url:"/system/user/profile/updateSignPwd",method:"put",params:s})}function y(t){return Object(i["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function x(){return Object(i["a"])({url:"/system/user/importTemplate",method:"get"})}function b(t){return Object(i["a"])({url:"/system/user/authentication",method:"post",params:t})}function _(t){return Object(i["a"])({url:"/system/user/queryfacerecord",method:"get",params:t})}function C(t){return Object(i["a"])({url:"/system/user/facerecordsucess/"+t,method:"get"})}function w(){return Object(i["a"])({url:"/system/user/selfuser",method:"get"})}}}]);