var e=(e,t,a)=>new Promise(((i,o)=>{var s=e=>{try{r(a.next(e))}catch(t){o(t)}},n=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,n);r((a=a.apply(e,t)).next())}));import{B as t}from"./TableImg-d2c728a3.js";import{T as a}from"./useForm-76a4ff23.js";import{u as i}from"./useTable-0a379cac.js";import{b as o,r as s}from"./dept-667428a4.js";import{b as n}from"./system-54dc9bf1.js";import{u as r}from"./index-c9e02f09.js";import{c as d,s as l,_ as c}from"./DeptModal-d0b594e6.js";import{a as u,ab as m,ac as p,o as f,h as b,n as j,H as h,E as y,j as g,O as x,K as C,t as v,l as w,k as _,v as I,S as k}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-2c15cc4f.js";const R=C("新增"),M=u({setup(u){const{createMessage:M}=k();let O=new Map;(()=>{e(this,null,(function*(){(yield n()).forEach((e=>{O.set(e.tenantId,e.tenantName)}))}))})();const[S,{openModal:D}]=r(),[E,{reload:F}]=i({api:o,columns:d,rowKey:"id",formConfig:{labelWidth:120,schemas:l},pagination:!1,striped:!1,useSearchForm:!0,canResize:!1,actionColumn:{width:300,title:"操作",dataIndex:"action"}});function U(e){D(!0,{record:e,isDetail:!1,isUpdate:!1,addChild:!!e})}function q(e){D(!0,{record:e,isUpdate:!1,isDetail:!0})}function T(e){D(!0,{record:e,isDetail:!1,isUpdate:!0})}function z(t){return e(this,null,(function*(){yield s({ids:t.id}),M.success("操作成功"),F()}))}function B(){M.success("操作成功"),F()}return(e,i)=>{const o=m("a-button"),s=p("auth");return f(),b("div",null,[j(_(t),{onRegister:_(E)},{toolbar:h((()=>[y((f(),g(o,{type:"primary",onClick:U},{default:h((()=>[R])),_:1})),[[s,"dept_add"]])])),bodyCell:h((({column:e,record:t})=>{return["tenantId"===e.dataIndex?(f(),b(x,{key:0},[C(v((i=t.tenantId,O.get(i+""))),1)],64)):w("",!0),"action"===e.dataIndex?(f(),g(_(a),{key:1,actions:[{auth:"dept_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:q.bind(null,t)},{auth:"dept_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:T.bind(null,t)},{auth:"dept_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:z.bind(null,t)}},{ifShow:()=>_(I)().getUserInfo.role_name.includes("admin"),auth:"dept_add",label:"新增子项",icon:"clarity:plus-line",onClick:U.bind(null,t)}]},null,8,["actions"])):w("",!0)];var i})),_:1},8,["onRegister"]),j(c,{onRegister:_(S),onSuccess:B},null,8,["onRegister"])])}}});export{M as default};
