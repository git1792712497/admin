import{B as e}from"./TableImg-d2c728a3.js";import{T as o}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{a as s}from"./system-54dc9bf1.js";import{a as i}from"./index-6c947566.js";import{c as n,s as r,R as a}from"./RoleDrawer-396c4c7a.js";import{a as c,ab as l,o as d,h as m,n as u,H as p,k as f,v as b,j,l as g,K as y,S as h}from"./index-c5a6c875.js";import w from"./RoleSettingModal-b4853b0f.js";import{u as x}from"./index-c9e02f09.js";import{r as R}from"./role-ff1ea5b0.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-941b9c74.js";import"./menu-b0618eaf.js";const v=y(" 新增角色 "),C=y("权限设置"),S=c({setup(c){const{createMessage:y}=h(),[S,{openDrawer:k}]=i(),[I,{openModal:_}]=x(),[F,{reload:M,getRowSelection:O}]=t({api:s,columns:n,formConfig:{labelWidth:120,schemas:r},rowSelection:{type:"radio"},rowKey:"id",useSearchForm:!0,pagination:!1,actionColumn:{width:160,title:"操作",dataIndex:"action"}});function q(){k(!0,{isUpdate:!1})}function K(e){k(!0,{record:e,isUpdate:!0})}function T(e){return o=this,t=null,s=function*(){yield R({ids:e.id}),y.success("操作成功"),M()},new Promise(((e,i)=>{var n=e=>{try{a(s.next(e))}catch(o){i(o)}},r=e=>{try{a(s.throw(e))}catch(o){i(o)}},a=o=>o.done?e(o.value):Promise.resolve(o.value).then(n,r);a((s=s.apply(o,t)).next())}));var o,t,s}function U(){y.success("操作成功"),M()}function B(){y.success("操作成功"),M()}function D(){const e=O().selectedRowKeys;0!=(null==e?void 0:e.length)?_(!0,{id:e}):y.error("请至少选择一条数据")}return(t,s)=>{const i=l("a-button");return d(),m("div",null,[u(f(e),{onRegister:f(F)},{toolbar:p((()=>[u(i,{type:"primary",onClick:q},{default:p((()=>[v])),_:1}),f(b)().getUserInfo.role_name.includes("admin")?(d(),j(i,{key:0,type:"info",onClick:D},{default:p((()=>[C])),_:1})):g("",!0)])),bodyCell:p((({column:e,record:t})=>["action"===e.dataIndex?(d(),j(f(o),{key:0,actions:[{label:"编辑",icon:"clarity:note-edit-line",onClick:K.bind(null,t)},{label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:T.bind(null,t)}}]},null,8,["actions"])):g("",!0)])),_:1},8,["onRegister"]),u(a,{onRegister:f(S),onSuccess:U},null,8,["onRegister"]),u(w,{onRegister:f(I),onSuccess:B},null,8,["onRegister"])])}}});export{S as default};
