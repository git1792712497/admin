var e=(e,t,a)=>new Promise(((s,o)=>{var i=e=>{try{r(a.next(e))}catch(t){o(t)}},n=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,n);r((a=a.apply(e,t)).next())}));import{B as t}from"./TableImg-d2c728a3.js";import{T as a}from"./useForm-76a4ff23.js";import{u as s}from"./useTable-0a379cac.js";import{b as o}from"./system-54dc9bf1.js";import{a as i,r as n}from"./post-859b11b4.js";import{u as r}from"./index-c9e02f09.js";import{c as l,s as c,_ as d}from"./PostModal-f98a5e4e.js";import{a as u,ab as m,ac as p,o as f,h as b,n as j,H as h,E as y,j as g,O as x,K as v,t as w,l as C,k as I,S as _}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-2c15cc4f.js";const k=v(" 新增 "),R=u({setup(u){const{createMessage:R}=_();let M=new Map;(()=>{e(this,null,(function*(){(yield o()).forEach((e=>{M.set(e.tenantId,e.tenantName)}))}))})();const[O,{openModal:D}]=r(),[E,{reload:F,updateTableDataRecord:S}]=s({api:i,rowKey:"id",columns:l,formConfig:{labelWidth:120,schemas:c},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function T(){D(!0,{isDetail:!1,isUpdate:!1})}function U(e){D(!0,{record:e,isUpdate:!1,isDetail:!0})}function q(e){D(!0,{record:e,isDetail:!1,isUpdate:!0})}function P(t){return e(this,null,(function*(){yield n({ids:t.id}),R.success("操作成功"),F()}))}function B({isUpdate:e,values:t}){R.success("操作成功"),e?S(t.id,t):F()}return(e,s)=>{const o=m("a-button"),i=p("auth");return f(),b("div",null,[j(I(t),{onRegister:I(E)},{toolbar:h((()=>[y((f(),g(o,{type:"primary",onClick:T},{default:h((()=>[k])),_:1})),[[i,"post_add"]])])),bodyCell:h((({column:e,record:t})=>{return["tenantId"===e.dataIndex?(f(),b(x,{key:0},[v(w((s=t.tenantId,M.get(s+""))),1)],64)):C("",!0),"action"===e.dataIndex?(f(),g(I(a),{key:1,actions:[{auth:"post_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:U.bind(null,t)},{auth:"post_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:q.bind(null,t)},{auth:"post_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:P.bind(null,t)}}]},null,8,["actions"])):C("",!0)];var s})),_:1},8,["onRegister"]),j(d,{onRegister:I(O),onSuccess:B},null,8,["onRegister"])])}}});export{R as default};
