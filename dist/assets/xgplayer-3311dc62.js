import{E as Ui}from"./eventemitter3-04d8d435.js";import{d as Tr}from"./delegate-d21e0732.js";import{d as _o}from"./downloadjs-c5bd1f13.js";var bo=typeof window!="undefined"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,on={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},an="%c[xgplayer]",P={config:{debug:bo?3:1},logInfo:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];this.config.debug>=3&&(i=console).log.apply(i,[an,on.info,r].concat(e))},logWarn:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];this.config.debug>=1&&(i=console).warn.apply(i,[an,on.warn,r].concat(e))},logError:function(r){var i;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];(i=console)[t].apply(i,[an,on.error,r].concat(o))}}};function wo(n){n.logInfo=P.logInfo.bind(n),n.logWarn=P.logWarn.bind(n),n.logError=P.logError.bind(n)}function Po(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Cr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ko(n,r,i){return r&&Cr(n.prototype,r),i&&Cr(n,i),n}var Oo=function(){function n(r){Po(this,n),this.bufferedList=r}return ko(n,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),n}();function So(n){return xo(n)||Eo(n)||Co(n)||To()}function To(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Co(n,r){if(!!n){if(typeof n=="string")return _n(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _n(n,r)}}function Eo(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xo(n){if(Array.isArray(n))return _n(n)}function _n(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function ne(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ne=function(i){return typeof i}:ne=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ne(n)}var y={};y.createDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(n);return e.className=t,e.innerHTML=r,Object.keys(i).forEach(function(o){var a=o,s=i[o];n==="video"||n==="audio"||n==="live-video"?s&&e.setAttribute(a,s):e.setAttribute(a,s)}),e};y.createDomFromHtml=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=n;var e=t.children;return t=null,e.length>0?(e=e[0],i&&y.addClass(e,i),r&&Object.keys(r).forEach(function(o){e.setAttribute(o,r[o])}),e):null}catch(o){return P.logError("util.createDomFromHtml",o),null}};y.hasClass=function(n,r){if(!n||!r)return!1;try{return Array.prototype.some.call(n.classList,function(t){return t===r})}catch(t){var i=n.className&&ne(n.className)==="object"?n.getAttribute("class"):n.className;return i&&!!i.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}};y.addClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.add(i)})}catch(i){y.hasClass(n,r)||(n.className&&ne(n.className)==="object"?n.setAttribute("class",n.getAttribute("class")+" "+r):n.className+=" "+r)}};y.removeClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.remove(i)})}catch(i){y.hasClass(n,r)&&r.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className&&ne(n.className)==="object"?n.setAttribute("class",n.getAttribute("class").replace(e," ")):n.className=n.className.replace(e," ")})}};y.toggleClass=function(n,r){!n||r.split(/\s+/g).forEach(function(i){y.hasClass(n,i)?y.removeClass(n,i):y.addClass(n,i)})};y.classNames=function(){for(var n=arguments,r=[],i=function(o){y.typeOf(n[o])==="String"?r.push(n[o]):y.typeOf(n[o])==="Object"&&Object.keys(n[o]).map(function(a){n[o][a]&&r.push(a)})},t=0;t<arguments.length;t++)i(t);return r.join(" ")};y.findDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,r=arguments.length>1?arguments[1]:void 0,i;try{i=n.querySelector(r)}catch(t){P.logError("util.findDom",t),r.indexOf("#")===0&&(i=n.getElementById(r.slice(1)))}return i};y.getCss=function(n,r){return n.currentStyle?n.currentStyle[r]:document.defaultView.getComputedStyle(n,!1)[r]};y.padStart=function(n,r,i){for(var t=String(i),e=r>>0,o=Math.ceil(e/t.length),a=[],s=String(n);o--;)a.push(t);return a.join("").substring(0,e-s.length)+s};y.format=function(n){if(window.isNaN(n))return"";n=Math.round(n);var r=y.padStart(Math.floor(n/3600),2,0),i=y.padStart(Math.floor((n-r*3600)/60),2,0),t=y.padStart(Math.floor(n-r*3600-i*60),2,0);return(r==="00"?[i,t]:[r,i,t]).join(":")};y.event=function(n){if(n.touches){var r=n.touches[0]||n.changedTouches[0];n.clientX=r.clientX||0,n.clientY=r.clientY||0,n.offsetX=r.pageX-r.target.offsetLeft,n.offsetY=r.pageY-r.target.offsetTop}n._target=n.target||n.srcElement};y.typeOf=function(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]};y.deepCopy=function(n,r){if(y.typeOf(r)==="Object"&&y.typeOf(n)==="Object")return Object.keys(r).forEach(function(i){y.typeOf(r[i])==="Object"&&!(r[i]instanceof Node)?n[i]===void 0||n[i]===void 0?n[i]=r[i]:y.deepCopy(n[i],r[i]):y.typeOf(r[i])==="Array"?n[i]=y.typeOf(n[i])==="Array"?n[i].concat(r[i]):r[i]:n[i]=r[i]}),n};y.deepMerge=function(n,r){return Object.keys(r).map(function(i){if(y.typeOf(r[i])==="Array"&&y.typeOf(n[i])==="Array"){if(y.typeOf(n[i])==="Array"){var t;(t=n[i]).push.apply(t,So(r[i]))}}else y.typeOf(n[i])===y.typeOf(r[i])&&n[i]!==null&&y.typeOf(n[i])==="Object"&&!(r[i]instanceof window.Node)?y.deepMerge(n[i],r[i]):r[i]!==null&&(n[i]=r[i])}),n};y.getBgImage=function(n){var r=(n.currentStyle||window.getComputedStyle(n,null)).backgroundImage;if(!r||r==="none")return"";var i=document.createElement("a");return i.href=r.replace(/url\("|"\)/g,""),i.href};y.copyDom=function(n){if(n&&n.nodeType===1){var r=document.createElement(n.tagName);return Array.prototype.forEach.call(n.attributes,function(i){r.setAttribute(i.name,i.value)}),n.innerHTML&&(r.innerHTML=n.innerHTML),r}else return""};y.setInterval=function(n,r,i,t){n._interval[r]||(n._interval[r]=setInterval(i.bind(n),t))};y.clearInterval=function(n,r){clearInterval(n._interval[r]),n._interval[r]=null};y.setTimeout=function(n,r,i){n._timers||(n._timers=[]);var t=setTimeout(function(){r(),y.clearTimeout(n,t)},i);return n._timers.push(t),t};y.clearTimeout=function(n,r){var i=n._timers;if(y.typeOf(i)==="Array"){for(var t=0;t<i.length;t++)if(i[t]===r){i.splice(t,1),clearTimeout(r);break}}else clearTimeout(r)};y.clearAllTimers=function(n){var r=n._timers;y.typeOf(r)==="Array"&&(r.map(function(i){clearTimeout(i)}),n._timerIds=[])};y.createImgBtn=function(n,r,i,t){var e=y.createDom("xg-".concat(n),"",{},"xgplayer-".concat(n,"-img"));if(e.style.backgroundImage='url("'.concat(r,'")'),i&&t){var o,a,s;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(u){return i.indexOf(u)>-1&&t.indexOf(u)>-1?(o=parseFloat(i.slice(0,i.indexOf(u)).trim()),a=parseFloat(t.slice(0,t.indexOf(u)).trim()),s=u,!1):!0}),e.style.width="".concat(o).concat(s),e.style.height="".concat(a).concat(s),e.style.backgroundSize="".concat(o).concat(s," ").concat(a).concat(s),n==="start"?e.style.margin="-".concat(a/2).concat(s," auto auto -").concat(o/2).concat(s):e.style.margin="auto 5px auto 5px"}return e};y.Hex2RGBA=function(n,r){var i=[];if(/^\#[0-9A-F]{3}$/i.test(n)){var t="#";n.replace(/[0-9A-F]/ig,function(e){t+=e+e}),n=t}return/^#[0-9A-F]{6}$/i.test(n)?(n.replace(/[0-9A-F]{2}/ig,function(e){i.push(parseInt(e,16))}),"rgba(".concat(i.join(","),", ").concat(r,")")):"rgba(255, 255, 255, 0.1)"};y.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};y.checkIsFunction=function(n){return n&&typeof n=="function"};y.checkIsObject=function(n){return n!==null&&ne(n)==="object"};y.hide=function(n){n.style.display="none"};y.show=function(n,r){n.style.display=r||"block"};y.isUndefined=function(n){if(typeof n=="undefined"||n===null)return!0};y.setStyleFromCsstext=function(n,r){if(!!r)if(y.typeOf(r)==="String"){var i=r.replace(/\s+/g,"").split(";");i.map(function(t){if(t){var e=t.split(":");e.length>1&&(n.style[e[0]]=e[1])}})}else Object.keys(r).map(function(t){n.style[t]=r[t]})};function Ro(n,r){for(var i=0,t=r.length;i<t;i++)if(n.indexOf(r[i])>-1)return!0;return!1}y.filterStyleFromText=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=n.style.cssText;if(!i)return{};var t=i.replace(/\s+/g,"").split(";"),e={},o={};return t.map(function(a){if(a){var s=a.split(":");s.length>1&&(Ro(s[0],r)?e[s[0]]=s[1]:o[s[0]]=s[1])}}),n.setAttribute("style",""),Object.keys(o).map(function(a){n.style[a]=o[a]}),e};y.getStyleFromCsstext=function(n){var r=n.style.cssText;if(!r)return{};var i=r.replace(/\s+/g,"").split(";"),t={};return i.map(function(e){if(e){var o=e.split(":");o.length>1&&(t[o[0]]=o[1])}}),t};y.preloadImg=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(!!n){var t=new window.Image;t.complete?r&&r():(t.onload=function(e){t=null,r&&r(e)},t.onerror=function(e){t=null,i&&i(e)}),t.src=n}};y.stopPropagation=function(n){n&&(n.stopPropagation(),n.cancelable&&n.preventDefault())};y.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};y.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};y.checkTouchSupport=function(){return"ontouchstart"in window};y.getBuffered2=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],t=0;t<n.length;t++)i.push({start:n.start(t)<.5?0:n.start(t),end:n.end(t)});i.sort(function(u,l){var f=u.start-l.start;return f||l.end-u.end});var e=[];if(r)for(var o=0;o<i.length;o++){var a=e.length;if(a){var s=e[a-1].end;i[o].start-s<r?i[o].end>s&&(e[a-1].end=i[o].end):e.push(i[o])}else e.push(i[o])}else e=i;return new Oo(e)};y.getEventPos=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{x:n.x/r,y:n.y/r,clientX:n.clientX/r,clientY:n.clientY/r,offsetX:n.offsetX/r,offsetY:n.offsetY/r,pageX:n.pageX/r,pageY:n.pageY/r}};y.requestAnimationFrame=function(n){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(r)return r(n)};y.getHostFromUrl=function(n){if(n==null||n===""||typeof n!="string")return"";var r=n.split("/"),i="";return r.length>3&&r[2]&&(i=r[2]),i};y.cancelAnimationFrame=function(n){var r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;r&&r(n)};const c=y;var Er={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},zi={get device(){var n=zi.os;return n.isPc?"pc":"mobile"},get browser(){if(typeof navigator=="undefined")return"";var n=navigator.userAgent.toLowerCase(),r={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(r).filter(function(i){return r[i].test(n)}))[0]},get os(){if(typeof navigator=="undefined")return{};var n=navigator.userAgent,r=/(?:Windows Phone)/.test(n),i=/(?:SymbianOS)/.test(n)||r,t=/(?:Android)/.test(n),e=/(?:Firefox)/.test(n),o=/(?:iPad|PlayBook)/.test(n)||t&&!/(?:Mobile)/.test(n)||e&&/(?:Tablet)/.test(n),a=/(?:iPhone)/.test(n)&&!o,s=!a&&!t&&!i&&!o,u=/(?:iPad|PlayBook)/.test(n);return{isTablet:o,isPhone:a,isIpad:u,isIos:a||u,isAndroid:t,isPc:s,isSymbian:i,isWindowsPhone:r,isFireFox:e}},get osVersion(){var n=navigator.userAgent,r="";/(?:iPhone)|(?:iPad|PlayBook)/.test(n)?r=Er.ios:r=Er.android;var i=r?r.exec(n):[];if(i&&i.length>=3){var t=i[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator=="undefined")return!1;var n=/(micromessenger)\/([\d.]+)/,r=n.exec(navigator.userAgent.toLocaleLowerCase());if(r)return!0}};const b=zi;var Io=JSON.parse('"3.0.0-alpha.102-5-0"');const bn=Io;function Ao(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var Lo={1:"network",2:"network",3:"decoder",4:"format"},yr=function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Ao(this,n);var t=r&&r.i18n?r.i18n.ERROR_TYPES:null;if(r.video){var e=i.mediaError?i.mediaError:r.video.error||{},o=r.duration,a=r.currentTime,s=r.ended,u=r.src,l=r.currentSrc,f=r.video,h=f.readyState,p=f.networkState,g={playerVersion:bn,domain:document.domain,currentTime:a,duration:o,ended:s,readyState:h,networkState:p,src:u||l,errorType:i.errorType,errorCode:i.errorCode||e.code,message:i.errorMessage||e.message,mediaError:e,originError:i.originError?i.originError.stack:""};return i.ext&&Object.keys(i.ext).map(function(T){g[T]=i.ext[T]}),g}else if(arguments.length>1){for(var v={playerVersion:bn,domain:document.domain},m=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],_=0;_<arguments.length;_++)v[m[_]]=arguments[_];return v.ex=t?(t[arguments[0]]||{}).msg:"",v}},ie="play",Vi="playing",Ee="ended",xe="pause",tn="error",Gi="seeking",Se="seeked",V="timeupdate",vr="waiting",F="canplay",$o="canplaythrough",nn="durationchange",Wi="volumechange",Te="loadeddata",Ki="ratechange",Yi="progress",Xi="loadstart",Re="emptied",Do="stalled",No="suspend",Mo="abort",Fo="bufferedChange",mr="focus",qi="blur",_r="ready",Zi="urlNull",pe="autoplay_started",br="autoplay_was_prevented",rn="complete",Ji="replay",wr="destroy",Ie="urlchange",Y="fullscreen_change",wt="cssFullscreen_change",Pt="mini_state_change",Pr="definition_change",Bo="before_definition_change",Qi="after_definition_change",jo="SEI_PARSED",Ho="retry",Ce="video_resize",wn="pip_change",eo="rotate",to="screenShot",Pn="playnext",no="shortcut",ro="xglog",kn="user_action";const Uo=Object.freeze(Object.defineProperty({__proto__:null,PLAY:ie,PLAYING:Vi,ENDED:Ee,PAUSE:xe,ERROR:tn,SEEKING:Gi,SEEKED:Se,TIME_UPDATE:V,WAITING:vr,CANPLAY:F,CANPLAY_THROUGH:$o,DURATION_CHANGE:nn,VOLUME_CHANGE:Wi,LOADED_DATA:Te,RATE_CHANGE:Ki,PROGRESS:Yi,LOAD_START:Xi,EMPTIED:Re,STALLED:Do,SUSPEND:No,ABORT:Mo,BUFFER_CHANGE:Fo,PLAYER_FOCUS:mr,PLAYER_BLUR:qi,READY:_r,URL_NULL:Zi,AUTOPLAY_STARTED:pe,AUTOPLAY_PREVENTED:br,COMPLETE:rn,REPLAY:Ji,DESTROY:wr,URL_CHANGE:Ie,FULLSCREEN_CHANGE:Y,CSS_FULLSCREEN_CHANGE:wt,MINI_STATE_CHANGE:Pt,DEFINITION_CHANGE:Pr,BEFORE_DEFINITION_CHANGE:Bo,AFTER_DEFINITION_CHANGE:Qi,SEI_PARSED:jo,RETRY:Ho,VIDEO_RESIZE:Ce,PIP_CHANGE:wn,ROTATE:eo,SCREEN_SHOT:to,PLAYNEXT:Pn,SHORTCUT:no,XGLOG:ro,USER_ACTION:kn},Symbol.toStringTag,{value:"Module"}));function Me(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Me=function(i){return typeof i}:Me=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Me(n)}function zo(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Vo(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function xr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Go(n,r,i){return r&&xr(n.prototype,r),i&&xr(n,i),n}function X(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?X=Reflect.get:X=function(e,o,a){var s=Wo(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},X(n,r,i||n)}function Wo(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=B(n),n!==null););return n}function Ko(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&On(n,r)}function On(n,r){return On=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},On(n,r)}function Yo(n){var r=Zo();return function(){var t=B(n),e;if(r){var o=B(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Xo(this,e)}}function Xo(n,r){return r&&(Me(r)==="object"||typeof r=="function")?r:qo(n)}function qo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function B(n){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},B(n)}var Jo=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort"];function sn(n,r){!this||!this.emit||(n==="error"?this.errorHandler(n):this.emit(n,r))}function Qo(n,r){var i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return r[i]&&typeof r[i]=="function"&&r.on(n,r[i]),function(t){var e=n,o={player:r,eventName:n,timeStamp:t.timeStamp,currentTime:r.currentTime,duration:r.duration,paused:r.paused,ended:r.ended,isInternalOp:!!r._internalOp[t.type],muted:r.muted,volume:r.volume,host:c.getHostFromUrl(r.currentSrc),vtype:r.vtype};if(r.removeInnerOP(t.type),e==="timeupdate"&&(r._currentTime=r.video&&r.video.currentTime),e==="durationchange"&&(r._duration=r.video.duration),e==="volumechange"&&(o.isMutedChange=r._lastMuted!==r.muted,r._lastMuted=r.muted),r.videoEventMiddleware[n]){var a=sn.bind(r);try{r.videoEventMiddleware[n].call(r,o,a)}catch(s){throw sn.call(r,e,o),s}}else sn.call(r,e,o)}}var ea=function(n){Ko(i,n);var r=Yo(i);function i(t){var e;Vo(this,i),e=r.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttributes);var o=t["x5-video-player-type"]||t.x5VideoPlayerType;return b.isWeixin&&b.os.isAndroid&&o&&(e.videoConfig["x5-video-player-type"]=o,delete e.videoConfig.playsinline,delete e.videoConfig["webkit-playsinline"],delete e.videoConfig["x5-playsinline"]),t.loop&&(e.videoConfig.loop="loop"),e.video=c.createDom(e.videoConfig.mediaType,"",e.videoConfig,""),t.defaultPlaybackRate&&(e.video.defaultPlaybackRate=e.video.playbackRate=t.defaultPlaybackRate),c.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.video.muted=!0,e._lastMuted=!0),t.autoplay&&(e.video.autoplay=!0),e._interval={},e.videoEventMiddleware={},e.attachVideoEvents(),e}return Go(i,[{key:"setEventsMiddleware",value:function(e){var o=this;Object.keys(e).map(function(a){o.videoEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var o=this;Object.keys(e).map(function(a){delete o.videoEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(e){var o=this;this.evHandlers||(this._evHandlers=Jo.map(function(a){return zo({},a,Qo(a,o))})),e||(e=this.video),this._evHandlers.map(function(a){var s=Object.keys(a)[0];e.addEventListener(s,a[s],!1)})}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map(function(o){var a=Object.keys(o)[0];e.removeEventListener(Object.keys(o)[0],o[a],!1)})}},{key:"_attachSourceEvents",value:function(e,o){var a=this;e.removeAttribute("src"),o.forEach(function(l){a.video.appendChild(c.createDom("source","",{src:"".concat(l.src),type:"".concat(l.type||"")}))});var s=e.children;this._videoSourceCount=s.length,!this._sourceError&&(this._sourceError=function(l){a._videoSourceCount--,a._videoSourceCount===0&&(a.videoEventMiddleware.error?a.videoEventMiddleware.error.call(a,l,function(){a.errorHandler("error")}):a.errorHandler("error",{code:4,message:"sources load error"}))});for(var u=0;u<s.length;u++)s[u].addEventListener("error",this._sourceError)}},{key:"_detachSourceEvents",value:function(e){var o=e.children;if(!(o.length===0||!this._sourceError)){for(var a=0;a<o.length;a++)o[a].removeEventListener("error",this._sourceError);for(;o.length>0;)e.removeChild(o[0])}}},{key:"errorHandler",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.video&&(this.video.error||o)){var a=this.video.error||o,s=a.code?Lo[a.code]:"other",u=a.message;this.video.currentSrc||(u="empty_src",a={code:6,message:u}),this.emit(e,new yr(this,{errorType:s,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,this.emit("hasstart"))}},{key:"destroy",value:function(){var e=this;this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null;for(var o in this._interval)clearInterval(this._interval[o]),this._interval[o]=null;this.detachVideoEvents(),this._evHandlers.map(function(a){var s=Object.keys(a)[0],u="on".concat(s.charAt(0).toUpperCase()).concat(s.slice(1));typeof e[u]=="function"&&e.off(s,e[u])}),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){var e=this.video?this.video.play():null;return e}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return this.video?this.video.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var o=[0,0];if(!this.video)return o;e||(e=this.video.buffered);var a=this.video.currentTime;if(e)for(var s=0,u=e.length;s<u&&(o[0]=e.start(s),o[1]=e.end(s),!(o[0]<=a&&a<=o[1]));s++);return o[0]-a<=0&&a-o[1]<=0?o:[0,0]}},{key:"autoplay",get:function(){return this.video?this.video.autoplay:!1},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?c.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var o=this.video.buffered;if(!o||o.length===0)return e;for(var a=0;a<o.length;a++)if((o.start(a)<=this.currentTime||o.start(a)<.1)&&o.end(a)>=this.currentTime)return{start:o.start(a),end:o.end(a)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?this.video.currentTime!==void 0?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return this.video?this.video.defaultMuted:!1},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video?this.video.ended:!1}},{key:"error",get:function(){if(!this.video||!this.video.error)return null;var e=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return e[this.video.error.code-1]}},{key:"loop",get:function(){return this.video?this.video.loop:!1},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return this.video?this.video.muted:!1},set:function(e){!this.video||this.video.muted===e||(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return this.video?this.video.paused:!0}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){!this.video||e===1/0||(this.video.defaultPlaybackRate=e,this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return this.video?this.video.preload:!1},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return this.video?this.video.seekable:!1}},{key:"seeking",get:function(){return this.video?this.video.seeking:!1}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){if(!!this.video){if(this.emit(Ie,e),this.emit(vr),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)){this.onWaiting();return}this._detachSourceEvents(this.video),c.typeOf(e)==="Array"?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()}}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e===1/0||!this.video||(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=X(B(i.prototype),"emit",this)).call.apply(a,[this,e,o].concat(u))}},{key:"on",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=X(B(i.prototype),"on",this)).call.apply(a,[this,e,o].concat(u))}},{key:"once",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=X(B(i.prototype),"once",this)).call.apply(a,[this,e,o].concat(u))}},{key:"off",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=X(B(i.prototype),"off",this)).call.apply(a,[this,e,o].concat(u))}},{key:"offAll",value:function(){X(B(i.prototype),"removeAllListeners",this).call(this)}}]),i}(Ui);const ta=ea;function na(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Rr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ra(n,r,i){return r&&Rr(n.prototype,r),i&&Rr(n,i),n}var ia=function(){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};na(this,n),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=r}return ra(n,[{key:"openDB",value:function(i){var t=this,e=this,o=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,o);a.onerror=function(s){},a.onsuccess=function(s){t.myDB.db=s.target.result,i.call(e)},a.onupgradeneeded=function(s){var u=s.target.result;s.target.transaction,u.objectStoreNames.contains(e.myDB.ojstore.name)||u.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<t.length;a++)o=e.add(t[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"putData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<t.length;a++)o=e.put(t[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,t,e){var o=this,a=this.myDB.db.transaction(i,"readwrite").objectStore(i),s=a.get(t);s.onerror=function(){e.call(o,null)},s.onsuccess=function(u){var l=u.target.result;e.call(o,l)}}},{key:"deleteData",value:function(i,t){var e=this.myDB.db.transaction(i,"readwrite").objectStore(i);e.delete(t)}},{key:"clearData",value:function(i){var t=this.myDB.db.transaction(i,"readwrite").objectStore(i);t.clear()}}]),n}();const oa=ia;var Ir=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ar=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Lr=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function aa(n){return ca(n)||la(n)||ua(n)||sa()}function sa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(n,r){if(!!n){if(typeof n=="string")return Sn(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Sn(n,r)}}function la(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ca(n){if(Array.isArray(n))return Sn(n)}function Sn(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function Le(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),o=3;o<t;o++)e[o-3]=arguments[o];var a=r.call.apply(r,[n].concat(e));!i||typeof i!="function"||(a&&a.then?a.then(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];i.call.apply(i,[n].concat(u))}):i.call.apply(i,[n].concat(e)))}function kt(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[n]&&(this.__hooks[n]=null),function(){var t=arguments,e=this;if(i.pre)try{var o;(o=i.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[n])try{var a,s=(a=this.__hooks[n]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then(function(u){u!==!1&&Le.apply(void 0,[e,r,i.next].concat(aa(t)))}).catch(function(u){throw u}):Le.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments))):s===void 0&&Le.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,"] >> ").concat(u.message),u}else Le.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Ot(n,r){var i=this.__hooks;if(!!i)return i.hasOwnProperty(n)?(i&&(i[n]=r),!0):(console.warn("has no supported hook which name [".concat(n,"]")),!1)}function $r(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){for(var r=this.plugins[n.toLowerCase()],i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return r.useHooks&&r.useHooks.apply(r,t)}}function io(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.__hooks={},r&&r.map(function(i){n.__hooks[i]=null}),Object.defineProperty(n,"hooks",{get:function(){return n.__hooks&&Object.keys(n.__hooks).map(function(t){if(n.__hooks[t])return t})}})}function oo(n){n.__hooks=null}function ce(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),o=3;o<t;o++)e[o-3]=arguments[o];if(n.__hooks&&n.__hooks[r]){var a,s=(a=n.__hooks[r]).call.apply(a,[n,n].concat(e));if(s&&s.then)s.then(function(u){return u===!1?null:i.call.apply(i,[n,n].concat(e))}).catch(function(u){console.warn("[runHooks]".concat(r," reject"),u.message)});else if(s!==!1)return i.call.apply(i,[n,n].concat(e))}else return i.call.apply(i,[n,n].concat(e))}function Dr(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Nr(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Dr(Object(i),!0).forEach(function(t){fa(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Dr(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function fa(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function ha(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Mr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function pa(n,r,i){return r&&Mr(n.prototype,r),i&&Mr(n,i),n}function un(n,r){P.logError("[".concat(n,"] event or callback cant be undefined or null when call ").concat(r))}var Ae=function(){function n(r){ha(this,n),c.checkIsFunction(this.beforeCreate)&&this.beforeCreate(r),io(this),this.__args=r,this.__events={},this.config=r.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(r)}return pa(n,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"on",value:function(i,t){var e=this;if(!i||!t||!this.player){un(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=t,this.player.on(i,t)):Array.isArray(i)&&i.forEach(function(o){e.__events[o]=t,e.player.on(o,t)})}},{key:"once",value:function(i,t){if(!i||!t||!this.player){un(this.pluginName,"plugin.once(event, callback)");return}this.player.once(i,t)}},{key:"off",value:function(i,t){var e=this;if(!i||!t||!this.player){un(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,t)):Array.isArray(i)&&i.forEach(function(o){delete e.__events[i],e.player.off(o,t)})}},{key:"offAll",value:function(){var i=this;Object.keys(this.__events).map(function(t){i.__events[t]&&i.off(t,i.__events[t]),t&&delete i.__events[t]}),this.__events={}}},{key:"emit",value:function(i){var t;if(!!this.player){for(var e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];(t=this.player).emit.apply(t,[i].concat(o))}}},{key:"emitUserAction",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Nr(Nr({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(i,t,o)}},{key:"hook",value:function(i,t){return kt.call.apply(kt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,t){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return Ot.call.apply(Ot,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(!!this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:i,options:t})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,t=this.player,e=this.pluginName;this.offAll(),c.clearAllTimers(this),c.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(o){i[o]=null}),t.unRegisterPlugin(e),oo(this)}}],[{key:"defineGetterOrSetter",value:function(i,t){for(var e in t)Object.defineProperty(i,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),n}();function ga(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Fr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function da(n,r,i){return r&&Fr(n.prototype,r),i&&Fr(n,i),n}function fe(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?fe=Reflect.get:fe=function(e,o,a){var s=ya(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},fe(n,r,i||n)}function ya(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=Z(n),n!==null););return n}function va(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Tn(n,r)}function Tn(n,r){return Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Tn(n,r)}function ma(n){var r=wa();return function(){var t=Z(n),e;if(r){var o=Z(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return _a(this,e)}}function _a(n,r){return r&&(G(r)==="object"||typeof r=="function")?r:ba(n)}function ba(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Z(n){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Z(n)}function G(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(i){return typeof i}:G=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},G(n)}var Pa={CONTROLS:"controls",ROOT:"root"},S={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function ln(n){return n?n.indexOf&&/^http/.test(n):!1}function ka(n,r){return G(n)==="object"&&n.class&&typeof n.class=="string"?"".concat(r," ").concat(n.class):r}function Oa(n,r){return G(n)==="object"&&n.attr&&G(n.attr)==="object"&&Object.keys(n.attr).map(function(i){r[i]=n.attr[i]}),r}function Br(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",o=null;if(n instanceof window.Element)return c.addClass(n,i),Object.keys(t).map(function(a){n.setAttribute(a,t[a])}),n;if(ln(n)||ln(n.url))return t.src=ln(n)?n:n.url||"",o=c.createDom(n.tag||"img","",t,"xg-img ".concat(i)),o;if(typeof n=="function")try{return o=n(),o instanceof window.Element?(c.addClass(o,i),Object.keys(t).map(function(a){o.setAttribute(a,t[a])}),o):(P.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return P.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof n=="string"?c.createDomFromHtml(n,t,i):(P.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is invalid")),null)}function Sa(n,r){var i=r.config.icons||r.playerConfig.icons;Object.keys(n).map(function(t){var e=n[t],o=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},s=null;i&&i[t]&&(o=ka(i[t],o),a=Oa(i[t],a),s=Br(i[t],t,o,a,r.pluginName)),!s&&e&&(s=Br(e.icon?e.icon:e,a,o,{},r.pluginName)),r.icons[t]=s})}function Ta(n,r){Object.keys(n).map(function(i){Object.defineProperty(r.langText,i,{get:function(){var e=r.lang;return n[i][e]||n[i].zh}})})}var w=function(n){va(i,n);var r=ma(i);function i(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ga(this,i),t=r.call(this,e),t.__delegates=[],t}return da(i,[{key:"__init",value:function(e){if(fe(Z(i.prototype),"__init",this).call(this,e),!!e.root){var o=e.root,a=null;this.icons={},this.root=null,this.parent=null;var s=this.registerIcons()||{};Sa(s,this),this.langText={};var u=this.registerLanguageTexts()||{};Ta(u,this);var l="";try{l=this.render()}catch(p){throw P.logError("Plugin:".concat(this.pluginName,":render"),p),new Error("Plugin:".concat(this.pluginName,":render:").concat(p.message))}if(l)a=i.insert(l,o,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=c.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),o.appendChild(a);else return;this.root=a,this.parent=o;var f=this.config.attr||{},h=this.config.style||{};this.setAttr(f),this.setStyle(h),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(!!this.root){this._children=[];var o=this.children();o&&G(o)==="object"&&Object.keys(o).length>0&&Object.keys(o).map(function(a){var s=a,u=o[s],l={root:e.root},f,h;typeof u=="function"?(f=e.config[s]||{},h=u):G(u)==="object"&&typeof u.plugin=="function"&&(f=u.options?c.deepCopy(e.config[s]||{},u.options):e.config[s]||{},h=u.plugin),l.config=f,f.index!==void 0&&(l.index=f.index),f.root&&(l.root=f.root),e.registerPlugin(h,l,s)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function o(l,f){for(var h=0;h<l.children.length;h++)l.children[h].children.length>0?o(l.children[h],f):f(l.children[h])}var a=this.root,s=this.i18n,u=this.langText;a&&o(a,function(l){var f=l.getAttribute&&l.getAttribute("lang-key");if(!!f){var h=s[f.toUpperCase()]||u[f];h&&(l.innerHTML=typeof h=="function"?h(e):h)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},s=this.langText;e.setAttribute&&e.setAttribute("lang-key",o);var u=a[o.toUpperCase()]||s[o];u&&(e.innerHTML=u)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";o.root=o.root||this.root;var s=fe(Z(i.prototype),"registerPlugin",this).call(this,e,o,a);return this._children.push(s),s}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(!!this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,o,a){var s=this;if(arguments.length<3&&typeof o=="function")Array.isArray(e)?e.forEach(function(l){s.bindEL(l,o)}):this.bindEL(e,o);else{var u=i.delegate.call(this,this.root,e,o,a);this.__delegates=this.__delegates.concat(u)}}},{key:"unbind",value:function(e,o){var a=this;if(arguments.length<3&&typeof o=="function")Array.isArray(e)?e.forEach(function(l){a.unbindEL(l,o)}):this.unbindEL(e,o);else for(var s="".concat(e,"_").concat(o),u=0;u<this.__delegates.length;u++)if(this.__delegates[u].key===s){this.__delegates[u].destroy(),this.__delegates.splice(u,1);break}}},{key:"setStyle",value:function(e,o){var a=this;if(!!this.root){if(c.typeOf(e)==="String")return this.root.style[e]=o;c.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.style[s]=e[s]})}}},{key:"setAttr",value:function(e,o){var a=this;if(!!this.root){if(c.typeOf(e)==="String")return this.root.setAttribute(e,o);c.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.setAttribute(s,e[s])})}}},{key:"setHtml",value:function(e,o){!this.root||(this.root.innerHTML=e,typeof o=="function"&&o())}},{key:"bindEL",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;!this.root||"on".concat(e)in this.root&&typeof o=="function"&&this.root.addEventListener(e,o,a)}},{key:"unbindEL",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;!this.root||"on".concat(e)in this.root&&typeof o=="function"&&this.root.removeEventListener(e,o,a)}},{key:"show",value:function(e){if(!!this.root){this.root.style.display=e!==void 0?e:"block";var o=window.getComputedStyle(this.root,null),a=o.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,o){if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!o||!(o instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(o):e.appendChild(o)}catch(a){return P.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,o=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){o.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),fe(Z(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null})}}],[{key:"insert",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=o.children.length,u=Number(a),l=e instanceof window.Node;if(s){for(var f=0,h=null,p="";f<s;f++){h=o.children[f];var g=Number(h.getAttribute("data-index"));if(g>=u){p="beforebegin";break}else g<u&&(p="afterend")}return l?p==="afterend"?o.appendChild(e):o.insertBefore(e,h):h.insertAdjacentHTML(p,e),p==="afterend"?o.children[o.children.length-1]:o.children[f]}else return l?o.appendChild(e):o.insertAdjacentHTML("beforeend",e),o.children[o.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,o,a,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=[];if(e instanceof window.Node&&typeof s=="function")if(Array.isArray(a))a.forEach(function(h){var p=Tr(e,o,h,s,u);p.key="".concat(o,"_").concat(h),l.push(p)});else{var f=Tr(e,o,a,s,u);f.key="".concat(o,"_").concat(a),l.push(f)}return l}},{key:"ROOT_TYPES",get:function(){return Pa}},{key:"POSITIONS",get:function(){return S}}]),i}(Ae);function Ca(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function jr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ea(n,r,i){return r&&jr(n.prototype,r),i&&jr(n,i),n}var xa=function(){function n(){var r=this;if(Ca(this,n),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(i){var t=new Date().getTime();t-r.timeStamp<100||(r.timeStamp=t,r.__trigger(i))}),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return Ea(n,[{key:"addObserver",value:function(i,t){if(!!this.observer){this.observer&&this.observer.observe(i);for(var e=this.__handlers,o=-1,a=0;a<e.length;a++)e[a]&&i===e[a].target&&(o=a);o>-1?this.__handlers[o].handler=t:this.__handlers.push({target:i,handler:t})}}},{key:"unObserver",value:function(i){var t=-1;this.__handlers.map(function(e,o){i===e.target&&(t=o)});try{this.observer&&this.observer.unobserve(i)}catch(e){}this.observer&&this.observer.unobserve(i),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&i===t[e].target){try{t[e].handler(i)}catch(o){console.error(o)}return!0}return!1}},{key:"__trigger",value:function(i){for(var t=0;t<i.length;t++){var e=this.__runHandler(i[t].target);if(e)break}}}]),n}(),me=null;function Ra(n,r){return me||(me=new xa),me.addObserver(n,r),me}function Ia(n,r){me.unObserver(n,r)}function Aa(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]==="Object"}var La={init:function(r){var i=r._pluginInfoId;i||(i=new Date().getTime(),r._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!r.config.closeResizeObserver&&Ra(r.root,function(){r.getVideoSize()}),Object.keys(this.pluginGroup).length===0&&(r.isUserActive=!0),this.pluginGroup[i]={_player:r,_originalOptions:r.config||{}}},checkPlayerRoot:function(r){if(this.pluginGroup){for(var i=Object.keys(this.pluginGroup),t=0;t<i.length;t++){var e=this.pluginGroup[i[t]]._player;if(e.root===r)return e}return null}return null},lazyRegister:function(r,i){var t=this,e=i.timeout||1500;return Promise.race([i.loader().then(function(o){var a;o&&o.__esModule?a=o.default:a=o,t.register(r,a,o.options)}),new Promise(function(o,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(r,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!r||!i||typeof i!="function"||i.prototype===void 0)){var e=r._pluginInfoId;(!e||!this.pluginGroup||!this.pluginGroup[e])&&(this.init(r),e=r._pluginInfoId),this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins=[]);var o=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var s=t.pluginName||i.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported()){console.warn("not supported plugin [".concat(s,"]"));return}t.config||(t.config={});for(var u=Object.keys(a),l=0;l<u.length;l++)if(s.toLowerCase()===u[l].toLowerCase()){var f=a[u[l]];Aa(f)&&(t.config=Object.assign({},t.config,a[u[l]]));break}i.defaultConfig&&Object.keys(i.defaultConfig).map(function(p){typeof t.config[p]=="undefined"&&(t.config[p]=i.defaultConfig[p])}),t.root?typeof t.root=="string"&&(t.root=r[t.root]):t.root=r.root,t.index=t.config.index||0;try{o[s.toLowerCase()]&&(this.unRegister(e,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var h=new i(t);return o[s.toLowerCase()]=h,o[s.toLowerCase()].func=i,h&&typeof h.afterCreate=="function"&&h.afterCreate(),h}catch(p){throw console.error(p),p}}},unRegister:function(r,i){r._pluginInfoId&&(r=r._pluginInfoId),i=i.toLowerCase();try{var t=this.pluginGroup[r]._plugins[i];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[r]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(r,"] error"),e)}},deletePlugin:function(r,i){var t=r._pluginInfoId;if(t&&this.pluginGroup&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins){var e=this.pluginGroup[t]._plugins;delete e[i]}},getPlugins:function(r){var i=r._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(r,i){var t=r._pluginInfoId;if(!this.pluginGroup||!t)return null;var e=i.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(r){var i=this;function t(e){return!e||!e.then?new Promise(function(o){o()}):e}return new Promise(function(e){if(!!i.pluginGroup){var o;return r._loadingPlugins&&r._loadingPlugins.length?o=Promise.all(r._loadingPlugins):o=Promise.resolve(),o.then(function(){var a=r._pluginInfoId;if(!i.pluginGroup[a]){e();return}for(var s=i.pluginGroup[a]._plugins,u=[],l=0,f=Object.keys(s);l<f.length;l++){var h=f[l];if(s[h]&&s[h].beforePlayerInit)try{var p=s[h].beforePlayerInit();u.push(t(p))}catch(g){throw u.push(t(null)),g}}Promise.all([].concat(u)).then(function(){e()}).catch(function(g){console.error(g),e()})})}})},afterInit:function(r){var i=r._pluginInfoId;if(!(!this.pluginGroup||!i))for(var t=this.pluginGroup[i]._plugins,e=0,o=Object.keys(t);e<o.length;e++){var a=o[e];t[a]&&t[a].afterPlayerInit&&t[a].afterPlayerInit()}},setLang:function(r,i){var t=i._pluginInfoId;if(!(!this.pluginGroup||!t)){var e=this.pluginGroup[t]._plugins;Object.keys(e).map(function(o){if(e[o].updateLang)e[o].updateLang(r);else try{e[o].lang=r}catch(a){console.warn("".concat(o," setLang"))}})}},reRender:function(r){var i=r._pluginInfoId;if(!!i){for(var t={},e=this.pluginGroup[i]._plugins,o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];t[s]={plugin:e[s].func,options:e[s]._args},this.unRegister(i,s)}for(var u=0,l=Object.keys(t);u<l.length;u++){var f=l[u];this.register(i,f,t[f].plugin,t[f].options)}}},onPluginsReady:function(r){var i=r._pluginInfoId,t=this.pluginGroup[i]._plugins;!i||!t||Object.keys(t).map(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})},setCurrentUserActive:function(r,i){if(!(!this.pluginGroup||!this.pluginGroup[r])){if(!i)return this.pluginGroup[r]._player.isUserActive=i,r;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var o=this.pluginGroup[t[e]];if(o&&o._player){this.pluginGroup[t[e]]._player.isUserActive=!1;break}}return this.pluginGroup[r]._player.isUserActive=i,r}},getCurrentUseActiveId:function(){if(!!this.pluginGroup){for(var r=Object.keys(this.pluginGroup),i=0;i<r.length;i++){var t=this.pluginGroup[r[i]];if(t&&t._player&&t._player.isUserActive)return r[i]}return null}},destroy:function(r){var i=r._pluginInfoId;if(!!this.pluginGroup[i]){Ia(r.root);for(var t=this.pluginGroup[i]._plugins,e=0,o=Object.keys(t);e<o.length;e++){var a=o[e];this.unRegister(i,a)}var s=r.isUseActive;if(delete this.pluginGroup[i],delete r._pluginInfoId,s){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}};const C=La,d={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function $a(){return{id:"",el:null,url:"",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function cn(n){return Fa(n)||Ma(n)||Na(n)||Da()}function Da(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Na(n,r){if(!!n){if(typeof n=="string")return Cn(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cn(n,r)}}function Ma(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Fa(n){if(Array.isArray(n))return Cn(n)}function Cn(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}var Ba=function(r,i){var t,e,o,a;i.preset&&i.options?a=new i.preset(i.options,r.config):a=new i({},r.config);var s=a,u=s.plugins,l=u===void 0?[]:u,f=s.ignores,h=f===void 0?[]:f,p=s.icons,g=p===void 0?{}:p,v=s.i18n,m=v===void 0?[]:v;r.config.plugins||(r.config.plugins=[]),r.config.ignores||(r.config.ignores=[]),(t=r.config.plugins).push.apply(t,cn(l)),(e=r.config.ignores).push.apply(e,cn(h)),Object.keys(g).map(function(_){r.config.icons[_]||(r.config.icons[_]=g[_])}),(o=r.config.i18n).push.apply(o,cn(m))};function Fe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fe=function(i){return typeof i}:Fe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Fe(n)}function ja(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Hr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ha(n,r,i){return r&&Hr(n.prototype,r),i&&Hr(n,i),n}function Be(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?Be=Reflect.get:Be=function(e,o,a){var s=Ua(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},Be(n,r,i||n)}function Ua(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=ge(n),n!==null););return n}function za(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&En(n,r)}function En(n,r){return En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},En(n,r)}function Va(n){var r=Wa();return function(){var t=ge(n),e;if(r){var o=ge(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ga(this,e)}}function Ga(n,r){return r&&(Fe(r)==="object"||typeof r=="function")?r:_e(n)}function _e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function ge(n){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ge(n)}function Ur(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Ka=function(n){za(i,n);var r=Va(i);function i(){var t;ja(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Ur(_e(t),"onMouseEnter",function(s){var u=_e(t),l=u.player;l.userTimer&&(c.clearTimeout(l,l.userTimer),clearTimeout(l.userTimer))}),Ur(_e(t),"onMouseLeave",function(){var s=_e(t),u=s.player,l=s.playerConfig,f=l.closeControlsBlur?200:l.inactive;u.focus({delay:f})}),t}return Ha(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.controls=="boolean"&&(e.config.disable=!e.player.config.controls),!e.config.mode&&b.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,o=this.config,a=o.disable,s=o.height,u=o.mode,l=o.autoHide;if(!a){u==="flex"&&this.player.addClass(d.FLEX_CONTROLS),l&&this.player.addClass(d.AUTOHIDE);var f={height:"".concat(s,"px")};Object.keys(f).map(function(h){e.root.style[h]=f[h]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Pt,function(h){h?c.addClass(e.root,"mini-controls"):c.removeClass(e.root,"mini-controls")}),b.device!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&c.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){c.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(!!this.root){var s=e.defaultConfig||{};if(!o.root){var u=o.position?o.position:o.config&&o.config.position?o.config.position:s.position;switch(u){case S.CONTROLS_LEFT:o.root=this.left;break;case S.CONTROLS_RIGHT:o.root=this.right;break;case S.CONTROLS_CENTER:o.root=this.center;break;case S.CONTROLS:o.root=this.root;break;default:o.root=this.left}return Be(ge(i.prototype),"registerPlugin",this).call(this,e,o,a)}}}},{key:"destroy",value:function(){b.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,o=e.mode,a=e.autoHide,s=e.initShow,u=e.disable;if(!u){var l=c.classNames({"xgplayer-controls":!0},{"flex-controls":o==="flex"},{"bottom-controls":o==="bottom"},{control_autohide:a},{controls_permanent:!a},{"xgplayer-controls-initshow":s||!a});return'<xg-controls class="'.concat(l,`" unselectable="on" onselectstart="return false">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(w);const Ya=Ka,Xa={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}};var L={},ao={},xn=[],je={};function so(){Object.keys(L.en).map(function(n){ao[n]=n.toLowerCase()})}function uo(n){var r=[];c.typeOf(n)!=="Array"?r=Object.keys(n).map(function(i){var t=i==="zh"?"zh-cn":i;return{LANG:t,TEXT:n[i]}}):r=n,r.map(function(i){L[i.LANG]?c.deepMerge(L[i.LANG]||{},i.TEXT||{}):je[i.LANG]=i.TEXT}),so()}function lo(n){var r=n.LANG,i=n.TEXT||{};L[r]||xn.push(r),L[r]?c.deepMerge(i,L[r]):L[r]=i,je[r]&&(uo([{LANG:r,TEXT:je[r]}]),delete je[r]),r==="zh-cn"&&(L.zh=L["zh-cn"]),so()}lo(Xa);var qa={get textKeys(){return ao},get langKeys(){return xn},get lang(){var n={};return xn.map(function(r){n[r]=L[r]}),n.zh=L["zh-cn"],n},extend:uo,use:lo};const te=qa;function He(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?He=function(i){return typeof i}:He=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},He(n)}function zr(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function fn(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?zr(Object(i),!0).forEach(function(t){kr(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):zr(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Za(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Vr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ja(n,r,i){return r&&Vr(n.prototype,r),i&&Vr(n,i),n}function M(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get:M=function(e,o,a){var s=Qa(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},M(n,r,i||n)}function Qa(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=A(n),n!==null););return n}function es(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Rn(n,r)}function Rn(n,r){return Rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Rn(n,r)}function ts(n){var r=ns();return function(){var t=A(n),e;if(r){var o=A(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return co(this,e)}}function co(n,r){return r&&(He(r)==="object"||typeof r=="function")?r:be(n)}function be(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function A(n){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},A(n)}function kr(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var rs=["play","pause","replay","retry"],Or=function(n){es(i,n);var r=ts(i);function i(t){var e;Za(this,i);var o=c.deepMerge($a(),t);e=r.call(this,o),io(be(e),rs),e.config=o,wo(be(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var s=e.config.presets.indexOf("default");s>=0&&a&&(e.config.presets[s]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.isReady=!1,e.isPlaying=!1,e.isSeeking=!1,e.isCanplay=!1,e._runPending=!1,e.rotateDeg=0,e.isActive=!1,e.isCssfullScreen=!1,e.fullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.topBar=null,e.root=null,b.os.isAndroid&&b.osVersion>0&&b.osVersion<6&&(e.config.autoplay=!1),e.database=new oa,e.isUserActive=!1;var u=e._initDOM();if(!u)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),co(e);e._bindEvents(),e._registerPresets(),e._registerPlugins(),C.onPluginsReady(be(e)),c.setTimeout(be(e),function(){e.emit(_r),e.onReady&&e.onReady(),e.isReady=!0},0);var l=e.config,f=l.definition,h=l.url;return!h&&f&&f.list&&f.list.length>0&&f.defaultDefinition&&f.list.map(function(p){p.definition===f.defaultDefinition&&(e.config.url=p.url,e.curDefinition=p.definition)}),(e.config.videoInit||e.config.autoplay)&&(e.hasStart||e.start()),e}return Ja(i,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var o=this.config.el;if(o&&o.nodeType===1)this.root=o;else return this.emit(tn,new yr("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var a=C.checkPlayerRoot(this.root);a&&(P.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),a.destroy()),this._initBaseDoms();var s=this.constructor.XgVideoProxy;if(s&&this.videoConfig.mediaType===s.mediaType){var u=this.innerContainer||this.root;this.detachVideoEvents(this.video);var l=new s(u,this.config,this.videoConfig);this.attachVideoEvents(l),this.video=l}if(this.config.controls){var f=C.register(this,Ya);this.controls=f}var h=this.config.isMobileSimulateMode?"mobile":b.device;if(this.addClass("".concat(d.DEFAULT," ").concat(d.ACTIVE," xgplayer-").concat(h," ").concat(this.config.controls?"":d.NO_CONTROLS)),this.config.autoplay?this.addClass(d.ENTER):this.addClass(d.NO_START),this.config.fluid){var p={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(this.config.height*100/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(p).map(function(g){e.root.style[g]=p[g]})}else["width","height"].map(function(g){e.config[g]&&(typeof e.config[g]!="number"?e.root.style[g]=e.config[g]:e.root.style[g]="".concat(e.config[g],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=c.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=c.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=c.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=c.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(a){e.on(a,e["on"+a.charAt(0).toUpperCase()+a.slice(1)])});var o=function(){e.fullscreen=!1,e._fullScreenOffset=null};this.onFullscreenChange=function(a,s){var u=c.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(kn,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,fullscreen:e.fullscreen}),s||u&&(u===e._fullscreenEl||u.tagName==="VIDEO"))c.setTimeout(e,function(){e.getVideoSize()},100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,u,d.FULLSCREEN),e.emit(Y,!0,e._fullScreenOffset),e.isCssfullScreen&&e.exitCssFullscreen();else if(e.fullscreen){c.setTimeout(e,function(){e.getVideoSize()},100);var l=e._fullScreenOffset,f=e.config;if(f.needFullscreenScroll)try{window.scrollTo(l.left,l.top),c.setTimeout(e,function(){o()},50)}catch(h){P.logError(h),o()}else!e.config.closeFocusVideoFocus&&e.video.focus(),o();e.isCssfullScreen?e.removeClass(d.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,d.FULLSCREEN),e._fullscreenEl=null,e.emit(Y,!1)}},Ir.forEach(function(a){document&&document.addEventListener(a,e.onFullscreenChange)}),this.__webkitbeginfullscreen=function(a){e._fullscreenEl=e.video,e.onFullscreenChange(a,!0)},this.__webkitendfullscreen=function(a){e.onFullscreenChange(a,!1)},b.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once("play",this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Ir.forEach(function(o){document.removeEventListener(o,e.onFullscreenChange)}),this.playFunc&&this.off("play",this.playFunc),this.canPlayFunc&&this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var o=this;if(!!this.video&&!((!e||e===""||c.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(Zi),P.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this.canPlayFunc=function(){if(!!o.config){var u=o.config,l=u.autoplay,f=u.startTime,h=u.defaultPlaybackRate;P.logInfo("player","canPlayFunc",f),f&&(o.currentTime=f>o.duration?o.duration:f,o.config.startTime=0),h!==1&&(o.playbackRate=h),l&&o.videoPlay(),o.off(F,o.canPlayFunc),o.removeClass(d.ENTER)}},this._detachSourceEvents(this.video),c.typeOf(e)==="Array"?this._attachSourceEvents(this.video,e):this.video.src=e,c.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc);var a=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!a.contains(this.video)&&a.insertBefore(this.video,a.firstChild);var s=this.video.readyState;P.logInfo("_startInit readyState",s),this.config.autoplay&&(!(/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src))&&this.load(),(b.os.isIpad||b.os.isPhone)&&this.videoPlay()),s>=2?this.canPlayFunc():this.once(F,this.canPlayFunc),c.setTimeout(this,function(){o.emit(rn)},1),this.hasStart||C.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var o=this.config.ignores||[],a=this.config.plugins||[],s=this.config.i18n||[];s.map(function(l){te.use(l)});var u=o.join("||").toLowerCase().split("||");a.map(function(l){try{var f=l.plugin?l.plugin.pluginName:l.pluginName;if(f&&u.indexOf(f.toLowerCase())>-1)return null;if(l.lazy&&l.loader){var h=C.lazyRegister(e,l);l.forceBeforeInit&&(h.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}).catch(function(p){P.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}),e._loadingPlugins.push(h));return}return e.registerPlugin(l)}catch(p){return P.logError("_registerPlugins:",p),null}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(o){Ba(e,o)})}},{key:"registerPlugin",value:function(e,o){var a=null,s=null;e.plugin&&typeof e.plugin=="function"?(a=e.plugin,s=e.options):(a=e,s={}),o&&(s.config=o);for(var u=Object.keys(this.config),l=0;l<u.length;l++)if(a.pluginName.toLowerCase()===u[l].toLowerCase()){var f=this.config[u[l]];c.typeOf(f)==="Object"&&(f.root&&(s.root=f.root),f.position&&(s.position=f.position));break}var h=s.position?s.position:s.config&&s.config.position||a.defaultConfig&&a.defaultConfig.position,p=w.POSITIONS;if(!s.root&&typeof h=="string"&&h.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(a,s,a.pluginName);if(!s.root)switch(h){case p.ROOT_RIGHT:s.root=this.rightBar;break;case p.ROOT_LEFT:s.root=this.leftBar;break;case p.ROOT_TOP:s.root=this.topBar;break;default:s.root=this.innerContainer||this.root;break}return C.register(this,a,s)}},{key:"deregister",value:function(e){typeof e=="string"?C.unRegister(this,e):e instanceof Ae&&C.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return C.getPlugins(this)}},{key:"getPlugin",value:function(e){var o=C.findPlugin(this,e);return o&&o.pluginName?o:null}},{key:"addClass",value:function(e){!this.root||c.hasClass(this.root,e)||c.addClass(this.root,e)}},{key:"removeClass",value:function(e){!this.root||c.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(!!this.root)return c.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,o){!this.root||this.root.setAttribute(e,o)}},{key:"removeAttribute",value:function(e,o){!this.root||this.root.removeAttribute(e,o)}},{key:"start",value:function(e){var o=this;if(!this.hasStart)return this.hasStart=!0,C.beforeInit(this).then(function(){if(!!o.config){e||(e=o.url||o.config.url);var a=o._startInit(e);return a}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",P.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(e,o){this.src=e}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(!this.hasStart){this.removeClass(d.NO_START),this.addClass(d.ENTER);var o=this.start();o&&o.then(function(s){!e.config.autoplay&&e.videoPlay()});return}this.isPlaying||(this.removeClass(d.NO_START),!this.isCanplay&&this.addClass(d.ENTER));var a=M(A(i.prototype),"play",this).call(this);return a!==void 0&&a&&a.then?a.then(function(){e.removeClass(d.NOT_ALLOW_AUTOPLAY),e.addClass(d.PLAYING),e.isPlaying||(P.logInfo(">>>>playPromise.then"),e.isPlaying=!0,e.emit(pe))}).catch(function(s){if(P.logWarn(">>>>playPromise.catch",s.name),e.video&&e.video.error){e.onError(),e.removeClass(d.ENTER);return}s.name==="NotAllowedError"&&(e._errorTimer=c.setTimeout(e,function(){e._errorTimer=null,e.emit(br),e.addClass(d.NOT_ALLOW_AUTOPLAY),e.removeClass(d.ENTER),e.pause()},0))}):(P.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(d.NOT_ALLOW_AUTOPLAY),this.removeClass(d.NO_START),this.removeClass(d.ENTER),this.addClass(d.PLAYING),this.emit(pe))),a}},{key:"videoPause",value:function(){M(A(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(d.PAUSED),ce(this,"play",function(){e.videoPlay()})}},{key:"pause",value:function(){var e=this;ce(this,"pause",function(){M(A(i.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,o){var a=this;if(!(!this.video||isNaN(Number(e)))){var s=this.config,u=s.isSeekedPlay,l=s.seekedStatus,f=o||(u?"play":l);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(F,function(){switch(a.removeClass(d.ENTER),a.isSeeking=!1,f){case"play":a.play();break;case"pause":a.pause();break;default:!a.paused&&a.play()}}),this.isPlaying?this.currentTime=e:(this.removeClass(d.NO_START),this.addClass(d.ENTER),this.currentTime=e,f==="play"&&this.play())}}},{key:"changeDefinition",value:function(e,o){var a=this;this.emit(Pr,{from:o,to:e});var s=this.currentTime,u=this.paused;if(this.curDefinition=e.definition,!this.hasStart){this.config.url=e.url;return}this.switchURL?this.switchURL(e.url):this.src=e.url;var l=function(){a.currentTime=s,u&&a.once("canplay",function(){a.pause()}),a.emit(Qi,{from:o,to:e})};b.os.isAndroid?this.once("timeupdate",function(){l()}):this.once("canplay",function(){l()}),this.play()}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var e=this,o=d.NOT_ALLOW_AUTOPLAY,a=d.PLAYING,s=d.NO_START,u=d.PAUSED,l=d.REPLAY,f=d.ENTER,h=d.ENDED,p=d.ERROR,g=d.LOADING,v=[o,a,s,u,l,f,h,p,g];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,v.forEach(function(m){e.removeClass(m)}),this.addClass(d.ENTER),this.emit(Re)}},{key:"destroy",value:function(){var e=this,o=this.innerContainer,a=this.root,s=this.video;if(!(!a||!s)){if(this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),c.clearAllTimers(this),this.emit(wr),C.destroy(this),oo(this),M(A(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(h){}if(o)for(var u=o.children,l=0;l<u.length;l++)o.removeChild(u[l]);!o&&a.contains(s)&&a.removeChild(s),["topBar","leftBar","rightBar","innerContainer"].map(function(h){e[h]&&a.removeChild(e[h]),e[h]=null});var f=a.className.split(" ");f.length>0?a.className=f.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):a.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map(function(h){e[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(d.ENDED),this.currentTime=0,this.isSeeking=!1,ce(this,"replay",function(){e.once(F,function(){var o=e.videoPlay();o&&o.catch&&o.catch(function(a){console.log(a)})}),e.play(),e.emit(Ji),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(d.ERROR),this.addClass(d.LOADING),ce(this,"retry",function(){var o=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=o),e.once(F,function(){e.videoPlay()})})}},{key:"changeFullStyle",value:function(e,o,a,s){!e||(s||(s=d.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=c.filterStyleFromText(e)),c.addClass(e,a),o&&o!==e&&!this._orgPCss&&(this._orgPCss=c.filterStyleFromText(o),c.addClass(o,s)))}},{key:"recoverFullStyle",value:function(e,o,a,s){s||(s=d.PARENT_FULLSCREEN),this._orgCss&&(c.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),c.removeClass(e,a),o&&o!==e&&this._orgPCss&&(c.setStyleFromCsstext(o,this._orgPCss),this._orgPCss="",c.removeClass(o,s))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,o=this.root,a=this.video;e||(e=o),this._fullScreenOffset={top:c.scrollTop(),left:c.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var s=c.getFullScreenEl();if(s===this._fullscreenEl){this.onFullscreenChange();return}try{for(var u=0;u<Ar.length;u++){var l=Ar[u];if(e[l]){var f=l==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[l]();return f&&f.then?f:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(h){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(!(!this._fullscreenEl||!c.getFullScreenEl())){this.root;var o=this.video;this._fullActionFrom="exit";for(var a=0;a<Lr.length;a++){var s=Lr[a];if(document[s]){var u=document[s]();return u&&u.then?u:Promise.resolve()}}return o&&o.webkitSupportsFullscreen?(o.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=e,this.changeFullStyle(this.root,e,e?d.INNER_FULLSCREEN:d.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(wt,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?d.INNER_FULLSCREEN:d.CSS_FULLSCREEN;this.fullscreen?this.removeClass(e):this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(wt,!1)}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(mr,fn({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(qi,fn({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(d.ACTIVE),this.userTimer&&c.clearTimeout(this,this.userTimer),o.autoHide!==!1){var a=o&&o.delay?o.delay:this.config.inactive;this.userTimer=c.setTimeout(this,function(){e.blur()},a)}}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!!this.isActive){var o=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignorePaused||o||!this.paused&&!this.ended)&&this.addClass(d.ACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(d.ENTER),this.removeClass(d.LOADING),this.isCanplay=!0,this.waitTimer&&c.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){this.removeClass(d.PAUSED),this.ended&&this.removeClass(d.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(d.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&c.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(d.ENDED)}},{key:"onError",value:function(){this.updateAcc("error"),this.removeClass(d.NOT_ALLOW_AUTOPLAY),this.removeClass(d.NO_START),this.removeClass(d.ENTER),this.removeClass(d.LOADING),this.addClass(d.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(d.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&c.clearTimeout(this,this.waitTimer),this.removeClass(d.LOADING),this.removeClass(d.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&c.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=c.setTimeout(this,function(){e.addClass(d.LOADING),c.clearTimeout(e,e.waitTimer),e.waitTimer=null},200)}},{key:"onPlaying",value:function(){var e=this,o=d.NO_START,a=d.PAUSED,s=d.ENDED,u=d.ERROR,l=d.REPLAY,f=d.LOADING,h=[o,a,s,u,l,f];h.forEach(function(p){e.removeClass(p)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass(d.LOADING))&&this.video.readyState>2&&(this.removeClass(d.LOADING),c.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){c.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!this.video||!o||!e)){var s=c.typeOf(e)==="String"?e:e.type||"";o==="switch_play_pause"&&(c.typeOf(a.paused)==="Undefined"&&(a.paused=this.paused),a.isFirstStart=!this.playing),this.emit(kn,fn({eventType:s,action:o,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var o=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=o,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var o=this.video.buffered;if(!o||o.length===0||!this.duration)return!0;for(var a=e||this.video.currentTime||.2,s=o.length,u=0;u<s;u++)if(o.start(u)<=a&&o.end(u)>a)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.video||!e||!e.h)){var o=1/e.h,a=o!==1?"scale(".concat(o,")"):"",s=0,u=0;e.y&&(u=(100-e.h*100)/2-e.y*100),e.w&&e.x&&(s=(100-e.w*100)/2-e.x*100),a+=" translate(".concat(s,"%, ").concat(u,"%)"),this.video.style.transform=a,this.video.style.webkitTransform=a}}},{key:"setConfig",value:function(e){var o=this;!e||Object.keys(e).map(function(a){o.config[a]=e[a]})}},{key:"playNext",value:function(e){this.resetState(),this.isPlaying=!1,this.setConfig(e),this.play()}},{key:"getVideoSize",value:function(){var e=this;if(!!this.video){var o=this.video,a=o.videoWidth,s=o.videoHeight,u=this.config,l=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover")&&this.setAttribute("data-xgfill",f),!(!s||!a)){this._videoHeight=s,this._videoWidth=a;var h=this.root.getBoundingClientRect(),p=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,g=h.width,v=h.height-p,m=parseInt(a/s*1e3,10),_=parseInt(g/v*1e3,10),T=g,O=v,k={};l==="auto"&&_>m||l==="fixWidth"?(O=g/m*1e3,this.config.fluid?k.paddingTop="".concat(O*100/T,"%"):k.height="".concat(O+p,"px")):(l==="auto"&&_<m||l==="fixHeight")&&(T=m*v/1e3,k.width="".concat(T,"px")),!this.fullscreen&&!this.isCssfullScreen&&Object.keys(k).map(function($){e.root.style[$]=k[$]}),(f==="fillHeight"&&_<m||f==="fillWidth"&&_>m)&&this.setAttribute("data-xgfill","cover");var Q={videoScale:m,vWidth:T,vHeight:O,cWidth:T,cHeight:O+p};this.emit(Ce,Q)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.video.updateObjectPosition){this.video.updateObjectPosition(e,o);return}this.video.style.objectPosition="".concat(e*100,"% ").concat(o*100,"%")}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var o=this,a=this.config.definition;a.list=e,this.emit("resourceReady",e);var s=null,u=null;e.map(function(l){o.curDefinition===l.definition&&(s=l),a.defaultDefinition===l.definition&&(u=l)}),!u&&e.length>0&&(u=e[0]),s?this.changeDefinition(s):u&&this.changeDefinition(u)}},{key:"lang",get:function(){return this.config.lang},set:function(e){var o=te.langKeys.filter(function(a){return a===e});if(o.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(te.langKeys.join(),"] "));return}this.config.lang=e,C.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return te.lang[e]||te.lang.en}},{key:"i18nKeys",get:function(){return te.textKeys||{}}},{key:"version",get:function(){return bn}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=M(A(i.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=M(A(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=M(A(i.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,o){return kt.call.apply(kt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,o){return Ot.call.apply(Ot,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,o,a){for(var s=arguments.length,u=new Array(s>3?s-3:0),l=3;l<s;l++)u[l-3]=arguments[l];return $r.call.apply($r,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,o){typeof o=="boolean"&&o!==this.muted&&(this.addInnerOP("volumechange"),this.muted=o),C.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return P.config.debug},set:function(e){P.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return C.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,o){C.setCurrentUserActive(e,o)}},{key:"install",value:function(e,o){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=o)}},{key:"use",value:function(e,o){i.plugins||(i.plugins={}),i.plugins[e]=o}}]),i}(ta);kr(Or,"defaultPreset",null);kr(Or,"XgVideoProxy",null);function Ue(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ue=function(i){return typeof i}:Ue=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ue(n)}function Gr(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function is(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Gr(Object(i),!0).forEach(function(t){N(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Gr(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function os(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Wr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function as(n,r,i){return r&&Wr(n.prototype,r),i&&Wr(n,i),n}function ss(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&In(n,r)}function In(n,r){return In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},In(n,r)}function us(n){var r=cs();return function(){var t=St(n),e;if(r){var o=St(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ls(this,e)}}function ls(n,r){return r&&(Ue(r)==="object"||typeof r=="function")?r:x(n)}function x(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function St(n){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},St(n)}function N(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function D(){return new Date().getTime()}var fs=function(n){ss(i,n);var r=us(i);function i(){var t;os(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),N(x(t),"_onTimeupdate",function(){P.logInfo("[xgLogger]Events._onTimeupdate"),t._state.isTimeUpdate=!0,t._sendFirstFrame()}),N(x(t),"_onAutoplayStart",function(){P.logInfo("[xgLogger]Events._onAutoplayStart"),t._state.autoplayStart=!0,t._sendFirstFrame()}),N(x(t),"_onReset",function(){t.vt=0,t.pt=0,t.fvt=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t._isWaiting=!1,t._waitTimer&&c.clearTimeout(x(t),t._waitTimer),t._waittTimer&&c.clearTimeout(x(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),N(x(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=D(),t.emitLog("seekStart",{start:D()}))}),N(x(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),N(x(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=D(),t._waitType=1,t.emitLog("waitingStart",{start:t.waitingStart,type:1,endType:"loadstart"}))}),N(x(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t._waitTimer=c.setTimeout(x(t),function(){t._isWaiting&&(t.waitingStart=D(),c.clearTimeout(x(t),t._waitTimer),t._waitTimer=null,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t._startWaitTimeout(),t.emitLog("waitingStart",{start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),N(x(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),N(x(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return as(i,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(Xi,function(){var o=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,P.logInfo("[xgLogger]Events.LOAD_START",o),e.pt=D(),e.vt=0,e.fvt=0,e.off(pe,e._onAutoplayStart),e.off(V,e._onTimeupdate),e._onWaitingLoadStart(),o?e.once(V,e._onTimeupdate):e.once(pe,e._onAutoplayStart)}),this.on(Te,function(){e.vt=D(),e.fvt=e.vt-e.pt,P.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")}),this.on(Gi,this._onSeeking),this.on(Se,this._onSeeked),this.on(wr,function(){e.endState("destroy")}),this.on(Ie,function(){e.endState("urlChange"),e._onReset()}),this.on([Vi,F],this._onPlaying),this.on(vr,this._onWaiting),this.on(tn,this._onError),this.on(Re,function(){e.endState("emptied"),e._onReset()})}},{key:"_sendFirstFrame",value:function(){this.s=D(),this.vt>0&&this._state.isFFLoading&&(P.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&c.clearTimeout(this,this._waittTimer),this._waittTimer=c.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),c.clearTimeout(e,e._waittTimer),e._waittTimer=null},3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(!!this.seekingStart){var o=D(),a=o-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:o,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(c.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(c.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var o=D(),a=o-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:a,type:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,o){var a=this.player;this.emit(ro,is({t:D(),host:c.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},o))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),i}(w);function ze(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ze=function(i){return typeof i}:ze=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ze(n)}function hs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Kr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ps(n,r,i){return r&&Kr(n.prototype,r),i&&Kr(n,i),n}function gs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&An(n,r)}function An(n,r){return An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},An(n,r)}function ds(n){var r=ms();return function(){var t=Tt(n),e;if(r){var o=Tt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ys(this,e)}}function ys(n,r){return r&&(ze(r)==="object"||typeof r=="function")?r:vs(n)}function vs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ms(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Tt(n){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tt(n)}var _s='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>',bs=function(n){gs(i,n);var r=ds(i);function i(){return hs(this,i),r.apply(this,arguments)}return ps(i,[{key:"registerIcons",value:function(){return{replay:_s}}},{key:"afterCreate",value:function(){var e=this;w.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind("svg",["click","touchend"],this.__handleReplay),this.bind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay),this.on(Ee,function(){if(e.playerConfig.loop||c.addClass(e.player.root,"replay"),!e.config.disable){e.show();var o=e.root.querySelector("path");if(o){var a=window.getComputedStyle(o).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;o.setAttribute("transform",a)}}}),this.on(ie,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),c.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind("svg",["click","touchend"],this.__handleReplay),this.unbind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(w);const ws=bs;function Ve(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ve=function(i){return typeof i}:Ve=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ve(n)}function Ps(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Yr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ks(n,r,i){return r&&Yr(n.prototype,r),i&&Yr(n,i),n}function Os(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Ln(n,r)}function Ln(n,r){return Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ln(n,r)}function Ss(n){var r=Es();return function(){var t=Ct(n),e;if(r){var o=Ct(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ts(this,e)}}function Ts(n,r){return r&&(Ve(r)==="object"||typeof r=="function")?r:Cs(n)}function Cs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ct(n){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ct(n)}var xs=function(n){Os(i,n);var r=Ss(i);function i(){return Ps(this,i),r.apply(this,arguments)}return ks(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){c.addClass(this.root,"hide")}},{key:"show",value:function(){c.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Ee,function(){e.isEndedShow&&c.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(V,function(){e.onTimeUpdate()}),this.on(Ie,function(){c.removeClass(e.root,"hide"),c.addClass(e.root,"xg-showplay"),e.once(V,function(){e.onTimeUpdate()})})):this.on(ie,function(){c.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?c.removeClass(this.root,"xg-showplay"):this.once(V,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){!e||(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,o=e.poster,a=e.hideCanplay,s=o?"background-image:url(".concat(o,");"):"";return'<xg-poster class="xgplayer-poster '.concat(a?"xg-showplay":"",'" style="').concat(s,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),i}(w);const Rs=xs;function Ge(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ge=function(i){return typeof i}:Ge=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ge(n)}function Is(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Xr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function As(n,r,i){return r&&Xr(n.prototype,r),i&&Xr(n,i),n}function Ls(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&$n(n,r)}function $n(n,r){return $n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$n(n,r)}function $s(n){var r=Ms();return function(){var t=Et(n),e;if(r){var o=Et(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ds(this,e)}}function Ds(n,r){return r&&(Ge(r)==="object"||typeof r=="function")?r:Ns(n)}function Ns(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ms(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Et(n){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Et(n)}var Fs='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',Bs='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',z={};function js(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};z[n]&&window.clearTimeout(z[n].id),z[n]={},i.start&&i.start(),z[n].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(z[n].id),delete z[n]},r)}function Hs(){Object.keys(z).map(function(n){window.clearTimeout(z[n].id),delete z[n]})}var Us=function(n){Ls(i,n);var r=$s(i);function i(t){var e;return Is(this,i),e=r.call(this,t),e.autoPlayStart=!1,e}return As(i,[{key:"afterCreate",value:function(){var e=this,o=this.player,a=this.playerConfig;this.initIcons(),this.once(_r,function(){a&&(a.lang&&a.lang==="en"?c.addClass(o.root,"lang-is-en"):a.lang==="jp"&&c.addClass(o.root,"lang-is-jp"))}),this.on(pe,function(){var s=e.config.mode==="auto"?"auto-hide":"hide";c.addClass(e.root,s),e.autoPlayStart=!0,e.onPlayPause("play")}),a.autoplay||this.show(),this.on(br,function(){var s=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),c.removeClass(e.root,s),e.show()}),this.on(ie,function(){e.onPlayPause("play")}),this.on(xe,function(){e.onPlayPause("pause")}),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(u){u.cancelable&&u.preventDefault(),u.stopPropagation(),e.emitUserAction(u,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:Fs,class:"xg-icon-play"},startPause:{icon:Bs,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){c.addClass(this.root,"hide")}},{key:"show",value:function(){c.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){c.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){c.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var o=this;js("pauseplay",400,{start:function(){c.addClass(o.root,"interact"),o.show(),o.switchStatus(!0)},end:function(){c.removeClass(o.root,"interact"),!e&&o.hide()}})}},{key:"switchPausePlay",value:function(e){var o=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!!o.isReady){var a=this.player.paused;!a&&o.isPlaying?o.pause():o.play()}}},{key:"onPlayPause",value:function(e){var o=this.config,a=this.player;if(!(!a.isPlaying||!this.autoPlayStart)){if(o.mode==="show"){this.switchStatus(),this.show();return}if(o.mode==="auto"){this.switchStatus();return}if(o.isShowPause&&a.paused&&!a.ended||o.isShowEnd&&a.ended){this.switchStatus(),this.show();return}if(o.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Hs()}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(w);const zs=Us;function We(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?We=function(i){return typeof i}:We=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},We(n)}function Vs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function qr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Gs(n,r,i){return r&&qr(n.prototype,r),i&&qr(n,i),n}function Ws(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Dn(n,r)}function Dn(n,r){return Dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Dn(n,r)}function Ks(n){var r=qs();return function(){var t=xt(n),e;if(r){var o=xt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ys(this,e)}}function Ys(n,r){return r&&(We(r)==="object"||typeof r=="function")?r:Xs(n)}function Xs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function xt(n){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},xt(n)}var Zs=function(n){Ws(i,n);var r=Ks(i);function i(){return Vs(this,i),r.apply(this,arguments)}return Gs(i,[{key:"render",value:function(){var e=this.config.innerHtml,o=c.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)o.appendChild(e);else if(e&&typeof e=="string")o.innerHTML=e;else{for(var a="",s=1;s<=12;s++)a+='<div class="xgplayer-enter-bar'.concat(s,'"></div>');o.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return o}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(w);const Js=Zs;function Ke(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ke=function(i){return typeof i}:Ke=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ke(n)}function Qs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Zr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function eu(n,r,i){return r&&Zr(n.prototype,r),i&&Zr(n,i),n}function tu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Nn(n,r)}function Nn(n,r){return Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Nn(n,r)}function nu(n){var r=ou();return function(){var t=Rt(n),e;if(r){var o=Rt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ru(this,e)}}function ru(n,r){return r&&(Ke(r)==="object"||typeof r=="function")?r:iu(n)}function iu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ou(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Rt(n){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Rt(n)}var au=function(n){tu(i,n);var r=nu(i);function i(){return Qs(this,i),r.apply(this,arguments)}return eu(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:10}}}]),i}(w);const Jr=au;function su(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Qr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function uu(n,r,i){return r&&Qr(n.prototype,r),i&&Qr(n,i),n}function lu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Mn(n,r)}function Mn(n,r){return Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mn(n,r)}function cu(n){var r=hu();return function(){var t=It(n),e;if(r){var o=It(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return fo(this,e)}}function fo(n,r){return r&&(we(r)==="object"||typeof r=="function")?r:fu(n)}function fu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function It(n){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},It(n)}function we(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?we=function(i){return typeof i}:we=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},we(n)}function ei(n){var r=parseFloat(n),i=n.indexOf("%")===-1&&!isNaN(r);return i&&r}var Sr=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],ho=Sr.length;function pu(){for(var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},r=0;r<ho;r++){var i=Sr[r];n[i]=0}return n}function gu(n){var r=window.getComputedStyle(n);return r}function ti(n){if(typeof n=="string"&&(n=document.querySelector(n)),!(!n||we(n)!=="object"||!n.nodeType)){var r=gu(n);if(r.display==="none")return pu();var i={};i.width=n.offsetWidth,i.height=n.offsetHeight;for(var t=i.isBorderBox=r.boxSizing==="border-box",e=0;e<ho;e++){var o=Sr[e],a=r[o],s=parseFloat(a);i[o]=isNaN(s)?0:s}var u=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,f=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,p=i.borderLeftWidth+i.borderRightWidth,g=i.borderTopWidth+i.borderBottomWidth,v=t,m=ei(r.width);m!==!1&&(i.width=m+(v?0:u+p));var _=ei(r.height);return _!==!1&&(i.height=_+(v?0:l+g)),i.innerWidth=i.width-(u+p),i.innerHeight=i.height-(l+g),i.outerWidth=i.width+f,i.outerHeight=i.height+h,i}}function hn(n,r){for(var i=0;i<n.length;i++){var t=n[i];if(t.identifier===r)return t}}var pn={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},ni={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},du=function(n){lu(i,n);var r=cu(i);function i(t){var e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return su(this,i),e=r.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=o.handle instanceof Element?o.handle:document.querySelector(o.handle),!e._root||!e._handlerDom?fo(e):(e._bindStartEvent(),e)}return uu(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),ni[this._startKey].map(function(o){e["on".concat(o)]=e["on".concat(o)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var o=this;if(!!e){var a=ni[this._startKey];a.map(function(s){window.addEventListener(s,o["on".concat(s)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;!this._boundPointerEvents||(this._boundPointerEvents.map(function(o){window.removeEventListener(o,e["on".concat(o)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;!this.isDragging||(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var o=e.changedTouches[0];this.dragStart(e,o),this.touchIdentifier=o.pointerId!==void 0?o.pointerId:o.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var o=hn(e.changedTouches,this.touchIdentifier);o&&this.dragMove(e,o)}},{key:"ontouchend",value:function(e){var o=hn(e.changedTouches,this.touchIdentifier);o&&this.dragEnd(e,o),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var o=hn(e.changedTouches,this.touchIdentifier);o&&this.dragCancel(e,o)}},{key:"dragStart",value:function(e,o){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=o,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=ti(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,o){this.isDragging=!0,this.animate(),this.emit(pn.START,this.startPos)}},{key:"dragEnd",value:function(e,o){!this._root||(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(pn.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,o){var a={x:o.pageX-this.downPoint.pageX,y:o.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,o),a}},{key:"dragMove",value:function(e,o){if(e=e||window.event,!!this.isDown){var a=this.startPos,s=a.x,u=a.y,l=this._dragPointerMove(e,o),f=l.x,h=l.y;f=this.checkContain("x",f,s),h=this.checkContain("y",h,u),this.position.x=s+f,this.position.y=u+h,this.dragPoint.x=f,this.dragPoint.y=h,this.emit(pn.MOVE,this.position)}}},{key:"dragCancel",value:function(e,o){this.dragEnd(e,o)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,o,a){return o+a<0?0-a:e==="x"&&o+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&o+a>this.startPos.maxY?this.startPos.maxY-a:o}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),o=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=isNaN(o)?0:o,this.position.y=isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var o=e.transform;if(o.indexOf("matrix")===0){var a=o.split(","),s=o.indexOf("matrix3d")===0?12:4,u=parseInt(a[s],10),l=parseInt(a[s+1],10);this.position.x+=u,this.position.y+=l}}},{key:"_getPositionCoord",value:function(e,o){if(e.indexOf("%")!==-1){var a=ti(this._root.parentNode);return a?parseFloat(e)/100*a[o]:0}return parseInt(e,10)}}]),i}(Ui);function Ye(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ye=function(i){return typeof i}:Ye=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ye(n)}function yu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ri(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function vu(n,r,i){return r&&ri(n.prototype,r),i&&ri(n,i),n}function mu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Fn(n,r)}function Fn(n,r){return Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fn(n,r)}function _u(n){var r=wu();return function(){var t=At(n),e;if(r){var o=At(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return bu(this,e)}}function bu(n,r){return r&&(Ye(r)==="object"||typeof r=="function")?r:le(n)}function le(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function At(n){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},At(n)}function gn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Pu='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',ku='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',Ou=function(n){mu(i,n);var r=_u(i);function i(t){var e;yu(this,i),e=r.call(this,t),gn(le(e),"onCancelClick",function(s){e.exitMini(),e.isClose=!0}),gn(le(e),"onCenterClick",function(s){var u=le(e),l=u.player;l.paused?l.play():l.pause()}),gn(le(e),"onScroll",function(s){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var u=parseInt(c.getCss(e.player.root,"height"));u+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>u+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=u&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var o=le(e),a=o.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return vu(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(xe,function(){e.setAttr("data-state","pause")}),this.on(ie,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,o=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var s={config:{onClick:function(){e.getMini()}}};o.controls.registerPlugin(Jr,s,Jr.pluginName)}var u=c.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",u,this.onCancelClick),this.bind(".play-icon",u,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new du(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Pu,class:"xg-icon-play"},pause:{icon:ku,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;this.lastStyle={},c.addClass(o.root,"xgplayer-mini"),["width","height","top","left"].map(function(u){e.lastStyle[u]=s.style[u],s.style[u]="".concat(e.pos[u],"px")}),a.fluid&&(s.style["padding-top"]=""),this.emit(Pt,!0),o.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;c.removeClass(o.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(u){s.style[u]=e.lastStyle[u]}),this.lastStyle=null,a.fluid&&(o.root.style.width="100%",o.root.style.height="0",o.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(Pt,!1),this.isMini=o.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=c.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      <div lang-key="`.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,`</div>
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(w);function Xe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xe=function(i){return typeof i}:Xe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xe(n)}function Su(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ii(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Tu(n,r,i){return r&&ii(n.prototype,r),i&&ii(n,i),n}function Cu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Bn(n,r)}function Bn(n,r){return Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Bn(n,r)}function Eu(n){var r=Ru();return function(){var t=Lt(n),e;if(r){var o=Lt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return xu(this,e)}}function xu(n,r){return r&&(Xe(r)==="object"||typeof r=="function")?r:R(n)}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Lt(n){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lt(n)}function ye(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var $e={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},dn=["videoClick","videoDbClick"],yn=function(n){Cu(i,n);var r=Eu(i);function i(){var t;Su(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),ye(R(t),"onMouseMove",function(s){var u=R(t),l=u.player,f=u.playerConfig;l.isActive||(l.focus({autoHide:!f.closeDelayBlur}),!f.closeFocusVideoFocus&&l.video.focus())}),ye(R(t),"onMouseEnter",function(s){var u=R(t),l=u.playerConfig,f=u.player;!l.closeFocusVideoFocus&&f.video.focus(),l.closeDelayBlur?f.focus({autoHide:!1}):f.focus()}),ye(R(t),"onMouseLeave",function(s){var u=t.playerConfig,l=u.closePlayerBlur,f=u.leavePlayerTime;l||(f?t.player.focus({autoHide:!0,delay:f}):t.player.blur())}),ye(R(t),"onVideoClick",function(s){var u=R(t),l=u.player,f=u.playerConfig;s.target&&f.closeVideoClick||(s.target===l.video||s.target===l.innerContainer||s.target===l.video.__canvas)&&(s.preventDefault(),f.closeVideoStopPropagation||s.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){!t._clickCount||(t._clickCount--,ce(R(t),dn[0],function(h,p){t.switchPlayPause(p.e)},{e:s,paused:l.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),ye(R(t),"onVideoDblClick",function(s){var u=R(t),l=u.player,f=u.playerConfig;if(!(!s.target||s.target!==l.video&&s.target!==l.video.__canvas||f.closeVideoDblclick)){if(t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),s.preventDefault(),s.stopPropagation(),ce(R(t),dn[1],function(h,p){t.emitUserAction(p.e,"switch_fullscreen",{fullscreen:l.fullscreen}),l.fullscreen?l.exitFullscreen():l.getFullscreen()},{e:s,fullscreen:l.fullscreen})}}),t}return Tu(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,dn.map(function(u){e.__hooks[u]=null});var o=this.playerConfig,a=o.enableContextmenu,s=o.isMobileSimulateMode;s||b.device==="mobile"&&!b.os.isIpad||(this.config.disableContextmenu=!a,this.initEvents())}},{key:"initEvents",value:function(){var e=this,o=this.player,a=o.video,s=o.root;a.addEventListener("click",this.onVideoClick,!1),a.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys($e).map(function(u){s.addEventListener(u,e[$e[u]],!1)}),this.config.disableContextmenu&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var o=this.player;this.emitUserAction(e,"switch_play_pause"),o.ended?o.duration!==1/0&&o.duration>0&&o.replay():o.paused?o.play():o.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,o=this.player,a=o.video,s=o.root;this.clickTimer&&clearTimeout(this.clickTimer),s.removeEventListener("click",this.onVideoClick,!1),a.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys($e).map(function(u){s.removeEventListener(u,e[$e[u]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),i}(Ae);function Iu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function oi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Au(n,r,i){return r&&oi(n.prototype,r),i&&oi(n,i),n}var K={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Lu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},$u={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ai(n){return n&&n.length>0?n[n.length-1]:null}function si(n){var r=navigator.userAgent;/(?:iPhone|iPad)/.test(r)&&n.cancelable&&n.preventDefault()}function Du(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var Nu=function(){function n(r){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};Iu(this,n),this._pos={moving:!1,start:!1,x:0,y:0},this.config=Du(),Object.keys(t).map(function(e){i.config[e]=t[e]}),this.root=r,this.events=t.eventType==="mouse"?$u:Lu,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return Au(n,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(K.PRESS,i),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(K.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(K.CLICK,i)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,t){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(t)}},{key:"off",value:function(i,t){if(!!this.__handlers[i]){for(var e=this.__handlers[i],o=-1,a=0;a<e.length;a++)if(e[a]===t){o=a;break}o>=0&&this.__handlers[i].splice(o,1)}}},{key:"trigger",value:function(i,t){!this.__handlers[i]||this.__handlers[i].map(function(e){try{e(t)}catch(o){console.error("trigger>>:".concat(i),o)}})}},{key:"onTouchStart",value:function(i){var t=this._pos,e=this.root,o=this.config;o.needPreventDefault&&si(i);var a=ai(i.touches);t.x=a?parseInt(a.pageX,10):i.pageX,t.y=a?parseInt(a.pageX,10):i.pageX,t.start=!0,this.__setPress(i),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(K.TOUCH_START,i)}},{key:"onTouchCancel",value:function(i){this.onTouchEnd(i)}},{key:"onTouchEnd",value:function(i){var t=this._pos,e=this.root,o=this.config;o.needPreventDefault&&si(i),this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),i.moving=t.moving,i.press=t.press,t.press&&this.trigger(K.PRESS_END,i),this.trigger(K.TOUCH_END,i),!t.press&&!t.moving&&this.__setDb(i),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(i){var t=this._pos,e=this.config,o=ai(i.touches),a=o?parseInt(o.pageX,10):i.pageX,s=o?parseInt(o.pageY,10):i.pageX,u=a-t.x,l=s-t.y;Math.abs(l)<e.miniStep&&Math.abs(u)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(K.PRESS_END,i),t.press=!1,t.moving=!0,this.trigger(K.TOUCH_MOVE,i))}},{key:"destroy",value:function(){var i=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){i.root.removeEventListener("touchend",i[t[e]])})}}]),n}();const Mu=Nu;function qe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(i){return typeof i}:qe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qe(n)}function Fu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ui(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Bu(n,r,i){return r&&ui(n.prototype,r),i&&ui(n,i),n}function ju(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&jn(n,r)}function jn(n,r){return jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jn(n,r)}function Hu(n){var r=zu();return function(){var t=$t(n),e;if(r){var o=$t(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Uu(this,e)}}function Uu(n,r){return r&&(qe(r)==="object"||typeof r=="function")?r:U(n)}function U(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function $t(n){return $t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$t(n)}function ve(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Vu='<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',oe={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Gu=function(n){ju(i,n);var r=Hu(i);function i(t){var e;return Fu(this,i),e=r.call(this,t),ve(U(e),"onTouchStart",function(o){var a=U(e),s=a.player,u=a.config,l=a.pos,f=a.playerConfig,h=e.getTouche(o);if(h&&!u.disableGesture&&e.duration>0&&!s.ended){l.isStart=!0,c.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),e.find(".xg-dur").innerHTML=c.format(e.duration);var p=e.root.getBoundingClientRect();s.rotateDeg===90?(l.top=p.left,l.left=p.top,l.width=p.height,l.height=p.width):(l.top=p.top,l.left=p.left,l.width=p.width,l.height=p.height);var g=parseInt(h.pageX-l.left,10),v=parseInt(h.pageY-l.top,10);l.x=s.rotateDeg===90?v:g,l.y=s.rotateDeg===90?g:v,l.scopeL=u.scopeL*l.width,l.scopeR=(1-u.scopeR)*l.width,l.scopeM1=l.width*(1-u.scopeM)/2,l.scopeM2=l.width-l.scopeM1}}),ve(U(e),"onTouchMove",function(o){var a=e.getTouche(o),s=U(e),u=s.pos,l=s.config,f=s.player;if(!(!a||l.disableGesture||!e.duration||!u.isStart)){var h=l.miniMoveStep,p=l.hideControlsActive,g=parseInt(a.pageX-u.left,10),v=parseInt(a.pageY-u.top,10),m=f.rotateDeg===90?v:g,_=f.rotateDeg===90?g:v;if(Math.abs(m-u.x)>h||Math.abs(_-u.y)>h){var T=m-u.x,O=_-u.y,k=u.scope;if(k===-1&&(k=e.checkScope(m,_,T,O,u),k===0&&(p?f.blur():f.focus({autoHide:!1}),!u.time&&(u.time=parseInt(f.currentTime*1e3,10)+e.timeOffset*1e3)),u.scope=k),k===-1||k>0&&!l.gestureY||k===0&&!l.gestureX)return;o.cancelable&&o.preventDefault(),e.executeMove(T,O,k,u.width,u.height),u.x=m,u.y=_}}}),ve(U(e),"onTouchEnd",function(o){var a=U(e),s=a.player,u=a.pos,l=a.playerConfig;!u.isStart||(u.scope>-1&&o.cancelable&&o.preventDefault(),e.endLastMove(u.scope),setTimeout(function(){s.getPlugin("progress")&&s.getPlugin("progress").resetSeekState()},10),u.scope=-1,e.resetPos(),c.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),e.changeAction(oe.AUTO))}),ve(U(e),"onRootTouchMove",function(o){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(o)&&(o.stopPropagation(),e.pos.isStart?e.onTouchMove(o):e.onTouchStart(o))}),ve(U(e),"onRootTouchEnd",function(o){if(e.pos.isStart&&e.checkIsRootTarget(o)){o.stopPropagation(),e.onTouchEnd(o);var a=e.player.controls;a&&a.recoverAutoHide()}}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return Bu(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Vu,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,o=this.playerConfig,a=this.config,s=this.player;o.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),c.isUndefined(o.disableGesture)||(a.disableGesture=!!o.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=c.createDom("xg-mask","",{},"xgmask"),s.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var u=b.device!=="mobile"?"mouse":"touch";this.touch=new Mu(this.root,{eventType:u,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),s.root.addEventListener("touchmove",this.onRootTouchMove,!0),s.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(nn,function(){var h=e.player,p=e.config;h.duration*1e3<p.moveDuration&&(p.moveDuration=h.duration*1e3)}),this.on([F,Ee],function(){var h=e.pos,p=h.time,g=h.isStart;!g&&p>0&&(e.pos.time=0)});var l={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(l).map(function(h){e.touch.on(h,function(p){e[l[h]](p)})}),!a.disableActive){var f=s.plugins.progress;f&&(f.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),f.addCallBack("dragend",function(){e.changeAction(oe.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,o=e.plugins.thumbnail;if(o&&o.usable){this.thumbnail=o.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},o=e.commonStyle,a=o.playedColor,s=o.progressColor;a&&(this.find(".xg-curbar").style.backgroundColor=a,this.find(".xg-cur").style.color=a),s&&(this.find(".xg-bar").style.backgroundColor=s,this.find(".time-preview").style.color=s),this.config.disableTimeProgress&&c.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(o){e.pos[o]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var o=this.player,a=this.root;a.setAttribute("data-xg-action",e);var s=o.plugins.start;s&&s.recover()}},{key:"getTouche",value:function(e){var o=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return o===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,o,a,s,u){var l=u.width,f=-1;if(e<0||e>l)return f;var h=Math.abs(s===0?a:a/s);return Math.abs(a)>0&&h>=1.73&&e>u.scopeM1&&e<u.scopeM2?f=0:(Math.abs(a)===0||h<=.57)&&(f=e<u.scopeL?1:e>u.scopeR?2:3),f}},{key:"executeMove",value:function(e,o,a,s,u){switch(a){case 0:this.updateTime(e/s*this.config.scopeM);break;case 1:this.updateBrightness(o/u);break;case 2:b.os.isIos||this.updateVolume(o/u);break}}},{key:"endLastMove",value:function(e){var o=this,a=this.pos,s=this.player,u=this.config,l=(a.time-this.timeOffset)/1e3;switch(e){case 0:s.seek(Number(l).toFixed(1)),u.hideControlsEnd?s.blur():s.focus(),this.timer=setTimeout(function(){o.pos.time=0},500);break}this.changeAction(oe.AUTO)}},{key:"checkIsRootTarget",value:function(e){var o=this.player.plugins||{};return o.progress&&o.progress.root.contains(e.target)?!1:o.start&&o.start.root.contains(e.target)||o.controls&&o.controls.root.contains(e.target)}},{key:"onClick",value:function(e){var o=this.player,a=this.config,s=this.playerConfig;if(!o.isPlaying){s.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),o.play());return}!a.closedbClick||s.closeVideoClick?o.isActive?o.blur():o.focus():s.closeVideoClick||((o.isActive||a.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),o.focus())}},{key:"onDbClick",value:function(e){var o=this.config,a=this.player;!o.closedbClick&&a.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onPress",value:function(e){var o=this.pos,a=this.config,s=this.player;a.disablePress||(o.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:s.playbackRate,to:a.pressRate}),s.playbackRate=a.pressRate,this.changeAction(oe.PLAYBACK))}},{key:"onPressEnd",value:function(e){var o=this.pos,a=this.config,s=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{from:s.playbackRate,to:o.rate}),s.playbackRate=o.rate,o.rate=1,this.changeAction(oe.AUTO))}},{key:"updateTime",value:function(e){var o=this.player,a=this.config,s=this.player.duration;e=Number(e.toFixed(4));var u=parseInt(e*a.moveDuration,10)+this.timeOffset;u+=this.pos.time,u=u<0?0:u>s*1e3?s*1e3-200:u,o.getPlugin("time")&&o.getPlugin("time").updateTime(u/1e3),o.getPlugin("progress")&&o.getPlugin("progress").updatePercent(u/1e3/this.duration,!0),this.activeSeekNote(u/1e3,e>0),a.isTouchingSeek&&o.seek(Number((u-this.timeOffset)/1e3).toFixed(1)),this.pos.time=u}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var o=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var s=parseInt(o.volume*10,10)-parseInt(a.volume/10,10);s=s>10?10:s<1?0:s,o.volume=s/10,a.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var o=this.pos,a=this.config,s=this.xgMask,u=o.light+.8*e;u=u>a.maxDarkness?a.maxDarkness:u<0?0:u,s&&(s.style.backgroundColor="rgba(0,0,0,".concat(u,")")),o.light=u}},{key:"activeSeekNote",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,s=this.config,u=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||u||s.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(oe.SEEKING);var l=a.plugins.start;l&&l.focusHide(),this.find(".xg-dur").innerHTML=c.format(this.duration),this.find(".xg-cur").innerHTML=c.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),o?c.removeClass(this.find(".xg-seek-show"),"xg-back"):c.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var o=this.player,a=o.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.hasStart)e.ended||(e.paused?e.play():e.pause());else return!1}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(w);const Wu=Gu;function Ze(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ze=function(i){return typeof i}:Ze=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ze(n)}function li(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Ku(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?li(Object(i),!0).forEach(function(t){zn(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):li(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Yu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ci(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Xu(n,r,i){return r&&ci(n.prototype,r),i&&ci(n,i),n}function qu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Hn(n,r)}function Hn(n,r){return Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Hn(n,r)}function Zu(n){var r=Qu();return function(){var t=Dt(n),e;if(r){var o=Dt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ju(this,e)}}function Ju(n,r){return r&&(Ze(r)==="object"||typeof r=="function")?r:Un(n)}function Un(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Dt(n){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Dt(n)}function zn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function fi(n){n.preventDefault(),n.returnValue=!1}function el(n){var r=n.tagName;return!!(r==="INPUT"||r==="TEXTAREA"||n.isContentEditable)}var tl=function(n){qu(i,n);var r=Zu(i);function i(){var t;Yu(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),zn(Un(t),"onBodyKeyDown",function(s){var u=s||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||u.metaKey||u.altKey||u.ctrlKey)){var l=u.keyCode;return(u.target===document.body||t.config.isGlobalTrigger&&!el(u.target))&&t.checkCode(l,!0)&&(fi(u),t.handleKeyCode(l,s)),!1}}),zn(Un(t),"onKeydown",function(s){var u=s||window.event;if(!(t.config.disable||t.config.disableRootTrigger||u.metaKey||u.altKey||u.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(u&&(u.keyCode===37||t.checkCode(u.keyCode))&&(u.target===t.player.root||u.target===t.player.video||u.target===t.player.controls.el))fi(u);else return!0;t.handleKeyCode(u.keyCode,s)}}),t}return Xu(i,[{key:"mergekeyCodeMap",value:function(){var e=this,o=this.config.keyCodeMap;o&&Object.keys(o).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","isBodyTarget"].map(function(s){o[a][s]&&(e.keyCodeMap[a][s]=o[a][s])}):e.keyCodeMap[a]=o[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),o=e.height,a=e.top,s=e.bottom,u=window.innerHeight;return!(a<0&&a<0-o*.9||s>0&&s-u>o*.9)}},{key:"checkCode",value:function(e,o){var a=this,s=!1;return Object.keys(this.keyCodeMap).map(function(u){a.keyCodeMap[u]&&e===a.keyCodeMap[u].keyCode&&!a.keyCodeMap[u].disable&&(s=!o||o&&!a.keyCodeMap[u].noBodyTarget)}),s}},{key:"downVolume",value:function(e){var o=this.player,a=parseFloat((o.volume-.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a>=0?o.volume=a:o.volume=0}},{key:"upVolume",value:function(e){var o=this.player,a=parseFloat((o.volume+.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a<=1?o.volume=a:o.volume=1}},{key:"seek",value:function(e){var o=this.player,a=o.currentTime,s=o.duration,u=a;a+this.seekStep<=s?u=a+this.seekStep:u=s-1;var l={currentTime:{from:a,to:u}};this.emitUserAction(e,"seek",{props:l}),this.player.currentTime=u}},{key:"seekBack",value:function(e){var o=this.player.currentTime,a=0;o-this.seekStep>=0&&(a=o-this.seekStep);var s={currentTime:{from:o,to:a}};this.emitUserAction(e,"seek",{props:s}),this.player.currentTime=a}},{key:"playPause",value:function(e){var o=this.player;!o||(this.emitUserAction(e,"switch_play_pause"),o.paused?o.play():o.pause())}},{key:"exitFullscreen",value:function(e){var o=this.player,a=o.isCssfullScreen,s=o.fullscreen;s&&(o.exitFullscreen(),this.emitUserAction("keyup","switch_fullscreen",{fullscreen:s})),a&&(o.exitCssFullscreen(),this.emitUserAction("keyup","switch_css_fullscreen",{cssfullscreen:a}))}},{key:"handleKeyCode",value:function(e,o){var a=this;Object.keys(this.keyCodeMap).map(function(s){var u=a.keyCodeMap[s],l=u.action,f=u.keyCode,h=u.disable;f===e&&!h&&(typeof l=="function"?l(o,a.player):typeof l=="string"&&typeof a[l]=="function"&&a[l](o,a.player),a.emit(no,Ku({key:s,target:o.target},a.keyCodeMap[s])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),i}(Ae);const hi=tl;function Je(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Je=function(i){return typeof i}:Je=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Je(n)}function nl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function pi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function rl(n,r,i){return r&&pi(n.prototype,r),i&&pi(n,i),n}function il(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Vn(n,r)}function Vn(n,r){return Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vn(n,r)}function ol(n){var r=ul();return function(){var t=Nt(n),e;if(r){var o=Nt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return al(this,e)}}function al(n,r){return r&&(Je(r)==="object"||typeof r=="function")?r:sl(n)}function sl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ul(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Nt(n){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nt(n)}var ll='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110"><path d="M100 50A50 50 0 1150 0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"/></svg>',cl=function(n){il(i,n);var r=ol(i);function i(){return nl(this,i),r.apply(this,arguments)}return rl(i,[{key:"registerIcons",value:function(){return{loadingIcon:ll}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:S.ROOT}}}]),i}(w);const fl=cl;function hl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function gi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function pl(n,r,i){return r&&gi(n.prototype,r),i&&gi(n,i),n}var gl=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],dl=function(){function n(r){hl(this,n),this.fragments=r.fragments||[],this.focusClass="inner-focus",this.style=r.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return pl(n,[{key:"updateDuration",value:function(i){var t=this;this.duration=parseInt(i*1e3);var e=0,o=this.fragments;this.fragments=o.map(function(a){return a.start=e,a.end=e+a.percent*t.duration,a.duration=a.percent*t.duration,e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,o=this.fragments,a=t.newIndex,s=t.curIndex,u=t.millisecond;a!==s&&e.map(function(h,p){p<a?h[i].style.width="100%":p>a&&(h[i].style.width=0)});var l=o[a],f=u===0?0:(u-l.start)/l.duration;e[a][i].style.width=f<0?0:"".concat(f*100,"%")}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(t)}var e=this.playedIndex,o=this.cachedIndex;if(c.typeOf(i.played)!=="Undefined"){var a=this.findIndex(i.played*1e3,e);this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=a}if(c.typeOf(i.cached)!=="Undefined"){var s=this.findIndex(i.cached*1e3,o);this.updateProgress("cached",{newIndex:s,curIndex:o,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=s}}},{key:"findIndex",value:function(i,t){var e=this.fragments;return e.length===1?0:(i>e[t].start&&i<e[t].end||this.fragments.map(function(o,a){i>o.start&&i<=o.end&&(t=a)}),t)}},{key:"findHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)if(c.hasClass(i[t],this.focusClass))return{dom:i[t],pos:i[t].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var t=this.root.children;return i<0||i>=t.length?null:{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)c.removeClass(i[t],this.focusClass)}},{key:"setHightLight",value:function(i){var t=this.root.children;if(i<t.length)return c.addClass(t[i],this.focusClass),{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var i=this,t=this.style.progressColor;return this.root=c.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map(function(e){var o=c.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(e.percent):"flex: ".concat(e.percent)},"".concat(e.isFocus?"inner-focus":""," xgplayer-progress-inner"));return i.root.appendChild(o),gl.map(function(a){o.appendChild(c.createDom(a.tag,"",{style:a.styleKey?"background: ".concat(i.style[a.styleKey],"; width:0;"):"width:0;"},a.className))}),{cached:o.children[0],played:o.children[1]}})),this.root}}]),n}();function Pe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pe=function(i){return typeof i}:Pe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Pe(n)}function yl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function di(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function vl(n,r,i){return r&&di(n.prototype,r),i&&di(n,i),n}function ml(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Gn(n,r)}function Gn(n,r){return Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gn(n,r)}function _l(n){var r=wl();return function(){var t=Mt(n),e;if(r){var o=Mt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return bl(this,e)}}function bl(n,r){return r&&(Pe(r)==="object"||typeof r=="function")?r:E(n)}function E(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Mt(n){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Mt(n)}function ee(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Pl=function(n){ml(i,n);var r=_l(i);function i(t){var e;return yl(this,i),e=r.call(this,t),ee(E(e),"onMoveOnly",function(o){var a=E(e),s=a.pos,u=a.config,l=a.player;c.event(o);var f=c.getEventPos(o,l.zoom),h=l.rotateDeg===90?f.clientY:f.clientX;if(!(s.moving&&Math.abs(s.x-h)<u.miniMoveStep)){s.moving=!0,s.x=h;var p=e.computeTime(o);e.triggerCallbacks("dragmove",p)}}),ee(E(e),"onBodyClick",function(o){o.preventDefault(),o.stopPropagation()}),ee(E(e),"onMouseDown",function(o){var a=E(e),s=a.player,u=a.pos,l=a.config,f=a.playerConfig,h=c.getEventPos(o,s.zoom),p=s.rotateDeg===90?h.clientY:h.clientX;if(!(s.isMini||l.closeMoveSeek||!f.allowSeekAfterEnded&&s.ended)){o.stopPropagation(),o.preventDefault(),e.focus(),c.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),c.checkIsFunction(l.onMoveStart)&&l.onMoveStart(),c.event(o),u.x=p,u.isDown=!0,u.moving=!1,s.focus({autoHide:!1}),e.isProgressMoving=!0,c.addClass(e.progressBtn,"active");var g=e.computeTime(o);return e._state.time=g.currentTime,e.updateWidth(g.currentTime,g.percent,0),e.isMobile?(e.bind("touchmove",e.onMouseMove),e.bind("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1),s.root.addEventListener("click",e.onBodyClick,!1)),!0}}),ee(E(e),"onMouseUp",function(o){var a=E(e),s=a.player,u=a.config,l=a.pos,f=a.playerConfig,h=a._state;o.stopPropagation(),o.preventDefault(),c.checkIsFunction(f.enableSwipeHandler)&&f.enableSwipeHandler(),c.checkIsFunction(u.onMoveEnd)&&u.onMoveEnd(),c.event(o),c.removeClass(e.progressBtn,"active");var p=e.computeTime(o);l.moving?(e.updateWidth(p.currentTime,p.percent,2),e.triggerCallbacks("dragend",p)):e.triggerCallbacks("click",p),l.moving=!1,l.isDown=!1,l.x=0,l.y=0,h.time=0,e.isMobile?(e.unbind("touchmove",e.onMouseMove),e.unbind("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),s.root.removeEventListener("click",e.onBodyClick,!1),l.isEnter?!f.isMobileSimulateMode&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(o)),c.setTimeout(E(e),function(){e.resetSeekState()},10),s.focus()}),ee(E(e),"onMouseMove",function(o){var a=E(e),s=a.pos,u=a.player,l=a.config,f=a._state;e.isMobile&&(o.stopPropagation(),o.preventDefault()),c.event(o);var h=c.getEventPos(o,u.zoom),p=u.rotateDeg===90?h.clientY:h.clientX,g=Math.abs(s.x-p);if(!(s.moving&&g<l.miniMoveStep||!s.moving&&g<l.miniStartStep)){s.x=p;var v=e.computeTime(o);f.time<v.currentTime?v.forward=!0:v.forward=!1,f.time=v.currentTime,s.isDown&&!s.moving&&(s.moving=!0,l.isPauseMoving&&u.pause(),e.triggerCallbacks("dragstart",v)),e.updateWidth(v.currentTime,v.percent,1),e.triggerCallbacks("dragmove",v)}}),ee(E(e),"onMouseEnter",function(o){var a=E(e),s=a.player,u=a.pos;u.isDown||u.isEnter||s.isMini||!s.config.allowSeekAfterEnded&&s.ended||(u.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),e.focus())}),ee(E(e),"onMouseLeave",function(o){var a=E(e),s=a.player,u=a.pos;if(u.isEnter=!1,!s.isMini){if(e.unbind("mousemove",e.onMoveOnly),u.isDown){e.unbind("mouseleave",e.onMouseLeave);return}e.blur()}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0},e}return vl(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"beforeCreate",value:function(e){typeof e.player.config.progress=="boolean"&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e=this;this.innerList=new dl({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(o){e[o]=e.innerList[o].bind(e.innerList)})}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),b.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(V,function(){e.onTimeupdate()}),this.on(Se,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Yi,function(){e.onCacheUpdate()}),this.on(Ee,function(){e.onCacheUpdate(),e._state.now=0}),this.on(Re,function(){e.onReset()}),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},o=e.commonStyle,a=o.sliderBtnStyle,s=this.progressBtn;a&&(typeof a=="string"?s.style.boxShadow=a:Pe(a)==="object"&&Object.keys(a).map(function(u){s.style[u]=a[u]}))}},{key:"triggerCallbacks",value:function(e,o){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(a){if(a&&a.handler&&a.type===e)try{a.handler(o)}catch(s){console.error("[XGPLAYER][triggerCallbacks] ".concat(a," error"),s)}})}},{key:"addCallBack",value:function(e,o){o&&typeof o=="function"&&this.__dragCallBacks.push({type:e,handler:o})}},{key:"removeCallBack",value:function(e,o){var a=this.__dragCallBacks,s=-1;a.map(function(u,l){u&&u.type===e&&u.handler===o&&(s=l)}),s>-1&&a.splice(s,1)}},{key:"bindDomEvents",value:function(){var e=this.player,o=e.controls,a=e.config;this.isMobile?(this.bind("touchstart",this.onMouseDown),o&&(o.root&&o.root.addEventListener("touchmove",c.stopPropagation),o.center&&o.center.addEventListener("touchend",c.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!a.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),c.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),c.removeClass(this.root,"active")}},{key:"updateWidth",value:function(e,o,a){var s=this.config,u=this.player;if(!(s.isCloseClickSeek&&a===0)){var l=e>u.duration?u.duration-.2:Number(e).toFixed(1);this.updatePercent(o),this.updateTime(e),!(a===1&&(!s.isDragingSeek||u.videoConfig.mediaType==="audio"))&&(this._state.now=l,this._state.direc=l>u.currentTime?0:1,u.seek(l))}}},{key:"computeTime",value:function(e){var o=this.player,a=this.root.getBoundingClientRect(),s=a.width,u=a.height,l=a.top,f=a.left,h=c.getEventPos(e,o.zoom),p,g,v;o.rotateDeg===90?(p=u,g=l,v=h.clientY):(p=s,g=f,v=h.clientX);var m=v-g;m=m>p?p:m<0?0:m;var _=m/p;_=_<0?0:_>1?1:_;var T=parseInt(_*this.duration*1e3,10)/1e3;return{percent:_,currentTime:T,offset:m,width:p,left:g,e}}},{key:"updateTime",value:function(e){var o=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var s=o.plugins.time;s&&s.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,o){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,o=this._state,a=this.duration;if(!(e.isSeeking||this.isProgressMoving||!e.hasStart)){if(o.now>-1){var s=parseInt(o.now*1e3,10)-parseInt(e.currentTime*1e3,10);if(o.direc===0&&s>300||o.direc===1&&s>-300){o.now=-1;return}else o.now=-1}var u=this.timeOffset+e.currentTime;this.innerList.update({played:u},a),this.progressBtn.style.left="".concat(u/a*100,"%");var l=this.player.plugins.miniprogress;l&&l.update({played:u},a)}}},{key:"onCacheUpdate",value:function(){var e=this.player,o=this.duration,a=e.bufferedPoint;this.innerList.update({cached:a.end},o);var s=this.player.plugins.miniprogress;s&&s.update({cached:a.end},o)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,o=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.isMobile?(this.unbind("touchstart",this.onMouseDown),this.unbind("touchmove",this.onMouseMove),this.unbind("touchend",this.onMouseUp),o&&(o.root&&o.root.removeEventListener("touchmove",c.stopPropagation),o.center&&o.center.removeEventListener("touchend",c.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",o=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(o,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),i}(w);const kl=Pl;function Qe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qe=function(i){return typeof i}:Qe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qe(n)}function Ol(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function yi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Sl(n,r,i){return r&&yi(n.prototype,r),i&&yi(n,i),n}function Tl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Wn(n,r)}function Wn(n,r){return Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Wn(n,r)}function Cl(n){var r=Rl();return function(){var t=Ft(n),e;if(r){var o=Ft(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return El(this,e)}}function El(n,r){return r&&(Qe(r)==="object"||typeof r=="function")?r:xl(n)}function xl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ft(n){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ft(n)}var Il='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',Al='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',Ll=function(n){Tl(i,n);var r=Cl(i);function i(){return Ol(this,i),r.apply(this,arguments)}return Sl(i,[{key:"afterCreate",value:function(){var e=this,o=this.player,a=this.config;a.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(xe,function(){e.animate(o.paused)}),this.on(ie,function(){e.animate(o.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Il,class:"xg-icon-play"},pause:{icon:Al,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var o=this.player;return this.emitUserAction(e,"switch_play_pause"),o.ended?o.replay():o.paused?(o.play(),this.animate(!1)):(o.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var o=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),o.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),o.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(w);const $l=Ll;function et(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?et=function(i){return typeof i}:et=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},et(n)}function Dl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function vi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Nl(n,r,i){return r&&vi(n.prototype,r),i&&vi(n,i),n}function Ml(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Kn(n,r)}function Kn(n,r){return Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Kn(n,r)}function Fl(n){var r=Hl();return function(){var t=Bt(n),e;if(r){var o=Bt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Bl(this,e)}}function Bl(n,r){return r&&(et(r)==="object"||typeof r=="function")?r:jl(n)}function jl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Hl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Bt(n){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bt(n)}var Ul='<svg width="32" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M11.237 14l6.382-6.381A.875.875 0 1016.38 6.38l-7 7a.875.875 0 000 1.238l7 7a.875.875 0 101.238-1.238L11.237 14z" fill="#FFF" fill-rule="evenodd"/></svg>',zl=function(n){Ml(i,n);var r=Fl(i);function i(){return Dl(this,i),r.apply(this,arguments)}return Nl(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(o){o.preventDefault(),o.stopPropagation(),e.config.onClick(o)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:Ul,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:S.ROOT_TOP,index:0}}}]),i}(w);function tt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(i){return typeof i}:tt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},tt(n)}function Vl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function mi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Gl(n,r,i){return r&&mi(n.prototype,r),i&&mi(n,i),n}function ke(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?ke=Reflect.get:ke=function(e,o,a){var s=Wl(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},ke(n,r,i||n)}function Wl(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=re(n),n!==null););return n}function Kl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Yn(n,r)}function Yn(n,r){return Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yn(n,r)}function Yl(n){var r=ql();return function(){var t=re(n),e;if(r){var o=re(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Xl(this,e)}}function Xl(n,r){return r&&(tt(r)==="object"||typeof r=="function")?r:po(n)}function po(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ql(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function re(n){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},re(n)}function Zl(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Jl='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M19.173 6.861h6.798v6.798h-2.694V9.555h-4.104V6.86zm4.104 16.416v-4.104h2.694v6.798h-6.798v-2.694h4.104zM6.861 13.66V6.86h6.798v2.694H9.555v4.104H6.86zm2.694 5.514v4.104h4.104v2.694H6.86v-6.798h2.694z"/></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M21.867 10.965h4.104v2.694h-6.798V6.86h2.694v4.104zm-2.694 15.006v-6.798h6.798v2.694h-4.104v4.104h-2.694zm-8.208-15.006V6.861h2.694v6.798H6.86v-2.694h4.104zM6.861 21.867v-2.694h6.798v6.798h-2.694v-4.104H6.861z"/></svg>',ec=function(n){Kl(i,n);var r=Yl(i);function i(){var t;Vl(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Zl(po(t),"_onOrientationChange",function(s){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.setRotateDeg(0):t.setRotateDeg(90))}),t}return Gl(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.fullscreen=="boolean"&&(e.config.disable=!e.player.config.fullscreen)}},{key:"afterCreate",value:function(){var e=this,o=this.config,a=this.playerConfig;if(!o.disable){o.target&&(this.playerConfig.fullscreenTarget=this.config.target);var s=c.getFullScreenEl();a.fullscreenTarget===s&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(l){e.emitUserAction(l,"switch_fullscreen",{fullscreen:e.player.fullscreen})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Y,function(u){e.changeLangTextKey(e.find(".xg-tips"),u?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(u),e.config.needBackIcon&&e.show()}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:zl,options:{config:{onClick:function(l){e.handleFullscreen(l)}}}})),b.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Jl,class:"xg-get-fullscreen"},exitFullscreen:{icon:Ql,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",b.device==="mobile"?"touchend":"click",this.handleFullscreen),b.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"setRotateDeg",value:function(e){var o=this.player;window.orientation===90||window.orientation===-90?o.rotateDeg=0:o.rotateDeg=e}},{key:"getRotateFullscreen",value:function(e){var o=this.player;o.isCssfullScreen&&o.exitCssFullscreen(e);var a=e?d.INNER_FULLSCREEN:d.ROTATE_FULLSCREEN;o._fullscreenEl=e||o.root,o.changeFullStyle(o.root,e,a,d.PARENT_ROTATE_FULLSCREEN),o.fullscreen=!0,this.setRotateDeg(90),this.emit(Y,!0)}},{key:"exitRotateFullscreen",value:function(e){var o=this.player;o.fullscreen=!1;var a=o._fullscreenEl!==o.root?d.INNER_FULLSCREEN:d.ROTATE_FULLSCREEN;o.recoverFullStyle(o.root,o._fullscreenEl,a,d.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(Y,!1)}},{key:"changeFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var o=this.player,a=this.config,s=!1;if((a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen())&&(s=!0),s)o.fullscreen?(o.fullscreen=!1,o.exitCssFullscreen(),this.emit(Y,!1)):(o.fullscreen=!0,o.getCssFullscreen(),this.emit(Y,!0)),this.animate(o.fullscreen);else if(a.rotateFullscreen)o.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(o.fullscreen);else{if(a.switchCallback&&typeof a.switchCallback=="function"){a.switchCallback(o.fullscreen);return}o.fullscreen?o.exitFullscreen():o.getFullscreen()}}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){ke(re(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){ke(re(i.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(w);function nt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(i){return typeof i}:nt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},nt(n)}function tc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function _i(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function nc(n,r,i){return r&&_i(n.prototype,r),i&&_i(n,i),n}function rt(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?rt=Reflect.get:rt=function(e,o,a){var s=rc(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},rt(n,r,i||n)}function rc(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=de(n),n!==null););return n}function ic(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Xn(n,r)}function Xn(n,r){return Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xn(n,r)}function oc(n){var r=uc();return function(){var t=de(n),e;if(r){var o=de(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ac(this,e)}}function ac(n,r){return r&&(nt(r)==="object"||typeof r=="function")?r:sc(n)}function sc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function de(n){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},de(n)}var lc=function(n){ic(i,n);var r=oc(i);function i(t){var e;return tc(this,i),e=r.call(this,t),e.isActiving=!1,e}return nc(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,o=this.player.controls.config.mode;this.mode=o==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(nn,function(){e.onTimeUpdate()}),this.on(V,function(){e.onTimeUpdate()}),this.on(Re,function(){e.onReset()}))}},{key:"show",value:function(){this.mode!=="flex"&&rt(de(i.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player,o=this.config;if(!(o.disable||this.isActiving||!e.hasStart)){var a=e.currentTime+this.timeOffset;this.mode==="flex"?(this.centerCurDom.innerHTML=c.format(a),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=c.format(this.duration))):(this.timeDom.innerHTML=c.format(a),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=c.format(this.duration)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=c.format(0),this.centerDurDom.innerHTML=c.format(0)):(this.timeDom.innerHTML=c.format(0),this.durationDom.innerHTML=c.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var o=e.controls.center;this.centerCurDom=c.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=c.createDom("xg-icon","00:00",{},"xgplayer-time right"),o.children.length>0?o.insertBefore(this.centerCurDom,o.children[0]):o.appendChild(this.centerCurDom),o.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(c.hide(this.durationDom),c.hide(this.timeDom),c.hide(this.find(".time-separator")),c.show(this.find(".time-live-tag"))):c.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(c.hide(this.durationDom),c.hide(this.timeDom),c.hide(this.find(".time-separator")),c.show(this.find(".time-live-tag"))):(c.hide(this.find(".time-live-tag")),c.show(this.find(".time-separator")),c.show(this.durationDom),c.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=c.format(e);return}this.timeDom.innerHTML=c.format(e)}}},{key:"resetActive",value:function(){var e=this,o=this.player,a=function(){e.isActiving=!1};this.off(Se,a),o.isSeeking?this.once(Se,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(w);const cc=lc;function it(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?it=function(i){return typeof i}:it=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},it(n)}function fc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function bi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function hc(n,r,i){return r&&bi(n.prototype,r),i&&bi(n,i),n}function pc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&qn(n,r)}function qn(n,r){return qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qn(n,r)}function gc(n){var r=yc();return function(){var t=jt(n),e;if(r){var o=jt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return dc(this,e)}}function dc(n,r){return r&&(it(r)==="object"||typeof r=="function")?r:I(n)}function I(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function jt(n){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jt(n)}function ae(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var vc='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.753 18.48l-1.593-1.592c1.437-1.429 2.326-3.407 2.326-5.592s-.89-4.163-2.326-5.591l1.593-1.593c1.845 1.835 2.987 4.376 2.987 7.184s-1.142 5.349-2.987 7.184zm-3.199-3.185L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',mc='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM17.554 15.295L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998zm0 0L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',_c='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.306 9.703l-2.394-2.406-1.604 1.604 2.417 2.395-2.406 2.395 1.604 1.604 2.383-2.418 2.395 2.406 1.604-1.604-2.417-2.383 2.406-2.395-1.604-1.604-2.384 2.418z"/></svg>',bc=function(n){pc(i,n);var r=gc(i);function i(){var t;fc(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),ae(I(t),"onBarMousedown",function(s){var u=I(t),l=u.player,f=t.find(".xgplayer-slider"),h=t.find(".xgplayer-bar");f.focus(),c.event(s);var p=h.getBoundingClientRect(),g=c.getEventPos(s,l.zoom),v=p.height-(g.clientY-p.top);if(g.h=v,g.barH=p.height,t.pos=g,!(v<-2))return t.updateVolumePos(v,s),document.addEventListener("mouseup",t.onBarMouseUp),t.isStart=!0,!1}),ae(I(t),"onBarMouseMove",function(s){if(!!t.isStart){var u=I(t),l=u.pos,f=u.player;s.preventDefault(),s.stopPropagation(),c.event(s);var h=c.getEventPos(s,f.zoom);t.isMoving=!0;var p=l.h-h.clientY+l.clientY;p>l.barH||t.updateVolumePos(p,s)}}),ae(I(t),"onBarMouseUp",function(s){c.event(s),document.removeEventListener("mouseup",t.onBarMouseUp),t.isStart=!1,t.isMoving=!1}),ae(I(t),"onMouseenter",function(s){t._timerId&&(c.clearTimeout(I(t),t._timerId),t._timerId=null),c.addClass(t.root,"slide-show")}),ae(I(t),"onMouseleave",function(s){t._timerId&&(c.clearTimeout(I(t),t._timerId),t._timerId=null),t._timerId=c.setTimeout(I(t),function(){c.removeClass(t.root,"slide-show"),t.isStart&&t.onBarMouseUp(s),t._timerId=null},200)}),ae(I(t),"onVolumeChange",function(s){if(!!t.player){var u=t.player,l=u.muted,f=u.volume;t.isMoving||(t.find(".xgplayer-drag").style.height=l||f===0?"4px":"".concat(f*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(l,f)}}),t}return hc(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:mc,class:"xg-volume-small"},volumeLarge:{icon:vc,class:"xg-volume"},volumeMuted:{icon:_c,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var o=this.playerConfig,a=o.commonStyle,s=o.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("muted_change",function(u){e.changeMuted(u)},{pre:function(l){l.preventDefault(),l.stopPropagation()}}),b.device!=="mobile"&&!this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Wi,this.onVolumeChange),this.once(Te,this.onVolumeChange),c.typeOf(s)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,o){var a=this.player,s=this.find(".xgplayer-drag"),u=this.find(".xgplayer-bar");if(!(!u||!s)){var l=parseInt(e/u.getBoundingClientRect().height*1e3,10);s.style.height="".concat(e,"px");var f=Math.max(Math.min(l/1e3,1),0),h={volume:{from:a.volume,to:f}};a.muted&&(h.muted={from:!0,to:!1}),this.emitUserAction(o,"change_volume",{muted:a.muted,volume:a.volume,props:h}),a.volume=Math.max(Math.min(l/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,o=e.volume,a=e.muted,s=this.find(".xgplayer-value-label"),u=Math.max(Math.min(o,1),0);s.innerText=a?0:Math.ceil(u*100)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var o=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:o.muted,volume:o.volume,props:{muted:{from:o.muted,to:!o.muted}}}),o.volume>0&&(o.muted=!o.muted),o.volume<.01&&(o.volume=this.config.miniVolume)}},{key:"animate",value:function(e,o){e||o===0?this.setAttr("data-state","mute"):o<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",b.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,o=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(o?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(w);const wc=bc;function ot(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ot=function(i){return typeof i}:ot=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ot(n)}function Pc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function wi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function kc(n,r,i){return r&&wi(n.prototype,r),i&&wi(n,i),n}function Oc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Zn(n,r)}function Zn(n,r){return Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zn(n,r)}function Sc(n){var r=Ec();return function(){var t=Ht(n),e;if(r){var o=Ht(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Tc(this,e)}}function Tc(n,r){return r&&(ot(r)==="object"||typeof r=="function")?r:Cc(n)}function Cc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ec(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ht(n){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ht(n)}var xc='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none"><g clip-path="url(#clip0)" fill="#fff"><path d="M17.5 13.75H6.25A3.75 3.75 0 002.5 17.5v6.25a3.75 3.75 0 003.75 3.75H17.5a3.75 3.75 0 003.75-3.75V17.5a3.75 3.75 0 00-3.75-3.75z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.822 6.094a1.247 1.247 0 00.156 1.79l4.509 4.204a1.25 1.25 0 101.705-1.828L9.93 8.152l4.799-.018.039-.001a10 10 0 019.521 13.983 1.25 1.25 0 002.292.998 12.5 12.5 0 00-11.88-17.48l-5.05.019 2.293-2.46a1.25 1.25 0 10-1.829-1.705L5.854 6.06l-.032.036z"/></g><defs><clipPath id="RotateSvg-clip0"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>',Rc=function(n){Oc(i,n);var r=Sc(i);function i(t){var e;return Pc(this,i),e=r.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return kc(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.rotate=="boolean"&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Ce,function(){e.rotateDeg&&c.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,o){var a=this.player;e||(e=0);var s=this.player,u=s.root,l=s.innerContainer,f=s.video,h=u.offsetWidth,p=l&&o?l.offsetHeight:u.offsetHeight,g="100%",v="100%",m=0,_=0;(e===.75||e===.25)&&(g="".concat(p,"px"),v="".concat(h,"px"),m=-(p-h)/2,_=-(h-p)/2);var T="translate(".concat(m,"px,").concat(_,"px) rotate(").concat(e,"turn)"),O={transformOrigin:"center center",transform:T,webKitTransform:T,height:v,width:g},k=o?f:u,Q=o?a.getPlugin("poster"):null;Object.keys(O).map(function($){k.style[$]=O[$],Q&&Q.root&&(Q.root.style[$]=O[$])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=this.player;this.rotateDeg||(this.rotateDeg=0);var u=e?1:-1;this.rotateDeg=(this.rotateDeg+1+u*.25*a)%1,this.updateRotateDeg(this.rotateDeg,o),s.emit(eo,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:xc}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.ROTATE_TIPS,`">
      `).concat(this.i18n.ROTATE_TIPS,`
      </div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(w);function at(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(i){return typeof i}:at=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},at(n)}function Ic(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Pi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ac(n,r,i){return r&&Pi(n.prototype,r),i&&Pi(n,i),n}function Lc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Jn(n,r)}function Jn(n,r){return Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jn(n,r)}function $c(n){var r=Nc();return function(){var t=Ut(n),e;if(r){var o=Ut(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Dc(this,e)}}function Dc(n,r){return r&&(at(r)==="object"||typeof r=="function")?r:go(n)}function go(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ut(n){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ut(n)}function Mc(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Fc='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/></svg>',Bc='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 7.7a.5.5 0 00.5-.5v-.7a.5.5 0 00-.5-.5h-4a.5.5 0 00-.5.5v3.96a.5.5 0 00.5.5h.7a.5.5 0 00.5-.5V8.83l2.07 2.109a.5.5 0 00.707.006l.5-.49a.5.5 0 00.006-.707L7.973 7.7H9.5z" fill="#fff"/></svg>',se={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},jc=function(n){Lc(i,n);var r=$c(i);function i(){var t;Ic(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Mc(go(t),"switchPIP",function(s){if(!t.isPIPAvailable())return!1;s.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(s,"change_pip",{from:"pip",to:"normal"}),t.setAttr("data-state","normal")):t.player.video.readyState===4&&(t.requestPIP(),t.emitUserAction(s,"change_pip",{from:"normal",to:"pip"}),t.setAttr("data-state","pip"))}),t}return Ac(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;!this.isPIPAvailable()||(this.pMode=se.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(rn,function(){e.config.showIcon&&(c.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:Fc,class:"xg-get-pip"},pipIconExit:{icon:Bc,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,o=this.player;this.leavePIPCallback=function(){var a=o.paused;c.setTimeout(e,function(){!a&&o.videoPlay()},0),!a&&o.videoPlay(),e.setAttr("data-state","normal"),o.emit(wn,!1)},this.enterPIPCallback=function(a){o.emit(wn,!0),e.pipWindow=a.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var s=o.video.webkitPresentationMode;e.pMode===se.FULLSCREEN&&s!==se.FULLSCREEN&&o.onFullscreenChange(null,!1),e.pMode=s,s===se.PIP?e.enterPIPCallback(a):s===se.INLINE&&e.leavePIPCallback(a)},o.video&&(o.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),o.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(o.video)&&o.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,o=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var a=o.poster;return a&&(e.video.poster=c.typeOf(a)==="String"?a:a.poster),i.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(s){return console.error("requestPiP",s),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(i.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(o){return console.error("exitPIP",o),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===se.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return document.pictureInPictureEnabled&&(c.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&c.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon&&this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),i}(w);const Hc=jc;function st(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?st=function(i){return typeof i}:st=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},st(n)}function Uc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ki(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function zc(n,r,i){return r&&ki(n.prototype,r),i&&ki(n,i),n}function Vc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Qn(n,r)}function Qn(n,r){return Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qn(n,r)}function Gc(n){var r=Kc();return function(){var t=zt(n),e;if(r){var o=zt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Wc(this,e)}}function Wc(n,r){return r&&(st(r)==="object"||typeof r=="function")?r:er(n)}function er(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function zt(n){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zt(n)}function Yc(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Xc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>',qc=function(n){Vc(i,n);var r=Gc(i);function i(t){var e;return Uc(this,i),e=r.call(this,t),Yc(er(e),"playNext",function(o){var a=er(e),s=a.player;o.preventDefault(),o.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,s.emit(Pn,e.idx+1),e.nextHandler(e.config.urlList[e.idx],e.idx)):(e.nextHandler(),s.emit(Pn))}),e.idx=-1,e}return zc(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Xc}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var e=b.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var o=this.player;!e||(o.pause(),o.currentTime=0,o.autoplay=!0,o.src=e)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">`.concat(this.i18n.PLAYNEXT_TIPS,`</div>
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(w);function ut(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ut=function(i){return typeof i}:ut=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ut(n)}function Zc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Oi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Jc(n,r,i){return r&&Oi(n.prototype,r),i&&Oi(n,i),n}function Qc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&tr(n,r)}function tr(n,r){return tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tr(n,r)}function ef(n){var r=nf();return function(){var t=Vt(n),e;if(r){var o=Vt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return tf(this,e)}}function tf(n,r){return r&&(ut(r)==="object"||typeof r=="function")?r:yo(n)}function yo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Vt(n){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vt(n)}function rf(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var of='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>',af=function(n){Qc(i,n);var r=ef(i);function i(t){var e;return Zc(this,i),e=r.call(this,t),rf(yo(e),"download",function(o){if(!e.isLock){e.emitUserAction(o,"download");var a=e.getAbsoluteURL(e.player.src);_o(a),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return Jc(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.download=="boolean"&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:of}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var o=document.createElement("div");o.innerHTML='<a href="'.concat(e,'">x</a>'),e=o.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   <div class="xg-tips" lang-key="`.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"downloadIcon"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(w);function lt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(i){return typeof i}:lt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lt(n)}function sf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Si(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function uf(n,r,i){return r&&Si(n.prototype,r),i&&Si(n,i),n}function lf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&nr(n,r)}function nr(n,r){return nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},nr(n,r)}function cf(n){var r=pf();return function(){var t=Gt(n),e;if(r){var o=Gt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ff(this,e)}}function ff(n,r){return r&&(lt(r)==="object"||typeof r=="function")?r:hf(n)}function hf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Gt(n){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gt(n)}var gf=function(n){lf(i,n);var r=cf(i);function i(){return sf(this,i),r.apply(this,arguments)}return uf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(o){e.fitVideo&&(e.width=o.vWidth,e.height=o.vHeight)},this.once(Ce,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,o){var a=document.createElement("a");a.href=e,a.download=o;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}},{key:"createCanvans",value:function(e,o){var a=document.createElement("canvas");this.canvasCtx=a.getContext("2d"),this.canvas=a,a.width=e||this.config.width,a.height=o||this.config.height}},{key:"onClickBtn",value:function(e){var o=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(a){o.emit(to,a),o.saveScreenShot(a,o.config.name+o.config.format)})}},{key:"shot",value:function(e,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},u=this.config,l=this.player,f=s.quality||u.quality,h=s.type||u.type;return new Promise(function(p,g){a.canvas?(a.canvas.width=e||u.width,a.canvas.height=o||u.height):a.createCanvans(e,o),a.canvasCtx.drawImage(l.video,0,0,e||u.width,o||u.height);var v=a.canvas.toDataURL(h,f).replace(h,"image/octet-stream");v=v.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),p(v)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Ce,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",o="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[o],'">').concat(this.i18n[o],"</span>"),` 
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(w);function df(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ti(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function yf(n,r,i){return r&&Ti(n.prototype,r),i&&Ti(n,i),n}var vf=function(){function n(r){df(this,n),this.config=r.config,this.parent=r.root,this.root=c.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),r.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var i=b.device==="mobile"?"touchend":"click";this._delegates=w.delegate.call(this,this.root,"li",i,this.onItemClick)}return yf(n,[{key:"renderItemList",value:function(i){var t=this,e=this.config,o=this.root;i?e.data=i:i=e.data,e.style&&Object.keys(e.style).map(function(a){o.style[a]=e[a]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(a,s){var u=a.selected?"option-item selected":"option-item";a["data-index"]=s,t.root.appendChild(c.createDom("li","<span>".concat(a.showText,"</span>"),a,u))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var t=i.delegateTarget;if(t&&c.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,o=this.root.querySelector(".selected");c.addClass(t,"selected"),o&&c.removeClass(o,"selected"),e(i,{from:o?this.getAttrObj(o,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(i,t){if(!i||!t)return{};var e={};t.map(function(a){e[a]=i.getAttribute(a)});var o=i.getAttribute("data-index");return o&&(e.index=Number(o)),e}},{key:"show",value:function(){c.removeClass(this.root,"hide"),c.addClass(this.root,"active")}},{key:"hide",value:function(){c.removeClass(this.root,"active"),c.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),n}();function Oe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oe=function(i){return typeof i}:Oe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Oe(n)}function mf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ci(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _f(n,r,i){return r&&Ci(n.prototype,r),i&&Ci(n,i),n}function bf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&rr(n,r)}function rr(n,r){return rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rr(n,r)}function wf(n){var r=Of();return function(){var t=Wt(n),e;if(r){var o=Wt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Pf(this,e)}}function Pf(n,r){return r&&(Oe(r)==="object"||typeof r=="function")?r:kf(n)}function kf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Of(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Wt(n){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wt(n)}var De=b.device==="mobile",vo=function(n){bf(i,n);var r=wf(i);function i(t){var e;return mf(this,i),e=r.call(this,t),e.isActive=!1,e.curValue=null,e.curIndex=0,e}return _f(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,o=this.config;De&&o.listType!=="middle"&&(o.listType="rightSide"),o.hidePortrait&&c.addClass(this.root,"portrait"),this.once(F,function(){o.list&&o.list.length>0&&(e.renderItemList(o.list),e.show())}),De&&this.on(mr,function(){!e.isActive||(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),this.activeEvent=De?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,o,a){if(e===void 0)return"";var s=this.config.list;!a&&(a=this.player.lang),o=!o||c.isUndefined(e[o])?"text":o,typeof e=="number"&&(e=s[e]);try{return Oe(e[o])==="object"?e[o][a]||e[o].zh:e[o]}catch(u){return console.warn(u),""}}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(e!==this.isActive){var o=this.player.controls,a=this.config.listType;e?(a==="rightSide"?o.blur():o.focus(),this.optionsList&&this.optionsList.show()):(a==="rightSide"?o.focus():o.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,o){e.preventDefault(),e.stopPropagation();var a=this.config,s=a.listType,u=a.list;(De||s==="rightSide")&&this.onToggle(!1),this.curIndex=o.to.index,this.curItem=u[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,o=this.curIndex<e.length?this.curIndex:0,a=e[o];!a||(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}},{key:"renderItemList",value:function(e,o){var a=this,s=this.config,u=this.optionsList,l=this.player;if(typeof o=="number"&&(this.curIndex=o,this.curItem=s.list[o]),u){u.renderItemList(e),this.changeCurrentText();return}var f={config:{data:e||[],className:s.listType==="rightSide"?"right-side":"",onItemClick:function(p,g){a.onItemClick(p,g)}},root:s.listType==="rightSide"?l.root:this.root};this.config.isShowIcon&&(this.optionsList=new vf(f),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(!!this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon btn-text">
    <span class="icon-text"></span>
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),i}(w);function ct(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ct=function(i){return typeof i}:ct=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(n)}function Sf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ei(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Tf(n,r,i){return r&&Ei(n.prototype,r),i&&Ei(n,i),n}function he(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?he=Reflect.get:he=function(e,o,a){var s=Cf(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},he(n,r,i||n)}function Cf(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=J(n),n!==null););return n}function Ef(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&ir(n,r)}function ir(n,r){return ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ir(n,r)}function xf(n){var r=Af();return function(){var t=J(n),e;if(r){var o=J(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Rf(this,e)}}function Rf(n,r){return r&&(ct(r)==="object"||typeof r=="function")?r:If(n)}function If(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Af(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function J(n){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},J(n)}var Lf=function(n){Ef(i,n);var r=xf(i);function i(t){var e;return Sf(this,i),e=r.call(this,t),e.curTime=0,e.isPaused=!0,e}return Tf(i,[{key:"beforeCreate",value:function(e){var o=e.config.list;Array.isArray(o)&&o.length>0&&(e.config.list=o.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;he(J(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(o){e.changeDefinitionList(o)}),this.on(Pr,function(o){e.renderItemList(o.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,o=e.list,a=e.defaultDefinition;if(o.length>0){var s=null;o.map(function(u){u.definition===a&&(s=u)}),s||(s=o[0]),this.changeDefinition(s)}}},{key:"renderItemList",value:function(e){var o=this,a=this.player,s=this.config.list,u=e&&e.url?e.url:a.currentSrc||a.src,l=e&&e.definition?e.definition:this.config.defaultDefinition;e&&!Array.isArray(e)&&s.forEach(function(p){p.selected=!1});var f=0,h=s.map(function(p,g){var v={url:p.url,definition:p.definition||"",showText:o.getTextByLang(p)||p.definition,selected:!1};return(p.selected||p.url===u||!c.isUndefined(p.definition)&&p.definition===l)&&(v.selected=!0,f=g),v});he(J(i.prototype),"renderItemList",this).call(this,h,f)}},{key:"changeDefinitionList",value:function(e){!Array.isArray(e)||(this.config.list=e.map(function(o){return!o.text&&o.name&&(o.text=o.name),o.text||(o.text=o.definition),o}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,o){var a=this.player;a.switchURL?a.switchUrl(e.url):a.changeDefinition(e,o)}},{key:"onItemClick",value:function(e,o){he(J(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:o.from,to:o.to}),this.player.changeDefinition(o.to,o.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),i}(vo);function ft(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ft=function(i){return typeof i}:ft=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ft(n)}function $f(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function xi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Df(n,r,i){return r&&xi(n.prototype,r),i&&xi(n,i),n}function q(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?q=Reflect.get:q=function(e,o,a){var s=Nf(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},q(n,r,i||n)}function Nf(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=j(n),n!==null););return n}function Mf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&or(n,r)}function or(n,r){return or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},or(n,r)}function Ff(n){var r=Hf();return function(){var t=j(n),e;if(r){var o=j(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Bf(this,e)}}function Bf(n,r){return r&&(ft(r)==="object"||typeof r=="function")?r:jf(n)}function jf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Hf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function j(n){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},j(n)}var Uf=function(n){Mf(i,n);var r=Ff(i);function i(t){var e;return $f(this,i),e=r.call(this,t),e.curRate=1,e}return Df(i,[{key:"beforeCreate",value:function(e){var o=e.player.config.playbackRate,a=o?Array.isArray(o)?o:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(s){return typeof s=="number"?s={rate:s,text:"".concat(s,"x")}:!s.text&&s.rate&&(s.text="".concat(s.rate,"x")),s}))}},{key:"afterCreate",value:function(){var e=this;q(j(i.prototype),"afterCreate",this).call(this),this.on(Ki,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||q(j(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,o){q(j(i.prototype),"onItemClick",this).apply(this,arguments);var a=e.delegateTarget,s=Number(a.getAttribute("rate"));if(!s||s===this.curValue)return!1;var u={playbackRate:{from:this.player.playbackRate,to:s}};this.emitUserAction(e,"change_rate",{props:u}),this.curValue=s,this.player.playbackRate=s}},{key:"renderItemList",value:function(){var e=this,o=this.player.playbackRate||1;this.curValue=o;var a=0,s=this.config.list.map(function(u,l){var f={rate:u.rate};return f.rate===o&&(f.selected=!0,a=l),f.showText=e.getTextByLang(u),f});q(j(i.prototype),"renderItemList",this).call(this,s,a)}},{key:"destroy",value:function(){q(j(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),i}(vo);function ht(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ht=function(i){return typeof i}:ht=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ht(n)}function zf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ri(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Vf(n,r,i){return r&&Ri(n.prototype,r),i&&Ri(n,i),n}function Gf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&ar(n,r)}function ar(n,r){return ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ar(n,r)}function Wf(n){var r=Xf();return function(){var t=Kt(n),e;if(r){var o=Kt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Kf(this,e)}}function Kf(n,r){return r&&(ht(r)==="object"||typeof r=="function")?r:Yf(n)}function Yf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Xf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Kt(n){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Kt(n)}var qf='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',Zf='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',Ii=function(n){Gf(i,n);var r=Wf(i);function i(){return zf(this,i),r.apply(this,arguments)}return Vf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(wt,function(o){e.animate(o)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,o=this.find(".xgplayer-icon");o.appendChild(e.cssFullscreen),o.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var o=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:o}),o?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){!this.root||(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var o=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?o.EXITCSSFULLSCREEN_TIPS:o.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:qf,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Zf,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:S.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(w);function pt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pt=function(i){return typeof i}:pt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},pt(n)}function Jf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ai(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Qf(n,r,i){return r&&Ai(n.prototype,r),i&&Ai(n,i),n}function eh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&sr(n,r)}function sr(n,r){return sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},sr(n,r)}function th(n){var r=ih();return function(){var t=Yt(n),e;if(r){var o=Yt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return nh(this,e)}}function nh(n,r){return r&&(pt(r)==="object"||typeof r=="function")?r:rh(n)}function rh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ih(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Yt(n){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Yt(n)}var oh=function(n){eh(i,n);var r=th(i);function i(){return Jf(this,i),r.apply(this,arguments)}return Qf(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(F,function(){e.handleCanPlay()}),this.on(tn,function(o){e.onError(o)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){c.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.player,a=e.errorType,s=o.error;if(!s)switch(a){case"decoder":s=this.i18n.MEDIA_ERR_DECODE;break;case"network":s=this.i18n.MEDIA_ERR_NETWORK;break;default:s=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=s,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(w);function gt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gt=function(i){return typeof i}:gt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},gt(n)}function ah(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Li(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function sh(n,r,i){return r&&Li(n.prototype,r),i&&Li(n,i),n}function uh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&ur(n,r)}function ur(n,r){return ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ur(n,r)}function lh(n){var r=hh();return function(){var t=Xt(n),e;if(r){var o=Xt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ch(this,e)}}function ch(n,r){return r&&(gt(r)==="object"||typeof r=="function")?r:fh(n)}function fh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Xt(n){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Xt(n)}var ph=function(n){uh(i,n);var r=lh(i);function i(){return ah(this,i),r.apply(this,arguments)}return sh(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(o){(e.config.onClick||e.customOnClick)&&(o.preventDefault(),o.stopPropagation(),e.customOnClick?e.customOnClick(o):e.config.onClick(o))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var o=this;Object.keys(e).map(function(a){o.root.style[a]=e[a]})}},{key:"show",value:function(e){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(!!e){this.customOnClick=s;var u=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),c.addClass(this.root,"show"),a.mode==="arrow"&&c.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var l=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(l){var f=a.interval||u;this.intervalId=setTimeout(function(){o.hide()},f)}}}},{key:"hide",value:function(){c.removeClass(this.root,"show"),c.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(d.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(w);const gh=ph;var $i={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function mo(n){Object.keys($i).map(function(r){n[r]===void 0&&(n[r]=$i[r])})}var Di={initDots:function(){var r=this;this._ispots.map(function(i){r.createDot(i,!1)}),this._ispotsInit=!0},createDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(!!t&&(i&&(mo(r),this._ispots.push(r)),!(!this._ispotsInit&&i))){var e=this.calcuPosition(r.time,r.duration),o=r.style||{};o.left="".concat(e.left,"%"),o.width="".concat(e.width,"%");var a="xgspot_".concat(r.id," xgplayer-spot");e.isMini&&(a+=" mini");var s=c.createDom("xg-spot","",{"data-text":r.text,"data-time":r.time,"data-id":r.id},a);Object.keys(o).map(function(u){s.style[u]=o[u]}),t.outer&&t.outer.appendChild(s)}},findDot:function(r){if(!!this.player.plugins.progress){var i=this._ispots.filter(function(t,e){return t.id===r});return i.length>0?i[0]:null}},updateDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(!!t){var e=this.findDot(r.id);if(e&&Object.keys(r).map(function(u){e[u]=r[u]}),!!this._ispotsInit){var o=t.find('xg-spot[data-id="'.concat(r.id,'"]'));if(!!o){var a=this.calcuPosition(r.time,r.duration),s=r.style||{};s.left="".concat(a.left,"%"),s.width="".concat(a.width,"%"),o.setAttribute("data-text",r.text),o.setAttribute("data-time",r.time),a.isMini?c.addClass(o,"mini"):c.removeClass(o,"mini"),Object.keys(s).map(function(u){o.style[u]=s[u]}),i&&this.showDot(r.id)}}}},deleteDot:function(r){var i=this._ispots,t=this.player.plugins.progress;if(!!t){for(var e=[],o=0;o<i.length;o++)i[o].id===r&&e.push(o);for(var a=e.length,s=a-1;s>=0;s--)if(i.splice(e[s],1),this._ispotsInit){var u=t.find('xg-spot[data-id="'.concat(r,'"]'));u&&u.parentElement.removeChild(u)}}},deleteAllDots:function(){var r=this.player.plugins.progress;if(!!r){if(!this._ispotsInit){this._ispots=[];return}for(var i=r.root.getElementsByTagName("xg-spot"),t=i.length-1;t>=0;t--)r.outer.removeChild(i[t]);this._ispots=[]}},updateAllDots:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(!!t){if(!this._ispotsInit){this._ispots=i;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),o=e.length;if(o>i.length)for(var a=o-1;a>i.length-1;a--)t.outer.removeChild(e[a]);i.map(function(s,u){u<o?(e[u].setAttribute("data-id","".concat(s.id)),r._ispots.push(s),r.updateDot(s)):r.createDot(s)})}}};function dh(n){var r=n.config,i=n.player;Object.keys(Di).map(function(e){n[e]=Di[e].bind(n)});var t=i.config.progressDot||r.ispots||[];n._ispots=t.map(function(e){return mo(e),e}),n._ispotsInit=!1,i.once(nn,function(){n.initDots()})}function dt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(i){return typeof i}:dt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},dt(n)}function yh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ni(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function vh(n,r,i){return r&&Ni(n.prototype,r),i&&Ni(n,i),n}function mh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&lr(n,r)}function lr(n,r){return lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lr(n,r)}function _h(n){var r=wh();return function(){var t=qt(n),e;if(r){var o=qt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return bh(this,e)}}function bh(n,r){return r&&(dt(r)==="object"||typeof r=="function")?r:cr(n)}function cr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function qt(n){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qt(n)}function Mi(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var ue={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd"},Ph=function(n){mh(i,n);var r=_h(i);function i(t){var e;return yh(this,i),e=r.call(this,t),Mi(cr(e),"onMousemove",function(o){(e._state.f||c.hasClass(o.target,"xg-spot-content"))&&(c.event(o),o.stopPropagation())}),Mi(cr(e),"onMousedown",function(o){(e._state.f||c.hasClass(o.target,"xg-spot-content"))&&(c.event(o),o.stopPropagation())}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e._state={now:0,f:!1},e}return vh(i,[{key:"beforeCreate",value:function(e){var o=e.player.plugins.progress;o&&(e.root=o.root)}},{key:"onPluginsReady",value:function(){var e=this.player;!e.plugins.progress||(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),dh(this),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,o=this.player.plugins.progress;if(!(b.device==="mobile"||!o)){Object.keys(ue).map(function(s){e[ue[s]]=e[ue[s]].bind(e),o.addCallBack(s,e[ue[s]])}),this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(s){s.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,s)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.isDrag=!0,this.videoPreview&&c.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&c.removeClass(this.videoPreview,"show")}},{key:"updateLinePos",value:function(e,o){var a=this.root,s=this.previewLine,u=this.timePoint,l=this.player,f=l.controls.mode,h=f==="flex",p=a.getBoundingClientRect().width,g=u.getBoundingClientRect().width,v=e-p/2,m,_;v<0&&!h?(v=0,m=e-p/2,!this.thumbnail&&(_=e-p/2-g/2)):v>o-p&&!h?(m=v-(o-p),!this.thumbnail&&(_=v-(o-p)-g/2),v=o-p):(m=0,!this.thumbnail&&(_=-g/2)),m!==void 0&&(s.style.transform="translateX(".concat(m,"px)")),_!==void 0&&(u.style.transform="translateX(".concat(_,"px)")),a.style.transform="translateX(".concat(v,"px)")}},{key:"updateTimeText",value:function(e){var o=this.timeText,a=this.timePoint;o.textContent=e,!this.thumbnail&&(a.textContent=e)}},{key:"updatePosition",value:function(e,o,a,s){var u=this.root,l=this.config,f=this._state;if(!!u){this.updateLinePos(e,o),f.now=a;var h=c.format(a);s&&s.target&&c.hasClass(s.target,"xgplayer-spot")?(this.showTips(s.target.getAttribute("data-text"),!1,h),f.f=!0,l.isFocusDots&&f.f&&(f.now=parseInt(s.target.getAttribute("data-time"),10))):l.defaultText?(f.f=!1,this.showTips(l.defaultText,!0,h)):(f.f=!1,this.hideTips("")),this.updateTimeText(h),this.updateThumbnails(f.now)}}},{key:"updateThumbnails",value:function(e){var o=this.player,a=this.videoPreview,s=o.plugins.thumbnail;if(s&&s.usable){this.thumbnail&&s.update(this.thumbnail,e,160,90);var u=a&&a.getBoundingClientRect();this.videothumbnail&&s.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b.device!=="mobile"){var o=this.player,a=this.config,s=o.getPlugin("thumbnail");if(s&&Object.keys(e).map(function(l){s.config[l]=e[l]}),!s||!s.usable||!a.isShowThumbnail){c.addClass(this.root,"short-line no-thumbnail");return}else c.removeClass(this.root,"short-line no-thumbnail");this._hasThumnail=!0;var u=this.find(".xg-spot-thumbnail");this.thumbnail=s.createThumbnail(u,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=c.createDom("xg-video-preview","",{},"xgvideo-preview"),o.root.appendChild(this.videoPreview),this.videothumbnail=s.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}}},{key:"calcuPosition",value:function(e,o){var a=this.player.plugins.progress,s=this.player,u=a.root.getBoundingClientRect().width,l=s.duration/u*6;return e+o>s.duration&&(o=s.duration-e),e/s.duration*100,o/s.duration,{left:e/s.duration*100,width:o/s.duration*100,isMini:o<l}}},{key:"showDot",value:function(e){var o=this.findDot(e);if(o){var a=this.root.getBoundingClientRect(),s=a.width,u=o.time/this.player.duration*s;this.updatePosition(u,s,o.time)}}},{key:"showTips",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";!e||(c.addClass(this.root,"no-timepoint"),c.addClass(this.find(".xg-spot-content"),"show-text"),o&&this.config.mode==="production"?(c.addClass(this.root,"product"),this.tipText.textContent=e):(c.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){c.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",c.removeClass(this.find(".xg-spot-content"),"show-text"),c.removeClass(this.root,"product")}},{key:"destroy",value:function(){var e=this,o=this.player.plugins.progress;o&&Object.keys(ue).map(function(a){o.removeCallBack(a,e[ue[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return b.device==="mobile"||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),i}(w);function yt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yt=function(i){return typeof i}:yt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},yt(n)}function kh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Fi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Oh(n,r,i){return r&&Fi(n.prototype,r),i&&Fi(n,i),n}function Sh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&fr(n,r)}function fr(n,r){return fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fr(n,r)}function Th(n){var r=xh();return function(){var t=Zt(n),e;if(r){var o=Zt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ch(this,e)}}function Ch(n,r){return r&&(yt(r)==="object"||typeof r=="function")?r:Eh(n)}function Eh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Zt(n){return Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zt(n)}var Rh=function(n){Sh(i,n);var r=Th(i);function i(t){var e;return kh(this,i),e=r.call(this,t),e.ratio=1,e.interval=null,e.preloadMark={},e}return Oh(i,[{key:"afterCreate",value:function(){this.usable&&this.initThumbnail()}},{key:"usable",get:function(){var e=this.config,o=e.urls,a=e.pic_num;return o&&o.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,o=e.width,a=e.height,s=e.pic_num,u=e.interval;this.ratio=o/a*100,this.interval=u||Math.round(this.player.duration/s),this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var o=this,a=this.config.urls,s=a.length,u=[e-1,e,e+1,e+2];u.map(function(l){!o.preloadMark[l]&&l>=0&&l<s&&(c.preloadImg(a[l]),o.preloadMark[l]=!0)})}},{key:"getPosition",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=this.config,u=s.pic_num,l=s.row,f=s.col,h=s.width,p=s.height;this.interval=Math.round(this.player.duration/u);var g=Math.ceil(e/this.interval);g=g>u?u:g;var v=g<l*f?0:Math.ceil(g/(l*f))-1,m=g-v*(f*l),_=m>0?Math.ceil(m/f)-1:0,T=m>0?m-_*f-1:0,O=0,k=0;if(o&&a){var Q=o/a;Q<h/p?(O=o,k=O/(h/p)):(k=a,O=k*(h/p))}else O=o||h,k=O/(h/p);var $=this.getUrlByIndex(v);return{urlIndex:v,rowIndex:_,colIndex:T,url:$,height:k,width:O,style:{backgroundImage:"url(".concat($,")"),backgroundSize:"".concat(O*f,"px auto"),backgroundPosition:"-".concat(T*O,"px -").concat(_*k,"px"),width:"".concat(O,"px"),height:"".concat(k,"px")}}}},{key:"update",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=this.config,f=l.pic_num,h=l.urls;if(!(f<=0||!h||h.length===0)){var p=this.getPosition(o,a,s);this.preload(p.urlIndex),Object.keys(p.style).map(function(g){e.style[g]=p.style[g]}),Object.keys(u).map(function(g){e.style[g]=u[g]})}}},{key:"createThumbnail",value:function(e,o){var a=c.createDom("xg-thumbnail","",{},"thumbnail ".concat(o));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(w);function vt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vt=function(i){return typeof i}:vt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},vt(n)}function Ih(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Bi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ah(n,r,i){return r&&Bi(n.prototype,r),i&&Bi(n,i),n}function Lh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&hr(n,r)}function hr(n,r){return hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},hr(n,r)}function $h(n){var r=Mh();return function(){var t=Jt(n),e;if(r){var o=Jt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Dh(this,e)}}function Dh(n,r){return r&&(vt(r)==="object"||typeof r=="function")?r:Nh(n)}function Nh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Jt(n){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jt(n)}var Fh=function(n){Lh(i,n);var r=$h(i);function i(){return Ih(this,i),r.apply(this,arguments)}return Ah(i,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},o=arguments.length>1?arguments[1]:void 0;!o||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/o*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/o*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),i}(w);const Bh=Fh;function mt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mt=function(i){return typeof i}:mt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},mt(n)}function jh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ji(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Hh(n,r,i){return r&&ji(n.prototype,r),i&&ji(n,i),n}function Uh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&pr(n,r)}function pr(n,r){return pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},pr(n,r)}function zh(n){var r=Gh();return function(){var t=Qt(n),e;if(r){var o=Qt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Vh(this,e)}}function Vh(n,r){return r&&(mt(r)==="object"||typeof r=="function")?r:_t(n)}function _t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Qt(n){return Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Qt(n)}function vn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var mn={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate"};function Wh(){try{return window.performance.now()}catch(n){return new Date().getTime()}}function Hi(n){return!(b.browser==="safari"&&(/^blob/.test(n.currentSrc)||/^blob/.test(n.src)))}function Kh(){try{var n=document.createElement("canvas").getContext;return!!n}catch(r){return!1}}var Ne=null,Yh=function(n){Uh(i,n);var r=zh(i);function i(){var t;jh(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),vn(_t(t),"onLoadedData",function(){if(!!t.player){var s=t.player.video;t.videoPI=parseInt(s.videoWidth/s.videoHeight*100,10)}}),vn(_t(t),"start",function(){var s=t.player.video,u=Wh();!Hi(s)||!t.canvasCtx||(t.stop(),(t.config.mode===mn.REAL_TIME||u-t.preTime>=t.interval)&&(s&&s.videoWidth&&t.update(s,s.videoWidth,s.videoHeight),t.preTime=u),t.frameId=window.setTimeout(function(){t.start()},t.interval))}),vn(_t(t),"stop",function(){t.frameId&&(window.clearTimeout(t.frameId),t.frameId=null)}),t}return Hh(i,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var o=this.config,a=o.disable,s=o.mode;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(rn,function(){!e.player||(e.init(),!e.player.paused&&e.start())}),this.once(Te,this.onLoadedData),this.on(Ie,function(){e.once(Te,e.onLoadedData)}),s!==mn.FIRST_FRAME&&(this.on(ie,function(){e.start()}),this.on(xe,function(){e.stop()})),s===mn.FIRST_FRAME&&this.once(V,function(){var u=e.player.video;u&&Hi(u)&&u.videoWidth&&e.update(u,u.videoWidth,u.videoHeight)}))}},{key:"init",value:function(){var e=this.player,o=this.config;this.canvasFilter=i.supportCanvasFilter();try{var a=this.config.isInnerRender&&e.innerContainer||e.root;a.insertAdjacentHTML("afterbegin",`<div class="xgplayer-dynamic-bg"><canvas>
        </canvas><xgmask></xgmask></div>`),this.root=a.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=o.filter,this.canvas.style.webkitFilter=o.filter),this.mask=this.find("xgmask"),o.addMask&&(this.mask.style.background=o.maskBg),this.canvasCtx=this.canvas.getContext("2d");var s=this.playerConfig.poster;if(s){var u=c.typeOf(s)==="String"?s:c.typeOf(s.poster)==="String"?s.poster:null;this.updateImg(u)}}catch(l){P.logError("plugin:DynamicBg",l)}}},{key:"updateImg",value:function(e){var o=this;if(!!e){var a=this.canvas.getBoundingClientRect(),s=a.width,u=a.height,l=new window.Image;l.onload=function(){!o.canvas||(o.canvas.height=u,o.canvas.width=s,l=null)},l.src=e}}},{key:"update",value:function(e,o,a){if(!(!this.canvas||!this.canvasCtx||!this.videoPI))try{var s=this._pos,u=this.config,l=this.canvas.getBoundingClientRect(),f=l.width,h=l.height;if(this.videoPI=parseInt(o/a*100,10),f!==s.width||h!==s.height){var p=parseInt(f/h*100,10);s.width=this.canvas.width=f,s.height=this.canvas.height=h;var g=h,v=f;p<this.videoPI?v=parseInt(h*this.videoPI/100,10):p>this.videoPI&&(g=parseInt(f*100/this.videoPI,10)),p<this.videoPI?v=parseInt(h*this.videoPI/100,10):p>this.videoPI&&(g=parseInt(f*100/this.videoPI,10)),s.rwidth=v*1.2,s.rheight=g*1.2,s.x=(f-s.rwidth)/2,s.y=(h-s.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=u.filter),this.canvasCtx.drawImage(e,s.x,s.y,s.rwidth,s.rheight)}catch(m){P.logError("plugin:DynamicBg",m)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Ne=="boolean"||(Ne=Kh()),Ne}},{key:"supportCanvasFilter",value:function(){return!(b.browser==="safari"||b.browser==="firefox")}}]),i}(w);const Xh=Yh,qh={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}};function Zh(n){return tp(n)||ep(n)||Qh(n)||Jh()}function Jh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qh(n,r){if(!!n){if(typeof n=="string")return gr(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gr(n,r)}}function ep(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tp(n){if(Array.isArray(n))return gr(n)}function gr(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function np(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var rp=function n(r,i){var t,e,o;np(this,n);var a=i&&i.isMobileSimulateMode,s=i.isLive,u=s?[]:[kl,Bh,Ph,cc],l=[].concat(u,[$l,ec,Rc,qc,Lf,Uf,af,gf,wc,Hc]),f=[ws,Rs,zs,fl,Js,oh,gh,Rh,Ou];this.plugins=[fs].concat(Zh(l),f);var h=a?"mobile":b.device;switch(h){case"pc":(t=this.plugins).push.apply(t,[hi,yn,Ii]);break;case"mobile":(e=this.plugins).push.apply(e,[Wu]);break;default:(o=this.plugins).push.apply(o,[hi,yn,Ii])}(b.os.isIpad||h==="pc")&&this.plugins.push(Xh),b.os.isIpad&&this.plugins.push(yn),this.ignores=[],this.i18n=[qh]};function bt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bt=function(i){return typeof i}:bt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bt(n)}function ip(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function op(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&dr(n,r)}function dr(n,r){return dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},dr(n,r)}function ap(n){var r=lp();return function(){var t=en(n),e;if(r){var o=en(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return sp(this,e)}}function sp(n,r){return r&&(bt(r)==="object"||typeof r=="function")?r:up(n)}function up(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function en(n){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},en(n)}function W(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var H=function(n){op(i,n);var r=ap(i);function i(){return ip(this,i),r.apply(this,arguments)}return i}(Or);W(H,"defaultPreset",rp);W(H,"Util",c);W(H,"Sniffer",b);W(H,"Errors",yr);W(H,"Events",Uo);W(H,"Plugin",w);W(H,"BasePlugin",Ae);W(H,"I18N",te);W(H,"STATE_CLASS",d);const pp=H;export{pp as P};
