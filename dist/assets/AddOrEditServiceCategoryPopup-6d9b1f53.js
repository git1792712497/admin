var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e},s=(e,l)=>a(e,t(l)),u=(e,a,t)=>new Promise(((l,r)=>{var o=e=>{try{i(t.next(e))}catch(a){r(a)}},n=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,n);i((t=t.apply(e,a)).next())}));import{bo as c,a as d,eg as p,w as m,ab as v,o as f,j as g,H as b,n as y,k as h,h as w,am as _,K as O,t as j,O as I,as as P,eh as x,ct as A}from"./index-c5a6c875.js";import{u as S,B as C}from"./index-c9e02f09.js";import z from"./ImageUpload-f0074c94.js";const U={name:[{required:!0,message:"栏目名称是必填项",trigger:"blur",whitespace:!0}],websiteId:[{required:!0,message:"站点名称是必选项",trigger:"blur",whitespace:!0}],subtitle:[{required:!0,message:"副标题是必填项",trigger:"blur",whitespace:!0}]};function V(e){return c.post({url:"/service-category/save",params:e})}function L(e){var a,t;return c.post({url:"/service-category/query",params:s(i({pagination:{size:null!=(a=null==e?void 0:e.size)?a:10,current:null!=(t=null==e?void 0:e.current)?t:1}},e),{size:void 0,current:void 0})})}function q(e){return c.get({url:"/service-category/tree",params:e})}function E(e){return c.delete({url:`/service-category/destroy/${e}`})}const R=Object.freeze(Object.defineProperty({__proto__:null,getAddOrEditServiceCategoryApi:V,getServiceCategoryListApi:L,getWebsiteListApi:function(e){return c.post({url:"/website/query",params:s(i({pagination:{size:e.size,current:e.current}},e),{size:void 0,current:void 0})})},getServiceCategoryTreeApi:q,getServiceCategoryDeleteApi:E},Symbol.toStringTag,{value:"Module"})),D=d({emits:["success"],setup(e,{expose:a,emit:t}){const[l,{openModal:r}]=S();let o=p(!1),n=m({});const i=p(),s=()=>u(this,null,(function*(){yield i.value.validate();const e=P(h(n.value));o.value=!0;try{yield V(e),x.success("操作成功"),t("success")}finally{o.value=!1,r(!1)}})),c=p([]);let d=p([]);const L=e=>{const a=d.value.find((a=>a.id===e));n.value.websiteName=a.name,n.value.websiteDomain=a.domain};return a({openAddOrEditServiceCategoryPopup:e=>u(this,null,(function*(){n.value=e,r(),q().then((e=>c.value=e.nodes));const{getWebsiteListApi:a}=yield A((()=>Promise.resolve().then((()=>R))),void 0,import.meta.url),t=yield a({});d.value=t.records}))}),(e,a)=>{const t=v("a-select-option"),r=v("a-select"),u=v("a-form-item"),p=v("a-input"),m=v("a-tree-select"),P=v("a-textarea"),x=v("a-form");return f(),g(h(C),{confirmLoading:h(o),forceRender:"",title:"新增服务分类",onOk:s,onRegister:h(l)},{default:b((()=>[y(x,{ref_key:"formRef",ref:i,"label-col":{span:4},model:h(n),rules:h(U)},{default:b((()=>[y(u,{label:"站点名称",name:"websiteId"},{default:b((()=>[y(r,{onChange:L,value:h(n).websiteId,"onUpdate:value":a[0]||(a[0]=e=>h(n).websiteId=e),placeholder:"请选择站点"},{default:b((()=>[(f(!0),w(I,null,_(h(d),(e=>(f(),g(t,{value:e.id},{default:b((()=>[O(j(e.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["value"])])),_:1}),y(u,{label:"名称",name:"name"},{default:b((()=>[y(p,{value:h(n).name,"onUpdate:value":a[1]||(a[1]=e=>h(n).name=e),"allow-clear":"",placeholder:"请输入服务分类名称"},null,8,["value"])])),_:1}),y(u,{label:"副标题",name:"subtitle"},{default:b((()=>[y(p,{value:h(n).subtitle,"onUpdate:value":a[2]||(a[2]=e=>h(n).subtitle=e),"allow-clear":"",placeholder:"请输入副标题名称"},null,8,["value"])])),_:1}),y(u,{label:"上级分类",name:"parentId"},{default:b((()=>[y(m,{onChange:a[3]||(a[3]=(e,a)=>h(n).columnName=a.pop()),value:h(n).parentId,"onUpdate:value":a[4]||(a[4]=e=>h(n).parentId=e),fieldNames:{children:"children",label:"name",value:"id"},"show-search":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择所属栏目名称","allow-clear":"","tree-data":h(c)},null,8,["value","tree-data"])])),_:1}),y(u,{label:"图标",name:"icon"},{default:b((()=>[y(z,{modelValue:h(n).icon,"onUpdate:modelValue":a[5]||(a[5]=e=>h(n).icon=e)},null,8,["modelValue"])])),_:1}),y(u,{label:"封面图",name:"coverImage"},{default:b((()=>[y(z,{modelValue:h(n).coverImage,"onUpdate:modelValue":a[6]||(a[6]=e=>h(n).coverImage=e)},null,8,["modelValue"])])),_:1}),y(u,{label:"描述",name:"description"},{default:b((()=>[y(P,{value:h(n).description,"onUpdate:value":a[7]||(a[7]=e=>h(n).description=e),maxlength:255,rows:3,allowClear:"",placeholder:"请输入文章内容简介",showCount:""},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["confirmLoading","onRegister"])}}}),T=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{T as A,D as _,E as a,L as g};
