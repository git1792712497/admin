var Z=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var q=(p,u,r)=>u in p?Z(p,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):p[u]=r,F=(p,u)=>{for(var r in u||(u={}))K.call(u,r)&&q(p,r,u[r]);if(M)for(var r of M(u))W.call(u,r)&&q(p,r,u[r]);return p},P=(p,u)=>H(p,J(u));var A=(p,u,r)=>new Promise((c,i)=>{var e=g=>{try{v(r.next(g))}catch(m){i(m)}},y=g=>{try{v(r.throw(g))}catch(m){i(m)}},v=g=>g.done?c(g.value):Promise.resolve(g.value).then(e,y);v((r=r.apply(p,u)).next())});import{A as N,w as $,f as X,p as Y,L as ee,M as le,x as te,N as oe,O as ae,P as re,Q as ne,y as ue,F as pe,l as R}from"./element-plus-ef60ab81.js";import{g as se}from"./index-3fab503d.js";import{I as de}from"./@element-plus-32e4db1a.js";import{F as S,s as ie,o as _,c as B,a2 as o,a0 as l,m as L,a as j,Q as me,ab as fe,u as t,$ as b,e as h,q as _e,ac as s,Z as V,ae as ce,a4 as ye,G as I,n as ge}from"./@vue-46cd96cd.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./lodash-unified-cbbf5a2b.js";import"./lodash-d8f670e1.js";import"./@amap-9fd45ac7.js";import"./@sxzz-ad8bfd58.js";import"./@vueuse-c4efa120.js";import"./async-validator-f102eabc.js";import"./@ctrl-83f18216.js";import"./escape-html-12e99df8.js";import"./normalize-wheel-es-c175a4cf.js";import"./vue-bd17b2e0.js";import"./@floating-ui-5f39704e.js";import"./dayjs-7cbd9aff.js";import"./memoize-one-0650c7b0.js";import"./index-6920edb1.js";import"./preload-helper-41c905a7.js";import"./vue-router-e8f17689.js";import"./nprogress-57f984c9.js";import"./pinia-2c3c5428.js";import"./vue-demi-71ba0ef2.js";import"./axios-226f391c.js";import"./qs-b010a38c.js";import"./side-channel-a082fe58.js";import"./get-intrinsic-5660d814.js";import"./has-symbols-8f82dcae.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-75c15918.js";import"./object-inspect-4572ba77.js";import"./lodash-es-81e82e73.js";const be={type:[{type:"number",required:!0,message:"菜单类型是必选项",trigger:"blur"}],sort:[{type:"number",required:!0,message:"菜单序号是必选项",trigger:"blur"}],title:[{type:"string",required:!0,message:"菜单标题是必填项",trigger:"blur"}],name:[{type:"string",required:!0,message:"菜单标识是必填项",trigger:"blur"}],icon:[{required:!0,message:"菜单图标是必选项",trigger:"change"}],path:[{type:"string",required:!1,message:"菜单路径是必填项",trigger:"blur"},{validator(p,u,r,c,i){const e=/^\//,y=/^http/;if(!u){r();return}e.test(u)||y.test(u)?r():r(new Error("菜单路径必须以斜杠开头或http://链接"))}}],component:[{type:"string",required:!1,message:"组件路径是必填项",trigger:"blur"},{validator(p,u,r,c,i){/^\//.test(u)?r():r(new Error("组件路径必须以斜杠开头"))}}]},ve={class:"flex justify-start flex-wrap items-center"},Ve=S({name:"index"}),ke=S(P(F({},Ve),{props:{modelValue:{type:String,default:"Menu"}},emits:["update:modelValue"],setup(p,{emit:u}){let r=ie(!1);return(c,i)=>{const e=N,y=$,v=X,g=Y;return _(),B("div",null,[o(g,{width:315,visible:t(r),"onUpdate:visible":i[1]||(i[1]=m=>L(r)?r.value=m:r=m),placement:"bottom",trigger:"click",transition:"el-zoom-in-top","popper-class":"icon-selector-popper"},{reference:l(()=>[o(y,{type:"text",onBlur:i[0]||(i[0]=m=>L(r)?r.value=!1:r=!1),modelValue:p.modelValue,placeholder:"图标"},{prepend:l(()=>[o(e,{size:"small",icon:p.modelValue},null,8,["icon"])]),_:1},8,["modelValue"])]),default:l(()=>[o(v,{height:"210px"},{default:l(()=>[j("nav",ve,[(_(!0),B(me,null,fe(Object.keys(de),m=>(_(),b(e,{onClick:C=>u("update:modelValue",m),key:m,icon:m},null,8,["onClick","icon"]))),128))])]),_:1})]),_:1},8,["visible"])])}}}));const xe=O(ke,[["__scopeId","data-v-16049c43"]]),Ee={class:"dialog-footer"},we=S({__name:"AddMenuDialog",props:{menuData:{type:Array,default:[]}},emits:["refresh"],setup(p,{expose:u,emit:r}){const c=h(""),i=h();let e=_e({hidden:1,fullScreen:0,keepAlive:0,name:"",icon:"Menu",path:"",sort:0,component:"",type:void 0,title:"",isLink:0,activePath:""});const y=h(!1);let v=h(!1);const g=()=>{i.value.validate(x=>A(this,null,function*(){if(!x)return;v.value=!0;const a=I(e);a.path=c.value+a.path;try{const{message:d}=yield se(I(e));R.ElMessage({message:d,type:"success"}),r("refresh"),C()}catch(d){R.ElMessage({message:"创建失败",type:"error"})}finally{v.value=!1}}))},m=x=>A(this,null,function*(){y.value=!0,yield ge(),x?Object.keys(I(e)).forEach(a=>e[a]=x[a]):(c.value="",i.value.resetFields())}),C=()=>y.value=!1;return u({openDialog:m,closeDialog:C}),(x,a)=>{const d=ee,E=le,f=te,w=$,k=oe,U=ae,T=re,z=ne,G=ue,D=N,Q=pe;return _(),b(Q,{modelValue:y.value,"onUpdate:modelValue":a[16]||(a[16]=n=>y.value=n),title:"新增菜单",width:550},{footer:l(()=>[j("span",Ee,[o(D,{onClick:a[15]||(a[15]=n=>y.value=!1)},{default:l(()=>[s("取消")]),_:1}),o(D,{type:"primary",loading:t(v),onClick:g},{default:l(()=>[s(" 确定 ")]),_:1},8,["loading"])])]),default:l(()=>[o(G,{ref_key:"formRef",ref:i,model:t(e),"status-icon":"",rules:t(be),"label-width":"80px"},{default:l(()=>[o(f,{label:"菜单类型",prop:"type"},{default:l(()=>[o(E,{modelValue:t(e).type,"onUpdate:modelValue":a[0]||(a[0]=n=>t(e).type=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("目录")]),_:1}),o(d,{label:2},{default:l(()=>[s("菜单")]),_:1}),o(d,{label:3},{default:l(()=>[s("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(U,{gutter:20},{default:l(()=>[o(k,{span:t(e).type===1?24:12},{default:l(()=>[o(f,{label:"菜单名称",prop:"title"},{default:l(()=>[o(w,{modelValue:t(e).title,"onUpdate:modelValue":a[1]||(a[1]=n=>t(e).title=n),clearable:"",autofocus:"",placeholder:"请输入菜单标题"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),o(k,{span:12},{default:l(()=>[t(e).type!==1?(_(),b(f,{key:0,label:"菜单标识",prop:"name"},{default:l(()=>[o(w,{modelValue:t(e).name,"onUpdate:modelValue":a[2]||(a[2]=n=>t(e).name=n),clearable:"",autofocus:"",placeholder:"请输入菜单标识"},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1}),o(f,{label:"父级菜单",prop:"parentId"},{default:l(()=>[o(T,{onClear:a[3]||(a[3]=n=>c.value=void 0),onCurrentChange:a[4]||(a[4]=({path:n})=>c.value=n),modelValue:t(e).parentId,"onUpdate:modelValue":a[5]||(a[5]=n=>t(e).parentId=n),data:p.menuData,"check-strictly":"",clearable:"",props:{label:"title",children:"children",value:"id"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),t(e).type!==3?(_(),b(f,{key:0,label:"菜单路由",prop:"path"},{default:l(()=>[o(w,{modelValue:t(e).path,"onUpdate:modelValue":a[6]||(a[6]=n=>t(e).path=n),clearable:"",placeholder:"请输入路由path或http外链地址"},ce({_:2},[c.value?{name:"prepend",fn:l(()=>[s(ye(c.value),1)]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})):V("",!0),t(e).type===2||t(e).type===void 0?(_(),b(f,{key:1,label:"组件路径",prop:"component"},{default:l(()=>[o(w,{modelValue:t(e).component,"onUpdate:modelValue":a[7]||(a[7]=n=>t(e).component=n),clearable:"",placeholder:"请输入组件路径"},{prepend:l(()=>[s("@/views")]),_:1},8,["modelValue"])]),_:1})):V("",!0),t(e).type===2||t(e).type===void 0?(_(),b(f,{key:2,label:"活跃菜单",prop:"activePath"},{default:l(()=>[o(w,{modelValue:t(e).activePath,"onUpdate:modelValue":a[8]||(a[8]=n=>t(e).activePath=n),clearable:"",placeholder:"请输入当前激活菜单路径"},null,8,["modelValue"])]),_:1})):V("",!0),o(U,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type!==3?(_(),b(f,{key:0,label:"菜单图标",prop:"icon"},{default:l(()=>[o(xe,{class:"w-full",modelValue:t(e).icon,"onUpdate:modelValue":a[9]||(a[9]=n=>t(e).icon=n)},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:t(e).type===3?24:12},{default:l(()=>[o(f,{label:"菜单排序",prop:"sort"},{default:l(()=>[o(z,{modelValue:t(e).sort,"onUpdate:modelValue":a[10]||(a[10]=n=>t(e).sort=n),min:0,placeholder:"菜单序号",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["span"])]),_:1}),o(U,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(_(),b(f,{key:0,label:"是否外链",prop:"isLink"},{default:l(()=>[o(E,{modelValue:t(e).isLink,"onUpdate:modelValue":a[11]||(a[11]=n=>t(e).isLink=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(_(),b(f,{key:0,label:"菜单状态",prop:"hidden"},{default:l(()=>[o(E,{modelValue:t(e).hidden,"onUpdate:modelValue":a[12]||(a[12]=n=>t(e).hidden=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("显示")]),_:1}),o(d,{label:0},{default:l(()=>[s("隐藏")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1}),o(U,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(_(),b(f,{key:0,label:"开启全屏",prop:"fullScreen"},{default:l(()=>[o(E,{modelValue:t(e).fullScreen,"onUpdate:modelValue":a[13]||(a[13]=n=>t(e).fullScreen=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(_(),b(f,{key:0,label:"缓存菜单",prop:"keepAlive"},{default:l(()=>[o(E,{modelValue:t(e).keepAlive,"onUpdate:modelValue":a[14]||(a[14]=n=>t(e).keepAlive=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});const nl=O(we,[["__scopeId","data-v-c5b07bef"]]);export{nl as default};
