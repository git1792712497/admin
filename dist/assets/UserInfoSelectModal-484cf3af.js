var e=(e,a,i)=>new Promise(((l,t)=>{var o=e=>{try{r(i.next(e))}catch(a){t(a)}},s=e=>{try{r(i.throw(e))}catch(a){t(a)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,s);r((i=i.apply(e,a)).next())}));import{a,B as i}from"./index-c9e02f09.js";import{u as l,B as t}from"./useForm-76a4ff23.js";import{g as o}from"./dept-667428a4.js";import{g as s}from"./role-ff1ea5b0.js";import{a as r,w as d,o as n,j as p,H as u,n as m,k as c,ag as f}from"./index-c5a6c875.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./index-bb91fa2a.js";import"./get-8f9589fb.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const b=r({emits:["success","register"],setup(r,{emit:b}){const v=d(""),j=d(""),h=d(""),[g,{updateSchema:F,resetFields:y,getFieldsValue:I,validate:w}]=l({labelWidth:100,baseColProps:{span:24},schemas:[{field:"deptId",label:"选择部门",component:"ApiSelect",required:!0,componentProps:{api:o,labelField:"deptName",style:{width:"100%"},valueField:"id",immediate:!1}},{field:"roleId",label:"选择角色",component:"ApiSelect",required:!0,componentProps:{api:s,labelField:"roleName",style:{width:"100%"},valueField:"id",immediate:!1}}],showActionButtonGroup:!1}),[P,{setModalProps:q,closeModal:x}]=a((a=>e(this,null,(function*(){y(),h.value=a.user_id,v.value=a.dept_id,j.value=a.role_id,F([{field:"deptId",label:"选择部门",component:"ApiSelect",required:!0,componentProps:{api:o,style:{width:"100%"},params:{userId:h.value},labelField:"deptName",valueField:"id"}},{field:"roleId",label:"选择角色",component:"ApiSelect",required:!0,componentProps:{api:s,style:{width:"100%"},params:{userId:h.value},labelField:"roleName",valueField:"id"}}]),q({confirmLoading:!1})}))));function S(){return e(this,null,(function*(){try{yield w();const e=I();v.value=e.deptId,j.value=e.roleId,q({confirmLoading:!0}),x(),b("success",{values:{roleId:j.value,deptId:v.value}})}finally{q({confirmLoading:!1})}}))}return(e,a)=>(n(),p(c(i),f(e.$attrs,{onRegister:c(P),title:"用户信息选择",onOk:S}),{default:u((()=>[m(c(t),{onRegister:c(g)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{b as default};
