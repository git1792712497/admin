var Fo=Object.defineProperty,jo=Object.defineProperties;var Ho=Object.getOwnPropertyDescriptors;var Br=Object.getOwnPropertySymbols;var Uo=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable;var Fr=(n,r,i)=>r in n?Fo(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,jr=(n,r)=>{for(var i in r||(r={}))Uo.call(r,i)&&Fr(n,i,r[i]);if(Br)for(var i of Br(r))zo.call(r,i)&&Fr(n,i,r[i]);return n},Hr=(n,r)=>jo(n,Ho(r));import"./base-c9ac7f1d.js";import{E as Vo}from"./el-card-3d974d2a.js";import{E as Go}from"./el-link-9662ce78.js";import{c as Wo}from"./require-bb924a95.js";import{d as io,l as Ko,o as Yo,c as Xo,b as fn,_ as Or,e as qo,aE as Zo}from"./runtime-core.esm-bundler-763b24c9.js";import"./plugin-vue_export-helper-2c43b310.js";import"./index-f2930724.js";import"./style-be20bb62.js";import"./index-e4b86012.js";import"./icon-bea742d8.js";import"./index-0fe2b22d.js";var oo={exports:{}};(function(n){var r=Object.prototype.hasOwnProperty,i="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(i=!1));function e(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,h,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new e(c,h||u,p),g=i?i+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],d]:u._events[g].push(d):(u._events[g]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new t:delete u._events[l]}function s(){this._events=new t,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)r.call(c,h)&&l.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=i?i+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,d=h.length,g=new Array(d);p<d;p++)g[p]=h[p].fn;return g},s.prototype.listenerCount=function(l){var c=i?i+l:l,h=this._events[c];return h?h.fn?1:h.length:0},s.prototype.emit=function(l,c,h,p,d,g){var _=i?i+l:l;if(!this._events[_])return!1;var y=this._events[_],k=arguments.length,w,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),k){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,h),!0;case 4:return y.fn.call(y.context,c,h,p),!0;case 5:return y.fn.call(y.context,c,h,p,d),!0;case 6:return y.fn.call(y.context,c,h,p,d,g),!0}for(b=1,w=new Array(k-1);b<k;b++)w[b-1]=arguments[b];y.fn.apply(y.context,w)}else{var D=y.length,C;for(b=0;b<D;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),k){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,c);break;case 3:y[b].fn.call(y[b].context,c,h);break;case 4:y[b].fn.call(y[b].context,c,h,p);break;default:if(!w)for(C=1,w=new Array(k-1);C<k;C++)w[C-1]=arguments[C];y[b].fn.apply(y[b].context,w)}}return!0},s.prototype.on=function(l,c,h){return o(this,l,c,h,!1)},s.prototype.once=function(l,c,h){return o(this,l,c,h,!0)},s.prototype.removeListener=function(l,c,h,p){var d=i?i+l:l;if(!this._events[d])return this;if(!c)return a(this,d),this;var g=this._events[d];if(g.fn)g.fn===c&&(!p||g.once)&&(!h||g.context===h)&&a(this,d);else{for(var _=0,y=[],k=g.length;_<k;_++)(g[_].fn!==c||p&&!g[_].once||h&&g[_].context!==h)&&y.push(g[_]);y.length?this._events[d]=y.length===1?y[0]:y:a(this,d)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=i?i+l:l,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,n.exports=s})(oo);const ao=oo.exports;var Jo=typeof window!="undefined"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,hn={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},pn="%c[xgplayer]",S={config:{debug:Jo?3:1},logInfo:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];this.config.debug>=3&&(i=console).log.apply(i,[pn,hn.info,r].concat(e))},logWarn:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];this.config.debug>=1&&(i=console).warn.apply(i,[pn,hn.warn,r].concat(e))},logError:function(r){var i;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];(i=console)[t].apply(i,[pn,hn.error,r].concat(o))}}};function Qo(n){n.logInfo=S.logInfo.bind(n),n.logWarn=S.logWarn.bind(n),n.logError=S.logError.bind(n)}function ea(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ur(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ta(n,r,i){return r&&Ur(n.prototype,r),i&&Ur(n,i),n}var na=function(){function n(r){ea(this,n),this.bufferedList=r}return ta(n,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),n}();function ra(n){return sa(n)||aa(n)||oa(n)||ia()}function ia(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oa(n,r){if(!!n){if(typeof n=="string")return Cn(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cn(n,r)}}function aa(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sa(n){if(Array.isArray(n))return Cn(n)}function Cn(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function re(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?re=function(i){return typeof i}:re=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},re(n)}var m={};m.createDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(n);return e.className=t,e.innerHTML=r,Object.keys(i).forEach(function(o){var a=o,s=i[o];n==="video"||n==="audio"||n==="live-video"?s&&e.setAttribute(a,s):e.setAttribute(a,s)}),e};m.createDomFromHtml=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=n;var e=t.children;return t=null,e.length>0?(e=e[0],i&&m.addClass(e,i),r&&Object.keys(r).forEach(function(o){e.setAttribute(o,r[o])}),e):null}catch(o){return S.logError("util.createDomFromHtml",o),null}};m.hasClass=function(n,r){if(!n||!r)return!1;try{return Array.prototype.some.call(n.classList,function(t){return t===r})}catch(t){var i=n.className&&re(n.className)==="object"?n.getAttribute("class"):n.className;return i&&!!i.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}};m.addClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.add(i)})}catch(i){m.hasClass(n,r)||(n.className&&re(n.className)==="object"?n.setAttribute("class",n.getAttribute("class")+" "+r):n.className+=" "+r)}};m.removeClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.remove(i)})}catch(i){m.hasClass(n,r)&&r.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className&&re(n.className)==="object"?n.setAttribute("class",n.getAttribute("class").replace(e," ")):n.className=n.className.replace(e," ")})}};m.toggleClass=function(n,r){!n||r.split(/\s+/g).forEach(function(i){m.hasClass(n,i)?m.removeClass(n,i):m.addClass(n,i)})};m.classNames=function(){for(var n=arguments,r=[],i=function(o){m.typeOf(n[o])==="String"?r.push(n[o]):m.typeOf(n[o])==="Object"&&Object.keys(n[o]).map(function(a){n[o][a]&&r.push(a)})},t=0;t<arguments.length;t++)i(t);return r.join(" ")};m.findDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,r=arguments.length>1?arguments[1]:void 0,i;try{i=n.querySelector(r)}catch(t){S.logError("util.findDom",t),r.indexOf("#")===0&&(i=n.getElementById(r.slice(1)))}return i};m.getCss=function(n,r){return n.currentStyle?n.currentStyle[r]:document.defaultView.getComputedStyle(n,!1)[r]};m.padStart=function(n,r,i){for(var t=String(i),e=r>>0,o=Math.ceil(e/t.length),a=[],s=String(n);o--;)a.push(t);return a.join("").substring(0,e-s.length)+s};m.format=function(n){if(window.isNaN(n))return"";n=Math.round(n);var r=m.padStart(Math.floor(n/3600),2,0),i=m.padStart(Math.floor((n-r*3600)/60),2,0),t=m.padStart(Math.floor(n-r*3600-i*60),2,0);return(r==="00"?[i,t]:[r,i,t]).join(":")};m.event=function(n){if(n.touches){var r=n.touches[0]||n.changedTouches[0];n.clientX=r.clientX||0,n.clientY=r.clientY||0,n.offsetX=r.pageX-r.target.offsetLeft,n.offsetY=r.pageY-r.target.offsetTop}n._target=n.target||n.srcElement};m.typeOf=function(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]};m.deepCopy=function(n,r){if(m.typeOf(r)==="Object"&&m.typeOf(n)==="Object")return Object.keys(r).forEach(function(i){m.typeOf(r[i])==="Object"&&!(r[i]instanceof Node)?n[i]===void 0||n[i]===void 0?n[i]=r[i]:m.deepCopy(n[i],r[i]):m.typeOf(r[i])==="Array"?n[i]=m.typeOf(n[i])==="Array"?n[i].concat(r[i]):r[i]:n[i]=r[i]}),n};m.deepMerge=function(n,r){return Object.keys(r).map(function(i){if(m.typeOf(r[i])==="Array"&&m.typeOf(n[i])==="Array"){if(m.typeOf(n[i])==="Array"){var t;(t=n[i]).push.apply(t,ra(r[i]))}}else m.typeOf(n[i])===m.typeOf(r[i])&&n[i]!==null&&m.typeOf(n[i])==="Object"&&!(r[i]instanceof window.Node)?m.deepMerge(n[i],r[i]):r[i]!==null&&(n[i]=r[i])}),n};m.getBgImage=function(n){var r=(n.currentStyle||window.getComputedStyle(n,null)).backgroundImage;if(!r||r==="none")return"";var i=document.createElement("a");return i.href=r.replace(/url\("|"\)/g,""),i.href};m.copyDom=function(n){if(n&&n.nodeType===1){var r=document.createElement(n.tagName);return Array.prototype.forEach.call(n.attributes,function(i){r.setAttribute(i.name,i.value)}),n.innerHTML&&(r.innerHTML=n.innerHTML),r}else return""};m.setInterval=function(n,r,i,t){n._interval[r]||(n._interval[r]=setInterval(i.bind(n),t))};m.clearInterval=function(n,r){clearInterval(n._interval[r]),n._interval[r]=null};m.setTimeout=function(n,r,i){n._timers||(n._timers=[]);var t=setTimeout(function(){r(),m.clearTimeout(n,t)},i);return n._timers.push(t),t};m.clearTimeout=function(n,r){var i=n._timers;if(m.typeOf(i)==="Array"){for(var t=0;t<i.length;t++)if(i[t]===r){i.splice(t,1),clearTimeout(r);break}}else clearTimeout(r)};m.clearAllTimers=function(n){var r=n._timers;m.typeOf(r)==="Array"&&(r.map(function(i){clearTimeout(i)}),n._timerIds=[])};m.createImgBtn=function(n,r,i,t){var e=m.createDom("xg-".concat(n),"",{},"xgplayer-".concat(n,"-img"));if(e.style.backgroundImage='url("'.concat(r,'")'),i&&t){var o,a,s;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(u){return i.indexOf(u)>-1&&t.indexOf(u)>-1?(o=parseFloat(i.slice(0,i.indexOf(u)).trim()),a=parseFloat(t.slice(0,t.indexOf(u)).trim()),s=u,!1):!0}),e.style.width="".concat(o).concat(s),e.style.height="".concat(a).concat(s),e.style.backgroundSize="".concat(o).concat(s," ").concat(a).concat(s),n==="start"?e.style.margin="-".concat(a/2).concat(s," auto auto -").concat(o/2).concat(s):e.style.margin="auto 5px auto 5px"}return e};m.Hex2RGBA=function(n,r){var i=[];if(/^\#[0-9A-F]{3}$/i.test(n)){var t="#";n.replace(/[0-9A-F]/ig,function(e){t+=e+e}),n=t}return/^#[0-9A-F]{6}$/i.test(n)?(n.replace(/[0-9A-F]{2}/ig,function(e){i.push(parseInt(e,16))}),"rgba(".concat(i.join(","),", ").concat(r,")")):"rgba(255, 255, 255, 0.1)"};m.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};m.checkIsFunction=function(n){return n&&typeof n=="function"};m.checkIsObject=function(n){return n!==null&&re(n)==="object"};m.hide=function(n){n.style.display="none"};m.show=function(n,r){n.style.display=r||"block"};m.isUndefined=function(n){if(typeof n=="undefined"||n===null)return!0};m.setStyleFromCsstext=function(n,r){if(!!r)if(m.typeOf(r)==="String"){var i=r.replace(/\s+/g,"").split(";");i.map(function(t){if(t){var e=t.split(":");e.length>1&&(n.style[e[0]]=e[1])}})}else Object.keys(r).map(function(t){n.style[t]=r[t]})};function ua(n,r){for(var i=0,t=r.length;i<t;i++)if(n.indexOf(r[i])>-1)return!0;return!1}m.filterStyleFromText=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=n.style.cssText;if(!i)return{};var t=i.replace(/\s+/g,"").split(";"),e={},o={};return t.map(function(a){if(a){var s=a.split(":");s.length>1&&(ua(s[0],r)?e[s[0]]=s[1]:o[s[0]]=s[1])}}),n.setAttribute("style",""),Object.keys(o).map(function(a){n.style[a]=o[a]}),e};m.getStyleFromCsstext=function(n){var r=n.style.cssText;if(!r)return{};var i=r.replace(/\s+/g,"").split(";"),t={};return i.map(function(e){if(e){var o=e.split(":");o.length>1&&(t[o[0]]=o[1])}}),t};m.preloadImg=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(!!n){var t=new window.Image;t.complete?r&&r():(t.onload=function(e){t=null,r&&r(e)},t.onerror=function(e){t=null,i&&i(e)}),t.src=n}};m.stopPropagation=function(n){n&&(n.stopPropagation(),n.cancelable&&n.preventDefault())};m.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};m.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};m.checkTouchSupport=function(){return"ontouchstart"in window};m.getBuffered2=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],t=0;t<n.length;t++)i.push({start:n.start(t)<.5?0:n.start(t),end:n.end(t)});i.sort(function(u,l){var c=u.start-l.start;return c||l.end-u.end});var e=[];if(r)for(var o=0;o<i.length;o++){var a=e.length;if(a){var s=e[a-1].end;i[o].start-s<r?i[o].end>s&&(e[a-1].end=i[o].end):e.push(i[o])}else e.push(i[o])}else e=i;return new na(e)};m.getEventPos=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{x:n.x/r,y:n.y/r,clientX:n.clientX/r,clientY:n.clientY/r,offsetX:n.offsetX/r,offsetY:n.offsetY/r,pageX:n.pageX/r,pageY:n.pageY/r}};m.requestAnimationFrame=function(n){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(r)return r(n)};m.getHostFromUrl=function(n){if(n==null||n===""||typeof n!="string")return"";var r=n.split("/"),i="";return r.length>3&&r[2]&&(i=r[2]),i};m.cancelAnimationFrame=function(n){var r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;r&&r(n)};const f=m;var zr={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},so={get device(){var n=so.os;return n.isPc?"pc":"mobile"},get browser(){if(typeof navigator=="undefined")return"";var n=navigator.userAgent.toLowerCase(),r={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(r).filter(function(i){return r[i].test(n)}))[0]},get os(){if(typeof navigator=="undefined")return{};var n=navigator.userAgent,r=/(?:Windows Phone)/.test(n),i=/(?:SymbianOS)/.test(n)||r,t=/(?:Android)/.test(n),e=/(?:Firefox)/.test(n),o=/(?:iPad|PlayBook)/.test(n)||t&&!/(?:Mobile)/.test(n)||e&&/(?:Tablet)/.test(n),a=/(?:iPhone)/.test(n)&&!o,s=!a&&!t&&!i&&!o,u=/(?:iPad|PlayBook)/.test(n);return{isTablet:o,isPhone:a,isIpad:u,isIos:a||u,isAndroid:t,isPc:s,isSymbian:i,isWindowsPhone:r,isFireFox:e}},get osVersion(){var n=navigator.userAgent,r="";/(?:iPhone)|(?:iPad|PlayBook)/.test(n)?r=zr.ios:r=zr.android;var i=r?r.exec(n):[];if(i&&i.length>=3){var t=i[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator=="undefined")return!1;var n=/(micromessenger)\/([\d.]+)/,r=n.exec(navigator.userAgent.toLocaleLowerCase());if(r)return!0}};const P=so;var la=JSON.parse('"3.0.0-alpha.102-5-0"');const En=la;function ca(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var fa={1:"network",2:"network",3:"decoder",4:"format"},Sr=function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ca(this,n);var t=r&&r.i18n?r.i18n.ERROR_TYPES:null;if(r.video){var e=i.mediaError?i.mediaError:r.video.error||{},o=r.duration,a=r.currentTime,s=r.ended,u=r.src,l=r.currentSrc,c=r.video,h=c.readyState,p=c.networkState,d={playerVersion:En,domain:document.domain,currentTime:a,duration:o,ended:s,readyState:h,networkState:p,src:u||l,errorType:i.errorType,errorCode:i.errorCode||e.code,message:i.errorMessage||e.message,mediaError:e,originError:i.originError?i.originError.stack:""};return i.ext&&Object.keys(i.ext).map(function(k){d[k]=i.ext[k]}),d}else if(arguments.length>1){for(var g={playerVersion:En,domain:document.domain},_=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)g[_[y]]=arguments[y];return g.ex=t?(t[arguments[0]]||{}).msg:"",g}},oe="play",uo="playing",$e="ended",De="pause",un="error",lo="seeking",Ie="seeked",W="timeupdate",Tr="waiting",j="canplay",ha="canplaythrough",ln="durationchange",co="volumechange",Ae="loadeddata",fo="ratechange",ho="progress",po="loadstart",Ne="emptied",pa="stalled",da="suspend",ga="abort",ya="bufferedChange",Cr="focus",go="blur",Er="ready",yo="urlNull",ye="autoplay_started",xr="autoplay_was_prevented",cn="complete",vo="replay",Rr="destroy",Me="urlchange",q="fullscreen_change",Ct="cssFullscreen_change",Et="mini_state_change",Ir="definition_change",va="before_definition_change",mo="after_definition_change",ma="SEI_PARSED",_a="retry",Le="video_resize",xn="pip_change",_o="rotate",bo="screenShot",Rn="playnext",wo="shortcut",Po="xglog",In="user_action";const ba=Object.freeze(Object.defineProperty({__proto__:null,PLAY:oe,PLAYING:uo,ENDED:$e,PAUSE:De,ERROR:un,SEEKING:lo,SEEKED:Ie,TIME_UPDATE:W,WAITING:Tr,CANPLAY:j,CANPLAY_THROUGH:ha,DURATION_CHANGE:ln,VOLUME_CHANGE:co,LOADED_DATA:Ae,RATE_CHANGE:fo,PROGRESS:ho,LOAD_START:po,EMPTIED:Ne,STALLED:pa,SUSPEND:da,ABORT:ga,BUFFER_CHANGE:ya,PLAYER_FOCUS:Cr,PLAYER_BLUR:go,READY:Er,URL_NULL:yo,AUTOPLAY_STARTED:ye,AUTOPLAY_PREVENTED:xr,COMPLETE:cn,REPLAY:vo,DESTROY:Rr,URL_CHANGE:Me,FULLSCREEN_CHANGE:q,CSS_FULLSCREEN_CHANGE:Ct,MINI_STATE_CHANGE:Et,DEFINITION_CHANGE:Ir,BEFORE_DEFINITION_CHANGE:va,AFTER_DEFINITION_CHANGE:mo,SEI_PARSED:ma,RETRY:_a,VIDEO_RESIZE:Le,PIP_CHANGE:xn,ROTATE:_o,SCREEN_SHOT:bo,PLAYNEXT:Rn,SHORTCUT:wo,XGLOG:Po,USER_ACTION:In},Symbol.toStringTag,{value:"Module"}));function ze(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ze=function(i){return typeof i}:ze=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ze(n)}function wa(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Pa(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Vr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ka(n,r,i){return r&&Vr(n.prototype,r),i&&Vr(n,i),n}function Z(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?Z=Reflect.get:Z=function(e,o,a){var s=Oa(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},Z(n,r,i||n)}function Oa(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=H(n),n!==null););return n}function Sa(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&An(n,r)}function An(n,r){return An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},An(n,r)}function Ta(n){var r=xa();return function(){var t=H(n),e;if(r){var o=H(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ca(this,e)}}function Ca(n,r){return r&&(ze(r)==="object"||typeof r=="function")?r:Ea(n)}function Ea(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function H(n){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},H(n)}var Ra=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort"];function dn(n,r){!this||!this.emit||(n==="error"?this.errorHandler(n):this.emit(n,r))}function Ia(n,r){var i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return r[i]&&typeof r[i]=="function"&&r.on(n,r[i]),function(t){var e=n,o={player:r,eventName:n,timeStamp:t.timeStamp,currentTime:r.currentTime,duration:r.duration,paused:r.paused,ended:r.ended,isInternalOp:!!r._internalOp[t.type],muted:r.muted,volume:r.volume,host:f.getHostFromUrl(r.currentSrc),vtype:r.vtype};if(r.removeInnerOP(t.type),e==="timeupdate"&&(r._currentTime=r.video&&r.video.currentTime),e==="durationchange"&&(r._duration=r.video.duration),e==="volumechange"&&(o.isMutedChange=r._lastMuted!==r.muted,r._lastMuted=r.muted),r.videoEventMiddleware[n]){var a=dn.bind(r);try{r.videoEventMiddleware[n].call(r,o,a)}catch(s){throw dn.call(r,e,o),s}}else dn.call(r,e,o)}}var Aa=function(n){Sa(i,n);var r=Ta(i);function i(t){var e;Pa(this,i),e=r.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttributes);var o=t["x5-video-player-type"]||t.x5VideoPlayerType;return P.isWeixin&&P.os.isAndroid&&o&&(e.videoConfig["x5-video-player-type"]=o,delete e.videoConfig.playsinline,delete e.videoConfig["webkit-playsinline"],delete e.videoConfig["x5-playsinline"]),t.loop&&(e.videoConfig.loop="loop"),e.video=f.createDom(e.videoConfig.mediaType,"",e.videoConfig,""),t.defaultPlaybackRate&&(e.video.defaultPlaybackRate=e.video.playbackRate=t.defaultPlaybackRate),f.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.video.muted=!0,e._lastMuted=!0),t.autoplay&&(e.video.autoplay=!0),e._interval={},e.videoEventMiddleware={},e.attachVideoEvents(),e}return ka(i,[{key:"setEventsMiddleware",value:function(e){var o=this;Object.keys(e).map(function(a){o.videoEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var o=this;Object.keys(e).map(function(a){delete o.videoEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(e){var o=this;this.evHandlers||(this._evHandlers=Ra.map(function(a){return wa({},a,Ia(a,o))})),e||(e=this.video),this._evHandlers.map(function(a){var s=Object.keys(a)[0];e.addEventListener(s,a[s],!1)})}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map(function(o){var a=Object.keys(o)[0];e.removeEventListener(Object.keys(o)[0],o[a],!1)})}},{key:"_attachSourceEvents",value:function(e,o){var a=this;e.removeAttribute("src"),o.forEach(function(l){a.video.appendChild(f.createDom("source","",{src:"".concat(l.src),type:"".concat(l.type||"")}))});var s=e.children;this._videoSourceCount=s.length,!this._sourceError&&(this._sourceError=function(l){a._videoSourceCount--,a._videoSourceCount===0&&(a.videoEventMiddleware.error?a.videoEventMiddleware.error.call(a,l,function(){a.errorHandler("error")}):a.errorHandler("error",{code:4,message:"sources load error"}))});for(var u=0;u<s.length;u++)s[u].addEventListener("error",this._sourceError)}},{key:"_detachSourceEvents",value:function(e){var o=e.children;if(!(o.length===0||!this._sourceError)){for(var a=0;a<o.length;a++)o[a].removeEventListener("error",this._sourceError);for(;o.length>0;)e.removeChild(o[0])}}},{key:"errorHandler",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.video&&(this.video.error||o)){var a=this.video.error||o,s=a.code?fa[a.code]:"other",u=a.message;this.video.currentSrc||(u="empty_src",a={code:6,message:u}),this.emit(e,new Sr(this,{errorType:s,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,this.emit("hasstart"))}},{key:"destroy",value:function(){var e=this;this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null;for(var o in this._interval)clearInterval(this._interval[o]),this._interval[o]=null;this.detachVideoEvents(),this._evHandlers.map(function(a){var s=Object.keys(a)[0],u="on".concat(s.charAt(0).toUpperCase()).concat(s.slice(1));typeof e[u]=="function"&&e.off(s,e[u])}),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){var e=this.video?this.video.play():null;return e}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return this.video?this.video.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var o=[0,0];if(!this.video)return o;e||(e=this.video.buffered);var a=this.video.currentTime;if(e)for(var s=0,u=e.length;s<u&&(o[0]=e.start(s),o[1]=e.end(s),!(o[0]<=a&&a<=o[1]));s++);return o[0]-a<=0&&a-o[1]<=0?o:[0,0]}},{key:"autoplay",get:function(){return this.video?this.video.autoplay:!1},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?f.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var o=this.video.buffered;if(!o||o.length===0)return e;for(var a=0;a<o.length;a++)if((o.start(a)<=this.currentTime||o.start(a)<.1)&&o.end(a)>=this.currentTime)return{start:o.start(a),end:o.end(a)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?this.video.currentTime!==void 0?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return this.video?this.video.defaultMuted:!1},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video?this.video.ended:!1}},{key:"error",get:function(){if(!this.video||!this.video.error)return null;var e=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return e[this.video.error.code-1]}},{key:"loop",get:function(){return this.video?this.video.loop:!1},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return this.video?this.video.muted:!1},set:function(e){!this.video||this.video.muted===e||(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return this.video?this.video.paused:!0}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){!this.video||e===1/0||(this.video.defaultPlaybackRate=e,this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return this.video?this.video.preload:!1},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return this.video?this.video.seekable:!1}},{key:"seeking",get:function(){return this.video?this.video.seeking:!1}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){if(!!this.video){if(this.emit(Me,e),this.emit(Tr),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)){this.onWaiting();return}this._detachSourceEvents(this.video),f.typeOf(e)==="Array"?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()}}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e===1/0||!this.video||(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Z(H(i.prototype),"emit",this)).call.apply(a,[this,e,o].concat(u))}},{key:"on",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Z(H(i.prototype),"on",this)).call.apply(a,[this,e,o].concat(u))}},{key:"once",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Z(H(i.prototype),"once",this)).call.apply(a,[this,e,o].concat(u))}},{key:"off",value:function(e,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Z(H(i.prototype),"off",this)).call.apply(a,[this,e,o].concat(u))}},{key:"offAll",value:function(){Z(H(i.prototype),"removeAllListeners",this).call(this)}}]),i}(ao);const La=Aa;function $a(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Gr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Da(n,r,i){return r&&Gr(n.prototype,r),i&&Gr(n,i),n}var Na=function(){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};$a(this,n),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=r}return Da(n,[{key:"openDB",value:function(i){var t=this,e=this,o=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,o);a.onerror=function(s){},a.onsuccess=function(s){t.myDB.db=s.target.result,i.call(e)},a.onupgradeneeded=function(s){var u=s.target.result;s.target.transaction,u.objectStoreNames.contains(e.myDB.ojstore.name)||u.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<t.length;a++)o=e.add(t[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"putData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<t.length;a++)o=e.put(t[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,t,e){var o=this,a=this.myDB.db.transaction(i,"readwrite").objectStore(i),s=a.get(t);s.onerror=function(){e.call(o,null)},s.onsuccess=function(u){var l=u.target.result;e.call(o,l)}}},{key:"deleteData",value:function(i,t){var e=this.myDB.db.transaction(i,"readwrite").objectStore(i);e.delete(t)}},{key:"clearData",value:function(i){var t=this.myDB.db.transaction(i,"readwrite").objectStore(i);t.clear()}}]),n}();const Ma=Na;var Wr=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Kr=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Yr=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function Ba(n){return Ua(n)||Ha(n)||ja(n)||Fa()}function Fa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ja(n,r){if(!!n){if(typeof n=="string")return Ln(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ln(n,r)}}function Ha(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ua(n){if(Array.isArray(n))return Ln(n)}function Ln(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function Fe(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),o=3;o<t;o++)e[o-3]=arguments[o];var a=r.call.apply(r,[n].concat(e));!i||typeof i!="function"||(a&&a.then?a.then(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];i.call.apply(i,[n].concat(u))}):i.call.apply(i,[n].concat(e)))}function xt(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[n]&&(this.__hooks[n]=null),function(){var t=arguments,e=this;if(i.pre)try{var o;(o=i.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[n])try{var a,s=(a=this.__hooks[n]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then(function(u){u!==!1&&Fe.apply(void 0,[e,r,i.next].concat(Ba(t)))}).catch(function(u){throw u}):Fe.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments))):s===void 0&&Fe.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(n,"] >> ").concat(u.message),u}else Fe.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Rt(n,r){var i=this.__hooks;if(!!i)return i.hasOwnProperty(n)?(i&&(i[n]=r),!0):(console.warn("has no supported hook which name [".concat(n,"]")),!1)}function Xr(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){for(var r=this.plugins[n.toLowerCase()],i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return r.useHooks&&r.useHooks.apply(r,t)}}function ko(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.__hooks={},r&&r.map(function(i){n.__hooks[i]=null}),Object.defineProperty(n,"hooks",{get:function(){return n.__hooks&&Object.keys(n.__hooks).map(function(t){if(n.__hooks[t])return t})}})}function Oo(n){n.__hooks=null}function pe(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),o=3;o<t;o++)e[o-3]=arguments[o];if(n.__hooks&&n.__hooks[r]){var a,s=(a=n.__hooks[r]).call.apply(a,[n,n].concat(e));if(s&&s.then)s.then(function(u){return u===!1?null:i.call.apply(i,[n,n].concat(e))}).catch(function(u){console.warn("[runHooks]".concat(r," reject"),u.message)});else if(s!==!1)return i.call.apply(i,[n,n].concat(e))}else return i.call.apply(i,[n,n].concat(e))}function qr(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Zr(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?qr(Object(i),!0).forEach(function(t){za(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):qr(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function za(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Va(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Jr(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ga(n,r,i){return r&&Jr(n.prototype,r),i&&Jr(n,i),n}function gn(n,r){S.logError("[".concat(n,"] event or callback cant be undefined or null when call ").concat(r))}var Be=function(){function n(r){Va(this,n),f.checkIsFunction(this.beforeCreate)&&this.beforeCreate(r),ko(this),this.__args=r,this.__events={},this.config=r.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(r)}return Ga(n,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"on",value:function(i,t){var e=this;if(!i||!t||!this.player){gn(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=t,this.player.on(i,t)):Array.isArray(i)&&i.forEach(function(o){e.__events[o]=t,e.player.on(o,t)})}},{key:"once",value:function(i,t){if(!i||!t||!this.player){gn(this.pluginName,"plugin.once(event, callback)");return}this.player.once(i,t)}},{key:"off",value:function(i,t){var e=this;if(!i||!t||!this.player){gn(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,t)):Array.isArray(i)&&i.forEach(function(o){delete e.__events[i],e.player.off(o,t)})}},{key:"offAll",value:function(){var i=this;Object.keys(this.__events).map(function(t){i.__events[t]&&i.off(t,i.__events[t]),t&&delete i.__events[t]}),this.__events={}}},{key:"emit",value:function(i){var t;if(!!this.player){for(var e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];(t=this.player).emit.apply(t,[i].concat(o))}}},{key:"emitUserAction",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Zr(Zr({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(i,t,o)}},{key:"hook",value:function(i,t){return xt.call.apply(xt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,t){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return Rt.call.apply(Rt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(!!this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:i,options:t})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,t=this.player,e=this.pluginName;this.offAll(),f.clearAllTimers(this),f.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(o){i[o]=null}),t.unRegisterPlugin(e),Oo(this)}}],[{key:"defineGetterOrSetter",value:function(i,t){for(var e in t)Object.defineProperty(i,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),n}(),Wa=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var se=Element.prototype;se.matches=se.matchesSelector||se.mozMatchesSelector||se.msMatchesSelector||se.oMatchesSelector||se.webkitMatchesSelector}function Ka(n,r){for(;n&&n.nodeType!==Wa;){if(typeof n.matches=="function"&&n.matches(r))return n;n=n.parentNode}}var Ya=Ka,Xa=Ya;function yn(n,r,i,t,e){var o=Za.apply(this,arguments);return n.addEventListener(i,o,e),{destroy:function(){n.removeEventListener(i,o,e)}}}function qa(n,r,i,t,e){return typeof n.addEventListener=="function"?yn.apply(null,arguments):typeof i=="function"?yn.bind(null,document).apply(null,arguments):(typeof n=="string"&&(n=document.querySelectorAll(n)),Array.prototype.map.call(n,function(o){return yn(o,r,i,t,e)}))}function Za(n,r,i,t){return function(e){e.delegateTarget=Xa(e.target,r),e.delegateTarget&&t.call(n,e)}}var Qr=qa;function Ja(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ei(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Qa(n,r,i){return r&&ei(n.prototype,r),i&&ei(n,i),n}function de(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?de=Reflect.get:de=function(e,o,a){var s=es(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},de(n,r,i||n)}function es(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=Q(n),n!==null););return n}function ts(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&$n(n,r)}function $n(n,r){return $n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$n(n,r)}function ns(n){var r=os();return function(){var t=Q(n),e;if(r){var o=Q(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return rs(this,e)}}function rs(n,r){return r&&(K(r)==="object"||typeof r=="function")?r:is(n)}function is(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function os(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Q(n){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Q(n)}function K(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K=function(i){return typeof i}:K=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K(n)}var as={CONTROLS:"controls",ROOT:"root"},T={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function vn(n){return n?n.indexOf&&/^http/.test(n):!1}function ss(n,r){return K(n)==="object"&&n.class&&typeof n.class=="string"?"".concat(r," ").concat(n.class):r}function us(n,r){return K(n)==="object"&&n.attr&&K(n.attr)==="object"&&Object.keys(n.attr).map(function(i){r[i]=n.attr[i]}),r}function ti(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",o=null;if(n instanceof window.Element)return f.addClass(n,i),Object.keys(t).map(function(a){n.setAttribute(a,t[a])}),n;if(vn(n)||vn(n.url))return t.src=vn(n)?n:n.url||"",o=f.createDom(n.tag||"img","",t,"xg-img ".concat(i)),o;if(typeof n=="function")try{return o=n(),o instanceof window.Element?(f.addClass(o,i),Object.keys(t).map(function(a){o.setAttribute(a,t[a])}),o):(S.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return S.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof n=="string"?f.createDomFromHtml(n,t,i):(S.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is invalid")),null)}function ls(n,r){var i=r.config.icons||r.playerConfig.icons;Object.keys(n).map(function(t){var e=n[t],o=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},s=null;i&&i[t]&&(o=ss(i[t],o),a=us(i[t],a),s=ti(i[t],t,o,a,r.pluginName)),!s&&e&&(s=ti(e.icon?e.icon:e,a,o,{},r.pluginName)),r.icons[t]=s})}function cs(n,r){Object.keys(n).map(function(i){Object.defineProperty(r.langText,i,{get:function(){var e=r.lang;return n[i][e]||n[i].zh}})})}var O=function(n){ts(i,n);var r=ns(i);function i(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ja(this,i),t=r.call(this,e),t.__delegates=[],t}return Qa(i,[{key:"__init",value:function(e){if(de(Q(i.prototype),"__init",this).call(this,e),!!e.root){var o=e.root,a=null;this.icons={},this.root=null,this.parent=null;var s=this.registerIcons()||{};ls(s,this),this.langText={};var u=this.registerLanguageTexts()||{};cs(u,this);var l="";try{l=this.render()}catch(p){throw S.logError("Plugin:".concat(this.pluginName,":render"),p),new Error("Plugin:".concat(this.pluginName,":render:").concat(p.message))}if(l)a=i.insert(l,o,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=f.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),o.appendChild(a);else return;this.root=a,this.parent=o;var c=this.config.attr||{},h=this.config.style||{};this.setAttr(c),this.setStyle(h),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(!!this.root){this._children=[];var o=this.children();o&&K(o)==="object"&&Object.keys(o).length>0&&Object.keys(o).map(function(a){var s=a,u=o[s],l={root:e.root},c,h;typeof u=="function"?(c=e.config[s]||{},h=u):K(u)==="object"&&typeof u.plugin=="function"&&(c=u.options?f.deepCopy(e.config[s]||{},u.options):e.config[s]||{},h=u.plugin),l.config=c,c.index!==void 0&&(l.index=c.index),c.root&&(l.root=c.root),e.registerPlugin(h,l,s)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function o(l,c){for(var h=0;h<l.children.length;h++)l.children[h].children.length>0?o(l.children[h],c):c(l.children[h])}var a=this.root,s=this.i18n,u=this.langText;a&&o(a,function(l){var c=l.getAttribute&&l.getAttribute("lang-key");if(!!c){var h=s[c.toUpperCase()]||u[c];h&&(l.innerHTML=typeof h=="function"?h(e):h)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},s=this.langText;e.setAttribute&&e.setAttribute("lang-key",o);var u=a[o.toUpperCase()]||s[o];u&&(e.innerHTML=u)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";o.root=o.root||this.root;var s=de(Q(i.prototype),"registerPlugin",this).call(this,e,o,a);return this._children.push(s),s}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(!!this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,o,a){var s=this;if(arguments.length<3&&typeof o=="function")Array.isArray(e)?e.forEach(function(l){s.bindEL(l,o)}):this.bindEL(e,o);else{var u=i.delegate.call(this,this.root,e,o,a);this.__delegates=this.__delegates.concat(u)}}},{key:"unbind",value:function(e,o){var a=this;if(arguments.length<3&&typeof o=="function")Array.isArray(e)?e.forEach(function(l){a.unbindEL(l,o)}):this.unbindEL(e,o);else for(var s="".concat(e,"_").concat(o),u=0;u<this.__delegates.length;u++)if(this.__delegates[u].key===s){this.__delegates[u].destroy(),this.__delegates.splice(u,1);break}}},{key:"setStyle",value:function(e,o){var a=this;if(!!this.root){if(f.typeOf(e)==="String")return this.root.style[e]=o;f.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.style[s]=e[s]})}}},{key:"setAttr",value:function(e,o){var a=this;if(!!this.root){if(f.typeOf(e)==="String")return this.root.setAttribute(e,o);f.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.setAttribute(s,e[s])})}}},{key:"setHtml",value:function(e,o){!this.root||(this.root.innerHTML=e,typeof o=="function"&&o())}},{key:"bindEL",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;!this.root||"on".concat(e)in this.root&&typeof o=="function"&&this.root.addEventListener(e,o,a)}},{key:"unbindEL",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;!this.root||"on".concat(e)in this.root&&typeof o=="function"&&this.root.removeEventListener(e,o,a)}},{key:"show",value:function(e){if(!!this.root){this.root.style.display=e!==void 0?e:"block";var o=window.getComputedStyle(this.root,null),a=o.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,o){if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!o||!(o instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(o):e.appendChild(o)}catch(a){return S.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,o=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){o.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),de(Q(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null})}}],[{key:"insert",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=o.children.length,u=Number(a),l=e instanceof window.Node;if(s){for(var c=0,h=null,p="";c<s;c++){h=o.children[c];var d=Number(h.getAttribute("data-index"));if(d>=u){p="beforebegin";break}else d<u&&(p="afterend")}return l?p==="afterend"?o.appendChild(e):o.insertBefore(e,h):h.insertAdjacentHTML(p,e),p==="afterend"?o.children[o.children.length-1]:o.children[c]}else return l?o.appendChild(e):o.insertAdjacentHTML("beforeend",e),o.children[o.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,o,a,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=[];if(e instanceof window.Node&&typeof s=="function")if(Array.isArray(a))a.forEach(function(h){var p=Qr(e,o,h,s,u);p.key="".concat(o,"_").concat(h),l.push(p)});else{var c=Qr(e,o,a,s,u);c.key="".concat(o,"_").concat(a),l.push(c)}return l}},{key:"ROOT_TYPES",get:function(){return as}},{key:"POSITIONS",get:function(){return T}}]),i}(Be);function fs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ni(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function hs(n,r,i){return r&&ni(n.prototype,r),i&&ni(n,i),n}var ps=function(){function n(){var r=this;if(fs(this,n),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(i){var t=new Date().getTime();t-r.timeStamp<100||(r.timeStamp=t,r.__trigger(i))}),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return hs(n,[{key:"addObserver",value:function(i,t){if(!!this.observer){this.observer&&this.observer.observe(i);for(var e=this.__handlers,o=-1,a=0;a<e.length;a++)e[a]&&i===e[a].target&&(o=a);o>-1?this.__handlers[o].handler=t:this.__handlers.push({target:i,handler:t})}}},{key:"unObserver",value:function(i){var t=-1;this.__handlers.map(function(e,o){i===e.target&&(t=o)});try{this.observer&&this.observer.unobserve(i)}catch(e){}this.observer&&this.observer.unobserve(i),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&i===t[e].target){try{t[e].handler(i)}catch(o){console.error(o)}return!0}return!1}},{key:"__trigger",value:function(i){for(var t=0;t<i.length;t++){var e=this.__runHandler(i[t].target);if(e)break}}}]),n}(),Oe=null;function ds(n,r){return Oe||(Oe=new ps),Oe.addObserver(n,r),Oe}function gs(n,r){Oe.unObserver(n,r)}function ys(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]==="Object"}var vs={init:function(r){var i=r._pluginInfoId;i||(i=new Date().getTime(),r._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!r.config.closeResizeObserver&&ds(r.root,function(){r.getVideoSize()}),Object.keys(this.pluginGroup).length===0&&(r.isUserActive=!0),this.pluginGroup[i]={_player:r,_originalOptions:r.config||{}}},checkPlayerRoot:function(r){if(this.pluginGroup){for(var i=Object.keys(this.pluginGroup),t=0;t<i.length;t++){var e=this.pluginGroup[i[t]]._player;if(e.root===r)return e}return null}return null},lazyRegister:function(r,i){var t=this,e=i.timeout||1500;return Promise.race([i.loader().then(function(o){var a;o&&o.__esModule?a=o.default:a=o,t.register(r,a,o.options)}),new Promise(function(o,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(r,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!r||!i||typeof i!="function"||i.prototype===void 0)){var e=r._pluginInfoId;(!e||!this.pluginGroup||!this.pluginGroup[e])&&(this.init(r),e=r._pluginInfoId),this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins=[]);var o=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var s=t.pluginName||i.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported()){console.warn("not supported plugin [".concat(s,"]"));return}t.config||(t.config={});for(var u=Object.keys(a),l=0;l<u.length;l++)if(s.toLowerCase()===u[l].toLowerCase()){var c=a[u[l]];ys(c)&&(t.config=Object.assign({},t.config,a[u[l]]));break}i.defaultConfig&&Object.keys(i.defaultConfig).map(function(p){typeof t.config[p]=="undefined"&&(t.config[p]=i.defaultConfig[p])}),t.root?typeof t.root=="string"&&(t.root=r[t.root]):t.root=r.root,t.index=t.config.index||0;try{o[s.toLowerCase()]&&(this.unRegister(e,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var h=new i(t);return o[s.toLowerCase()]=h,o[s.toLowerCase()].func=i,h&&typeof h.afterCreate=="function"&&h.afterCreate(),h}catch(p){throw console.error(p),p}}},unRegister:function(r,i){r._pluginInfoId&&(r=r._pluginInfoId),i=i.toLowerCase();try{var t=this.pluginGroup[r]._plugins[i];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[r]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(r,"] error"),e)}},deletePlugin:function(r,i){var t=r._pluginInfoId;if(t&&this.pluginGroup&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins){var e=this.pluginGroup[t]._plugins;delete e[i]}},getPlugins:function(r){var i=r._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(r,i){var t=r._pluginInfoId;if(!this.pluginGroup||!t)return null;var e=i.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(r){var i=this;function t(e){return!e||!e.then?new Promise(function(o){o()}):e}return new Promise(function(e){if(!!i.pluginGroup){var o;return r._loadingPlugins&&r._loadingPlugins.length?o=Promise.all(r._loadingPlugins):o=Promise.resolve(),o.then(function(){var a=r._pluginInfoId;if(!i.pluginGroup[a]){e();return}for(var s=i.pluginGroup[a]._plugins,u=[],l=0,c=Object.keys(s);l<c.length;l++){var h=c[l];if(s[h]&&s[h].beforePlayerInit)try{var p=s[h].beforePlayerInit();u.push(t(p))}catch(d){throw u.push(t(null)),d}}Promise.all([].concat(u)).then(function(){e()}).catch(function(d){console.error(d),e()})})}})},afterInit:function(r){var i=r._pluginInfoId;if(!(!this.pluginGroup||!i))for(var t=this.pluginGroup[i]._plugins,e=0,o=Object.keys(t);e<o.length;e++){var a=o[e];t[a]&&t[a].afterPlayerInit&&t[a].afterPlayerInit()}},setLang:function(r,i){var t=i._pluginInfoId;if(!(!this.pluginGroup||!t)){var e=this.pluginGroup[t]._plugins;Object.keys(e).map(function(o){if(e[o].updateLang)e[o].updateLang(r);else try{e[o].lang=r}catch(a){console.warn("".concat(o," setLang"))}})}},reRender:function(r){var i=r._pluginInfoId;if(!!i){for(var t={},e=this.pluginGroup[i]._plugins,o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];t[s]={plugin:e[s].func,options:e[s]._args},this.unRegister(i,s)}for(var u=0,l=Object.keys(t);u<l.length;u++){var c=l[u];this.register(i,c,t[c].plugin,t[c].options)}}},onPluginsReady:function(r){var i=r._pluginInfoId,t=this.pluginGroup[i]._plugins;!i||!t||Object.keys(t).map(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})},setCurrentUserActive:function(r,i){if(!(!this.pluginGroup||!this.pluginGroup[r])){if(!i)return this.pluginGroup[r]._player.isUserActive=i,r;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var o=this.pluginGroup[t[e]];if(o&&o._player){this.pluginGroup[t[e]]._player.isUserActive=!1;break}}return this.pluginGroup[r]._player.isUserActive=i,r}},getCurrentUseActiveId:function(){if(!!this.pluginGroup){for(var r=Object.keys(this.pluginGroup),i=0;i<r.length;i++){var t=this.pluginGroup[r[i]];if(t&&t._player&&t._player.isUserActive)return r[i]}return null}},destroy:function(r){var i=r._pluginInfoId;if(!!this.pluginGroup[i]){gs(r.root);for(var t=this.pluginGroup[i]._plugins,e=0,o=Object.keys(t);e<o.length;e++){var a=o[e];this.unRegister(i,a)}var s=r.isUseActive;if(delete this.pluginGroup[i],delete r._pluginInfoId,s){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}};const x=vs,v={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function ms(){return{id:"",el:null,url:"",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function mn(n){return Ps(n)||ws(n)||bs(n)||_s()}function _s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(n,r){if(!!n){if(typeof n=="string")return Dn(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Dn(n,r)}}function ws(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ps(n){if(Array.isArray(n))return Dn(n)}function Dn(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}var ks=function(r,i){var t,e,o,a;i.preset&&i.options?a=new i.preset(i.options,r.config):a=new i({},r.config);var s=a,u=s.plugins,l=u===void 0?[]:u,c=s.ignores,h=c===void 0?[]:c,p=s.icons,d=p===void 0?{}:p,g=s.i18n,_=g===void 0?[]:g;r.config.plugins||(r.config.plugins=[]),r.config.ignores||(r.config.ignores=[]),(t=r.config.plugins).push.apply(t,mn(l)),(e=r.config.ignores).push.apply(e,mn(h)),Object.keys(d).map(function(y){r.config.icons[y]||(r.config.icons[y]=d[y])}),(o=r.config.i18n).push.apply(o,mn(_))};function Ve(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ve=function(i){return typeof i}:Ve=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ve(n)}function Os(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ri(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ss(n,r,i){return r&&ri(n.prototype,r),i&&ri(n,i),n}function Ge(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?Ge=Reflect.get:Ge=function(e,o,a){var s=Ts(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},Ge(n,r,i||n)}function Ts(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=ve(n),n!==null););return n}function Cs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Nn(n,r)}function Nn(n,r){return Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Nn(n,r)}function Es(n){var r=Rs();return function(){var t=ve(n),e;if(r){var o=ve(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return xs(this,e)}}function xs(n,r){return r&&(Ve(r)==="object"||typeof r=="function")?r:Se(n)}function Se(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function ve(n){return ve=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ve(n)}function ii(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Is=function(n){Cs(i,n);var r=Es(i);function i(){var t;Os(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),ii(Se(t),"onMouseEnter",function(s){var u=Se(t),l=u.player;l.userTimer&&(f.clearTimeout(l,l.userTimer),clearTimeout(l.userTimer))}),ii(Se(t),"onMouseLeave",function(){var s=Se(t),u=s.player,l=s.playerConfig,c=l.closeControlsBlur?200:l.inactive;u.focus({delay:c})}),t}return Ss(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.controls=="boolean"&&(e.config.disable=!e.player.config.controls),!e.config.mode&&P.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,o=this.config,a=o.disable,s=o.height,u=o.mode,l=o.autoHide;if(!a){u==="flex"&&this.player.addClass(v.FLEX_CONTROLS),l&&this.player.addClass(v.AUTOHIDE);var c={height:"".concat(s,"px")};Object.keys(c).map(function(h){e.root.style[h]=c[h]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Et,function(h){h?f.addClass(e.root,"mini-controls"):f.removeClass(e.root,"mini-controls")}),P.device!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&f.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){f.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){f.addClass(this.root,"show")}},{key:"hide",value:function(){f.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(!!this.root){var s=e.defaultConfig||{};if(!o.root){var u=o.position?o.position:o.config&&o.config.position?o.config.position:s.position;switch(u){case T.CONTROLS_LEFT:o.root=this.left;break;case T.CONTROLS_RIGHT:o.root=this.right;break;case T.CONTROLS_CENTER:o.root=this.center;break;case T.CONTROLS:o.root=this.root;break;default:o.root=this.left}return Ge(ve(i.prototype),"registerPlugin",this).call(this,e,o,a)}}}},{key:"destroy",value:function(){P.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,o=e.mode,a=e.autoHide,s=e.initShow,u=e.disable;if(!u){var l=f.classNames({"xgplayer-controls":!0},{"flex-controls":o==="flex"},{"bottom-controls":o==="bottom"},{control_autohide:a},{controls_permanent:!a},{"xgplayer-controls-initshow":s||!a});return'<xg-controls class="'.concat(l,`" unselectable="on" onselectstart="return false">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(O);const As=Is,Ls={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}};var N={},So={},Mn=[],We={};function To(){Object.keys(N.en).map(function(n){So[n]=n.toLowerCase()})}function Co(n){var r=[];f.typeOf(n)!=="Array"?r=Object.keys(n).map(function(i){var t=i==="zh"?"zh-cn":i;return{LANG:t,TEXT:n[i]}}):r=n,r.map(function(i){N[i.LANG]?f.deepMerge(N[i.LANG]||{},i.TEXT||{}):We[i.LANG]=i.TEXT}),To()}function Eo(n){var r=n.LANG,i=n.TEXT||{};N[r]||Mn.push(r),N[r]?f.deepMerge(i,N[r]):N[r]=i,We[r]&&(Co([{LANG:r,TEXT:We[r]}]),delete We[r]),r==="zh-cn"&&(N.zh=N["zh-cn"]),To()}Eo(Ls);var $s={get textKeys(){return So},get langKeys(){return Mn},get lang(){var n={};return Mn.map(function(r){n[r]=N[r]}),n.zh=N["zh-cn"],n},extend:Co,use:Eo};const ne=$s;function Ke(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ke=function(i){return typeof i}:Ke=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ke(n)}function oi(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function _n(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?oi(Object(i),!0).forEach(function(t){Ar(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):oi(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Ds(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ai(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ns(n,r,i){return r&&ai(n.prototype,r),i&&ai(n,i),n}function F(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?F=Reflect.get:F=function(e,o,a){var s=Ms(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},F(n,r,i||n)}function Ms(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=$(n),n!==null););return n}function Bs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Bn(n,r)}function Bn(n,r){return Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Bn(n,r)}function Fs(n){var r=js();return function(){var t=$(n),e;if(r){var o=$(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return xo(this,e)}}function xo(n,r){return r&&(Ke(r)==="object"||typeof r=="function")?r:Te(n)}function Te(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function js(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function $(n){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$(n)}function Ar(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Hs=["play","pause","replay","retry"],Lr=function(n){Bs(i,n);var r=Fs(i);function i(t){var e;Ds(this,i);var o=f.deepMerge(ms(),t);e=r.call(this,o),ko(Te(e),Hs),e.config=o,Qo(Te(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var s=e.config.presets.indexOf("default");s>=0&&a&&(e.config.presets[s]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.isReady=!1,e.isPlaying=!1,e.isSeeking=!1,e.isCanplay=!1,e._runPending=!1,e.rotateDeg=0,e.isActive=!1,e.isCssfullScreen=!1,e.fullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.topBar=null,e.root=null,P.os.isAndroid&&P.osVersion>0&&P.osVersion<6&&(e.config.autoplay=!1),e.database=new Ma,e.isUserActive=!1;var u=e._initDOM();if(!u)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),xo(e);e._bindEvents(),e._registerPresets(),e._registerPlugins(),x.onPluginsReady(Te(e)),f.setTimeout(Te(e),function(){e.emit(Er),e.onReady&&e.onReady(),e.isReady=!0},0);var l=e.config,c=l.definition,h=l.url;return!h&&c&&c.list&&c.list.length>0&&c.defaultDefinition&&c.list.map(function(p){p.definition===c.defaultDefinition&&(e.config.url=p.url,e.curDefinition=p.definition)}),(e.config.videoInit||e.config.autoplay)&&(e.hasStart||e.start()),e}return Ns(i,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var o=this.config.el;if(o&&o.nodeType===1)this.root=o;else return this.emit(un,new Sr("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var a=x.checkPlayerRoot(this.root);a&&(S.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),a.destroy()),this._initBaseDoms();var s=this.constructor.XgVideoProxy;if(s&&this.videoConfig.mediaType===s.mediaType){var u=this.innerContainer||this.root;this.detachVideoEvents(this.video);var l=new s(u,this.config,this.videoConfig);this.attachVideoEvents(l),this.video=l}if(this.config.controls){var c=x.register(this,As);this.controls=c}var h=this.config.isMobileSimulateMode?"mobile":P.device;if(this.addClass("".concat(v.DEFAULT," ").concat(v.ACTIVE," xgplayer-").concat(h," ").concat(this.config.controls?"":v.NO_CONTROLS)),this.config.autoplay?this.addClass(v.ENTER):this.addClass(v.NO_START),this.config.fluid){var p={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(this.config.height*100/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(p).map(function(d){e.root.style[d]=p[d]})}else["width","height"].map(function(d){e.config[d]&&(typeof e.config[d]!="number"?e.root.style[d]=e.config[d]:e.root.style[d]="".concat(e.config[d],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=f.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=f.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=f.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=f.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(a){e.on(a,e["on"+a.charAt(0).toUpperCase()+a.slice(1)])});var o=function(){e.fullscreen=!1,e._fullScreenOffset=null};this.onFullscreenChange=function(a,s){var u=f.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(In,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,fullscreen:e.fullscreen}),s||u&&(u===e._fullscreenEl||u.tagName==="VIDEO"))f.setTimeout(e,function(){e.getVideoSize()},100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,u,v.FULLSCREEN),e.emit(q,!0,e._fullScreenOffset),e.isCssfullScreen&&e.exitCssFullscreen();else if(e.fullscreen){f.setTimeout(e,function(){e.getVideoSize()},100);var l=e._fullScreenOffset,c=e.config;if(c.needFullscreenScroll)try{window.scrollTo(l.left,l.top),f.setTimeout(e,function(){o()},50)}catch(h){S.logError(h),o()}else!e.config.closeFocusVideoFocus&&e.video.focus(),o();e.isCssfullScreen?e.removeClass(v.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,v.FULLSCREEN),e._fullscreenEl=null,e.emit(q,!1)}},Wr.forEach(function(a){document&&document.addEventListener(a,e.onFullscreenChange)}),this.__webkitbeginfullscreen=function(a){e._fullscreenEl=e.video,e.onFullscreenChange(a,!0)},this.__webkitendfullscreen=function(a){e.onFullscreenChange(a,!1)},P.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once("play",this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Wr.forEach(function(o){document.removeEventListener(o,e.onFullscreenChange)}),this.playFunc&&this.off("play",this.playFunc),this.canPlayFunc&&this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var o=this;if(!!this.video&&!((!e||e===""||f.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(yo),S.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this.canPlayFunc=function(){if(!!o.config){var u=o.config,l=u.autoplay,c=u.startTime,h=u.defaultPlaybackRate;S.logInfo("player","canPlayFunc",c),c&&(o.currentTime=c>o.duration?o.duration:c,o.config.startTime=0),h!==1&&(o.playbackRate=h),l&&o.videoPlay(),o.off(j,o.canPlayFunc),o.removeClass(v.ENTER)}},this._detachSourceEvents(this.video),f.typeOf(e)==="Array"?this._attachSourceEvents(this.video,e):this.video.src=e,f.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc);var a=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!a.contains(this.video)&&a.insertBefore(this.video,a.firstChild);var s=this.video.readyState;S.logInfo("_startInit readyState",s),this.config.autoplay&&(!(/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src))&&this.load(),(P.os.isIpad||P.os.isPhone)&&this.videoPlay()),s>=2?this.canPlayFunc():this.once(j,this.canPlayFunc),f.setTimeout(this,function(){o.emit(cn)},1),this.hasStart||x.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var o=this.config.ignores||[],a=this.config.plugins||[],s=this.config.i18n||[];s.map(function(l){ne.use(l)});var u=o.join("||").toLowerCase().split("||");a.map(function(l){try{var c=l.plugin?l.plugin.pluginName:l.pluginName;if(c&&u.indexOf(c.toLowerCase())>-1)return null;if(l.lazy&&l.loader){var h=x.lazyRegister(e,l);l.forceBeforeInit&&(h.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}).catch(function(p){S.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}),e._loadingPlugins.push(h));return}return e.registerPlugin(l)}catch(p){return S.logError("_registerPlugins:",p),null}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(o){ks(e,o)})}},{key:"registerPlugin",value:function(e,o){var a=null,s=null;e.plugin&&typeof e.plugin=="function"?(a=e.plugin,s=e.options):(a=e,s={}),o&&(s.config=o);for(var u=Object.keys(this.config),l=0;l<u.length;l++)if(a.pluginName.toLowerCase()===u[l].toLowerCase()){var c=this.config[u[l]];f.typeOf(c)==="Object"&&(c.root&&(s.root=c.root),c.position&&(s.position=c.position));break}var h=s.position?s.position:s.config&&s.config.position||a.defaultConfig&&a.defaultConfig.position,p=O.POSITIONS;if(!s.root&&typeof h=="string"&&h.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(a,s,a.pluginName);if(!s.root)switch(h){case p.ROOT_RIGHT:s.root=this.rightBar;break;case p.ROOT_LEFT:s.root=this.leftBar;break;case p.ROOT_TOP:s.root=this.topBar;break;default:s.root=this.innerContainer||this.root;break}return x.register(this,a,s)}},{key:"deregister",value:function(e){typeof e=="string"?x.unRegister(this,e):e instanceof Be&&x.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return x.getPlugins(this)}},{key:"getPlugin",value:function(e){var o=x.findPlugin(this,e);return o&&o.pluginName?o:null}},{key:"addClass",value:function(e){!this.root||f.hasClass(this.root,e)||f.addClass(this.root,e)}},{key:"removeClass",value:function(e){!this.root||f.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(!!this.root)return f.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,o){!this.root||this.root.setAttribute(e,o)}},{key:"removeAttribute",value:function(e,o){!this.root||this.root.removeAttribute(e,o)}},{key:"start",value:function(e){var o=this;if(!this.hasStart)return this.hasStart=!0,x.beforeInit(this).then(function(){if(!!o.config){e||(e=o.url||o.config.url);var a=o._startInit(e);return a}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",S.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(e,o){this.src=e}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(!this.hasStart){this.removeClass(v.NO_START),this.addClass(v.ENTER);var o=this.start();o&&o.then(function(s){!e.config.autoplay&&e.videoPlay()});return}this.isPlaying||(this.removeClass(v.NO_START),!this.isCanplay&&this.addClass(v.ENTER));var a=F($(i.prototype),"play",this).call(this);return a!==void 0&&a&&a.then?a.then(function(){e.removeClass(v.NOT_ALLOW_AUTOPLAY),e.addClass(v.PLAYING),e.isPlaying||(S.logInfo(">>>>playPromise.then"),e.isPlaying=!0,e.emit(ye))}).catch(function(s){if(S.logWarn(">>>>playPromise.catch",s.name),e.video&&e.video.error){e.onError(),e.removeClass(v.ENTER);return}s.name==="NotAllowedError"&&(e._errorTimer=f.setTimeout(e,function(){e._errorTimer=null,e.emit(xr),e.addClass(v.NOT_ALLOW_AUTOPLAY),e.removeClass(v.ENTER),e.pause()},0))}):(S.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(v.NOT_ALLOW_AUTOPLAY),this.removeClass(v.NO_START),this.removeClass(v.ENTER),this.addClass(v.PLAYING),this.emit(ye))),a}},{key:"videoPause",value:function(){F($(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(v.PAUSED),pe(this,"play",function(){e.videoPlay()})}},{key:"pause",value:function(){var e=this;pe(this,"pause",function(){F($(i.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,o){var a=this;if(!(!this.video||isNaN(Number(e)))){var s=this.config,u=s.isSeekedPlay,l=s.seekedStatus,c=o||(u?"play":l);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(j,function(){switch(a.removeClass(v.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:!a.paused&&a.play()}}),this.isPlaying?this.currentTime=e:(this.removeClass(v.NO_START),this.addClass(v.ENTER),this.currentTime=e,c==="play"&&this.play())}}},{key:"changeDefinition",value:function(e,o){var a=this;this.emit(Ir,{from:o,to:e});var s=this.currentTime,u=this.paused;if(this.curDefinition=e.definition,!this.hasStart){this.config.url=e.url;return}this.switchURL?this.switchURL(e.url):this.src=e.url;var l=function(){a.currentTime=s,u&&a.once("canplay",function(){a.pause()}),a.emit(mo,{from:o,to:e})};P.os.isAndroid?this.once("timeupdate",function(){l()}):this.once("canplay",function(){l()}),this.play()}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var e=this,o=v.NOT_ALLOW_AUTOPLAY,a=v.PLAYING,s=v.NO_START,u=v.PAUSED,l=v.REPLAY,c=v.ENTER,h=v.ENDED,p=v.ERROR,d=v.LOADING,g=[o,a,s,u,l,c,h,p,d];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,g.forEach(function(_){e.removeClass(_)}),this.addClass(v.ENTER),this.emit(Ne)}},{key:"destroy",value:function(){var e=this,o=this.innerContainer,a=this.root,s=this.video;if(!(!a||!s)){if(this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),f.clearAllTimers(this),this.emit(Rr),x.destroy(this),Oo(this),F($(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(h){}if(o)for(var u=o.children,l=0;l<u.length;l++)o.removeChild(u[l]);!o&&a.contains(s)&&a.removeChild(s),["topBar","leftBar","rightBar","innerContainer"].map(function(h){e[h]&&a.removeChild(e[h]),e[h]=null});var c=a.className.split(" ");c.length>0?a.className=c.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):a.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map(function(h){e[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(v.ENDED),this.currentTime=0,this.isSeeking=!1,pe(this,"replay",function(){e.once(j,function(){var o=e.videoPlay();o&&o.catch&&o.catch(function(a){console.log(a)})}),e.play(),e.emit(vo),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(v.ERROR),this.addClass(v.LOADING),pe(this,"retry",function(){var o=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=o),e.once(j,function(){e.videoPlay()})})}},{key:"changeFullStyle",value:function(e,o,a,s){!e||(s||(s=v.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=f.filterStyleFromText(e)),f.addClass(e,a),o&&o!==e&&!this._orgPCss&&(this._orgPCss=f.filterStyleFromText(o),f.addClass(o,s)))}},{key:"recoverFullStyle",value:function(e,o,a,s){s||(s=v.PARENT_FULLSCREEN),this._orgCss&&(f.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),f.removeClass(e,a),o&&o!==e&&this._orgPCss&&(f.setStyleFromCsstext(o,this._orgPCss),this._orgPCss="",f.removeClass(o,s))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,o=this.root,a=this.video;e||(e=o),this._fullScreenOffset={top:f.scrollTop(),left:f.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var s=f.getFullScreenEl();if(s===this._fullscreenEl){this.onFullscreenChange();return}try{for(var u=0;u<Kr.length;u++){var l=Kr[u];if(e[l]){var c=l==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[l]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(h){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(!(!this._fullscreenEl||!f.getFullScreenEl())){this.root;var o=this.video;this._fullActionFrom="exit";for(var a=0;a<Yr.length;a++){var s=Yr[a];if(document[s]){var u=document[s]();return u&&u.then?u:Promise.resolve()}}return o&&o.webkitSupportsFullscreen?(o.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=e,this.changeFullStyle(this.root,e,e?v.INNER_FULLSCREEN:v.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(Ct,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?v.INNER_FULLSCREEN:v.CSS_FULLSCREEN;this.fullscreen?this.removeClass(e):this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(Ct,!1)}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Cr,_n({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(go,_n({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(v.ACTIVE),this.userTimer&&f.clearTimeout(this,this.userTimer),o.autoHide!==!1){var a=o&&o.delay?o.delay:this.config.inactive;this.userTimer=f.setTimeout(this,function(){e.blur()},a)}}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!!this.isActive){var o=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignorePaused||o||!this.paused&&!this.ended)&&this.addClass(v.ACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(v.ENTER),this.removeClass(v.LOADING),this.isCanplay=!0,this.waitTimer&&f.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){this.removeClass(v.PAUSED),this.ended&&this.removeClass(v.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(v.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&f.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(v.ENDED)}},{key:"onError",value:function(){this.updateAcc("error"),this.removeClass(v.NOT_ALLOW_AUTOPLAY),this.removeClass(v.NO_START),this.removeClass(v.ENTER),this.removeClass(v.LOADING),this.addClass(v.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(v.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&f.clearTimeout(this,this.waitTimer),this.removeClass(v.LOADING),this.removeClass(v.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&f.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=f.setTimeout(this,function(){e.addClass(v.LOADING),f.clearTimeout(e,e.waitTimer),e.waitTimer=null},200)}},{key:"onPlaying",value:function(){var e=this,o=v.NO_START,a=v.PAUSED,s=v.ENDED,u=v.ERROR,l=v.REPLAY,c=v.LOADING,h=[o,a,s,u,l,c];h.forEach(function(p){e.removeClass(p)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass(v.LOADING))&&this.video.readyState>2&&(this.removeClass(v.LOADING),f.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){f.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!this.video||!o||!e)){var s=f.typeOf(e)==="String"?e:e.type||"";o==="switch_play_pause"&&(f.typeOf(a.paused)==="Undefined"&&(a.paused=this.paused),a.isFirstStart=!this.playing),this.emit(In,_n({eventType:s,action:o,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var o=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=o,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var o=this.video.buffered;if(!o||o.length===0||!this.duration)return!0;for(var a=e||this.video.currentTime||.2,s=o.length,u=0;u<s;u++)if(o.start(u)<=a&&o.end(u)>a)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.video||!e||!e.h)){var o=1/e.h,a=o!==1?"scale(".concat(o,")"):"",s=0,u=0;e.y&&(u=(100-e.h*100)/2-e.y*100),e.w&&e.x&&(s=(100-e.w*100)/2-e.x*100),a+=" translate(".concat(s,"%, ").concat(u,"%)"),this.video.style.transform=a,this.video.style.webkitTransform=a}}},{key:"setConfig",value:function(e){var o=this;!e||Object.keys(e).map(function(a){o.config[a]=e[a]})}},{key:"playNext",value:function(e){this.resetState(),this.isPlaying=!1,this.setConfig(e),this.play()}},{key:"getVideoSize",value:function(){var e=this;if(!!this.video){var o=this.video,a=o.videoWidth,s=o.videoHeight,u=this.config,l=u.fitVideoSize,c=u.videoFillMode;if((c==="fill"||c==="cover")&&this.setAttribute("data-xgfill",c),!(!s||!a)){this._videoHeight=s,this._videoWidth=a;var h=this.root.getBoundingClientRect(),p=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,d=h.width,g=h.height-p,_=parseInt(a/s*1e3,10),y=parseInt(d/g*1e3,10),k=d,w=g,b={};l==="auto"&&y>_||l==="fixWidth"?(w=d/_*1e3,this.config.fluid?b.paddingTop="".concat(w*100/k,"%"):b.height="".concat(w+p,"px")):(l==="auto"&&y<_||l==="fixHeight")&&(k=_*g/1e3,b.width="".concat(k,"px")),!this.fullscreen&&!this.isCssfullScreen&&Object.keys(b).map(function(C){e.root.style[C]=b[C]}),(c==="fillHeight"&&y<_||c==="fillWidth"&&y>_)&&this.setAttribute("data-xgfill","cover");var D={videoScale:_,vWidth:k,vHeight:w,cWidth:k,cHeight:w+p};this.emit(Le,D)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.video.updateObjectPosition){this.video.updateObjectPosition(e,o);return}this.video.style.objectPosition="".concat(e*100,"% ").concat(o*100,"%")}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var o=this,a=this.config.definition;a.list=e,this.emit("resourceReady",e);var s=null,u=null;e.map(function(l){o.curDefinition===l.definition&&(s=l),a.defaultDefinition===l.definition&&(u=l)}),!u&&e.length>0&&(u=e[0]),s?this.changeDefinition(s):u&&this.changeDefinition(u)}},{key:"lang",get:function(){return this.config.lang},set:function(e){var o=ne.langKeys.filter(function(a){return a===e});if(o.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(ne.langKeys.join(),"] "));return}this.config.lang=e,x.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return ne.lang[e]||ne.lang.en}},{key:"i18nKeys",get:function(){return ne.textKeys||{}}},{key:"version",get:function(){return En}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=F($(i.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=F($(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=F($(i.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,o){return xt.call.apply(xt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,o){return Rt.call.apply(Rt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,o,a){for(var s=arguments.length,u=new Array(s>3?s-3:0),l=3;l<s;l++)u[l-3]=arguments[l];return Xr.call.apply(Xr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,o){typeof o=="boolean"&&o!==this.muted&&(this.addInnerOP("volumechange"),this.muted=o),x.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return S.config.debug},set:function(e){S.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return x.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,o){x.setCurrentUserActive(e,o)}},{key:"install",value:function(e,o){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=o)}},{key:"use",value:function(e,o){i.plugins||(i.plugins={}),i.plugins[e]=o}}]),i}(La);Ar(Lr,"defaultPreset",null);Ar(Lr,"XgVideoProxy",null);function Ye(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ye=function(i){return typeof i}:Ye=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ye(n)}function si(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Us(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?si(Object(i),!0).forEach(function(t){B(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):si(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function zs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ui(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Vs(n,r,i){return r&&ui(n.prototype,r),i&&ui(n,i),n}function Gs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Fn(n,r)}function Fn(n,r){return Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fn(n,r)}function Ws(n){var r=Ys();return function(){var t=It(n),e;if(r){var o=It(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ks(this,e)}}function Ks(n,r){return r&&(Ye(r)==="object"||typeof r=="function")?r:I(n)}function I(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ys(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function It(n){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},It(n)}function B(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function M(){return new Date().getTime()}var Xs=function(n){Gs(i,n);var r=Ws(i);function i(){var t;zs(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),B(I(t),"_onTimeupdate",function(){S.logInfo("[xgLogger]Events._onTimeupdate"),t._state.isTimeUpdate=!0,t._sendFirstFrame()}),B(I(t),"_onAutoplayStart",function(){S.logInfo("[xgLogger]Events._onAutoplayStart"),t._state.autoplayStart=!0,t._sendFirstFrame()}),B(I(t),"_onReset",function(){t.vt=0,t.pt=0,t.fvt=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t._isWaiting=!1,t._waitTimer&&f.clearTimeout(I(t),t._waitTimer),t._waittTimer&&f.clearTimeout(I(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),B(I(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=M(),t.emitLog("seekStart",{start:M()}))}),B(I(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),B(I(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=M(),t._waitType=1,t.emitLog("waitingStart",{start:t.waitingStart,type:1,endType:"loadstart"}))}),B(I(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t._waitTimer=f.setTimeout(I(t),function(){t._isWaiting&&(t.waitingStart=M(),f.clearTimeout(I(t),t._waitTimer),t._waitTimer=null,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t._startWaitTimeout(),t.emitLog("waitingStart",{start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),B(I(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),B(I(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return Vs(i,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(po,function(){var o=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,S.logInfo("[xgLogger]Events.LOAD_START",o),e.pt=M(),e.vt=0,e.fvt=0,e.off(ye,e._onAutoplayStart),e.off(W,e._onTimeupdate),e._onWaitingLoadStart(),o?e.once(W,e._onTimeupdate):e.once(ye,e._onAutoplayStart)}),this.on(Ae,function(){e.vt=M(),e.fvt=e.vt-e.pt,S.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")}),this.on(lo,this._onSeeking),this.on(Ie,this._onSeeked),this.on(Rr,function(){e.endState("destroy")}),this.on(Me,function(){e.endState("urlChange"),e._onReset()}),this.on([uo,j],this._onPlaying),this.on(Tr,this._onWaiting),this.on(un,this._onError),this.on(Ne,function(){e.endState("emptied"),e._onReset()})}},{key:"_sendFirstFrame",value:function(){this.s=M(),this.vt>0&&this._state.isFFLoading&&(S.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&f.clearTimeout(this,this._waittTimer),this._waittTimer=f.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),f.clearTimeout(e,e._waittTimer),e._waittTimer=null},3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(!!this.seekingStart){var o=M(),a=o-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:o,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(f.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(f.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var o=M(),a=o-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:a,type:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,o){var a=this.player;this.emit(Po,Us({t:M(),host:f.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},o))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),i}(O);function Xe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xe=function(i){return typeof i}:Xe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xe(n)}function qs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function li(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Zs(n,r,i){return r&&li(n.prototype,r),i&&li(n,i),n}function Js(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&jn(n,r)}function jn(n,r){return jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jn(n,r)}function Qs(n){var r=nu();return function(){var t=At(n),e;if(r){var o=At(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return eu(this,e)}}function eu(n,r){return r&&(Xe(r)==="object"||typeof r=="function")?r:tu(n)}function tu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function At(n){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},At(n)}var ru='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>',iu=function(n){Js(i,n);var r=Qs(i);function i(){return qs(this,i),r.apply(this,arguments)}return Zs(i,[{key:"registerIcons",value:function(){return{replay:ru}}},{key:"afterCreate",value:function(){var e=this;O.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind("svg",["click","touchend"],this.__handleReplay),this.bind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay),this.on($e,function(){if(e.playerConfig.loop||f.addClass(e.player.root,"replay"),!e.config.disable){e.show();var o=e.root.querySelector("path");if(o){var a=window.getComputedStyle(o).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;o.setAttribute("transform",a)}}}),this.on(oe,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),f.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind("svg",["click","touchend"],this.__handleReplay),this.unbind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(O);const ou=iu;function qe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(i){return typeof i}:qe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qe(n)}function au(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ci(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function su(n,r,i){return r&&ci(n.prototype,r),i&&ci(n,i),n}function uu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Hn(n,r)}function Hn(n,r){return Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Hn(n,r)}function lu(n){var r=hu();return function(){var t=Lt(n),e;if(r){var o=Lt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return cu(this,e)}}function cu(n,r){return r&&(qe(r)==="object"||typeof r=="function")?r:fu(n)}function fu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Lt(n){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lt(n)}var pu=function(n){uu(i,n);var r=lu(i);function i(){return au(this,i),r.apply(this,arguments)}return su(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){f.addClass(this.root,"hide")}},{key:"show",value:function(){f.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on($e,function(){e.isEndedShow&&f.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(W,function(){e.onTimeUpdate()}),this.on(Me,function(){f.removeClass(e.root,"hide"),f.addClass(e.root,"xg-showplay"),e.once(W,function(){e.onTimeUpdate()})})):this.on(oe,function(){f.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?f.removeClass(this.root,"xg-showplay"):this.once(W,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){!e||(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,o=e.poster,a=e.hideCanplay,s=o?"background-image:url(".concat(o,");"):"";return'<xg-poster class="xgplayer-poster '.concat(a?"xg-showplay":"",'" style="').concat(s,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),i}(O);const du=pu;function Ze(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ze=function(i){return typeof i}:Ze=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ze(n)}function gu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function fi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function yu(n,r,i){return r&&fi(n.prototype,r),i&&fi(n,i),n}function vu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Un(n,r)}function Un(n,r){return Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Un(n,r)}function mu(n){var r=wu();return function(){var t=$t(n),e;if(r){var o=$t(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return _u(this,e)}}function _u(n,r){return r&&(Ze(r)==="object"||typeof r=="function")?r:bu(n)}function bu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function $t(n){return $t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$t(n)}var Pu='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',ku='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',G={};function Ou(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};G[n]&&window.clearTimeout(G[n].id),G[n]={},i.start&&i.start(),G[n].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(G[n].id),delete G[n]},r)}function Su(){Object.keys(G).map(function(n){window.clearTimeout(G[n].id),delete G[n]})}var Tu=function(n){vu(i,n);var r=mu(i);function i(t){var e;return gu(this,i),e=r.call(this,t),e.autoPlayStart=!1,e}return yu(i,[{key:"afterCreate",value:function(){var e=this,o=this.player,a=this.playerConfig;this.initIcons(),this.once(Er,function(){a&&(a.lang&&a.lang==="en"?f.addClass(o.root,"lang-is-en"):a.lang==="jp"&&f.addClass(o.root,"lang-is-jp"))}),this.on(ye,function(){var s=e.config.mode==="auto"?"auto-hide":"hide";f.addClass(e.root,s),e.autoPlayStart=!0,e.onPlayPause("play")}),a.autoplay||this.show(),this.on(xr,function(){var s=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),f.removeClass(e.root,s),e.show()}),this.on(oe,function(){e.onPlayPause("play")}),this.on(De,function(){e.onPlayPause("pause")}),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(u){u.cancelable&&u.preventDefault(),u.stopPropagation(),e.emitUserAction(u,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:Pu,class:"xg-icon-play"},startPause:{icon:ku,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){f.addClass(this.root,"hide")}},{key:"show",value:function(){f.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){f.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){f.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var o=this;Ou("pauseplay",400,{start:function(){f.addClass(o.root,"interact"),o.show(),o.switchStatus(!0)},end:function(){f.removeClass(o.root,"interact"),!e&&o.hide()}})}},{key:"switchPausePlay",value:function(e){var o=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!!o.isReady){var a=this.player.paused;!a&&o.isPlaying?o.pause():o.play()}}},{key:"onPlayPause",value:function(e){var o=this.config,a=this.player;if(!(!a.isPlaying||!this.autoPlayStart)){if(o.mode==="show"){this.switchStatus(),this.show();return}if(o.mode==="auto"){this.switchStatus();return}if(o.isShowPause&&a.paused&&!a.ended||o.isShowEnd&&a.ended){this.switchStatus(),this.show();return}if(o.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Su()}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(O);const Cu=Tu;function Je(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Je=function(i){return typeof i}:Je=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Je(n)}function Eu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function hi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function xu(n,r,i){return r&&hi(n.prototype,r),i&&hi(n,i),n}function Ru(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&zn(n,r)}function zn(n,r){return zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zn(n,r)}function Iu(n){var r=$u();return function(){var t=Dt(n),e;if(r){var o=Dt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Au(this,e)}}function Au(n,r){return r&&(Je(r)==="object"||typeof r=="function")?r:Lu(n)}function Lu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $u(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Dt(n){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Dt(n)}var Du=function(n){Ru(i,n);var r=Iu(i);function i(){return Eu(this,i),r.apply(this,arguments)}return xu(i,[{key:"render",value:function(){var e=this.config.innerHtml,o=f.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)o.appendChild(e);else if(e&&typeof e=="string")o.innerHTML=e;else{for(var a="",s=1;s<=12;s++)a+='<div class="xgplayer-enter-bar'.concat(s,'"></div>');o.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return o}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(O);const Nu=Du;function Qe(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qe=function(i){return typeof i}:Qe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qe(n)}function Mu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function pi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Bu(n,r,i){return r&&pi(n.prototype,r),i&&pi(n,i),n}function Fu(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Vn(n,r)}function Vn(n,r){return Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vn(n,r)}function ju(n){var r=zu();return function(){var t=Nt(n),e;if(r){var o=Nt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Hu(this,e)}}function Hu(n,r){return r&&(Qe(r)==="object"||typeof r=="function")?r:Uu(n)}function Uu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Nt(n){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nt(n)}var Vu=function(n){Fu(i,n);var r=ju(i);function i(){return Mu(this,i),r.apply(this,arguments)}return Bu(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:10}}}]),i}(O);const di=Vu;function Gu(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function gi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Wu(n,r,i){return r&&gi(n.prototype,r),i&&gi(n,i),n}function Ku(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Gn(n,r)}function Gn(n,r){return Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gn(n,r)}function Yu(n){var r=qu();return function(){var t=Mt(n),e;if(r){var o=Mt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ro(this,e)}}function Ro(n,r){return r&&(Ce(r)==="object"||typeof r=="function")?r:Xu(n)}function Xu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Mt(n){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Mt(n)}function Ce(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ce=function(i){return typeof i}:Ce=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ce(n)}function yi(n){var r=parseFloat(n),i=n.indexOf("%")===-1&&!isNaN(r);return i&&r}var $r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Io=$r.length;function Zu(){for(var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},r=0;r<Io;r++){var i=$r[r];n[i]=0}return n}function Ju(n){var r=window.getComputedStyle(n);return r}function vi(n){if(typeof n=="string"&&(n=document.querySelector(n)),!(!n||Ce(n)!=="object"||!n.nodeType)){var r=Ju(n);if(r.display==="none")return Zu();var i={};i.width=n.offsetWidth,i.height=n.offsetHeight;for(var t=i.isBorderBox=r.boxSizing==="border-box",e=0;e<Io;e++){var o=$r[e],a=r[o],s=parseFloat(a);i[o]=isNaN(s)?0:s}var u=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,p=i.borderLeftWidth+i.borderRightWidth,d=i.borderTopWidth+i.borderBottomWidth,g=t,_=yi(r.width);_!==!1&&(i.width=_+(g?0:u+p));var y=yi(r.height);return y!==!1&&(i.height=y+(g?0:l+d)),i.innerWidth=i.width-(u+p),i.innerHeight=i.height-(l+d),i.outerWidth=i.width+c,i.outerHeight=i.height+h,i}}function bn(n,r){for(var i=0;i<n.length;i++){var t=n[i];if(t.identifier===r)return t}}var wn={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},mi={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Qu=function(n){Ku(i,n);var r=Yu(i);function i(t){var e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gu(this,i),e=r.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=o.handle instanceof Element?o.handle:document.querySelector(o.handle),!e._root||!e._handlerDom?Ro(e):(e._bindStartEvent(),e)}return Wu(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),mi[this._startKey].map(function(o){e["on".concat(o)]=e["on".concat(o)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var o=this;if(!!e){var a=mi[this._startKey];a.map(function(s){window.addEventListener(s,o["on".concat(s)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;!this._boundPointerEvents||(this._boundPointerEvents.map(function(o){window.removeEventListener(o,e["on".concat(o)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;!this.isDragging||(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var o=e.changedTouches[0];this.dragStart(e,o),this.touchIdentifier=o.pointerId!==void 0?o.pointerId:o.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var o=bn(e.changedTouches,this.touchIdentifier);o&&this.dragMove(e,o)}},{key:"ontouchend",value:function(e){var o=bn(e.changedTouches,this.touchIdentifier);o&&this.dragEnd(e,o),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var o=bn(e.changedTouches,this.touchIdentifier);o&&this.dragCancel(e,o)}},{key:"dragStart",value:function(e,o){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=o,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=vi(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,o){this.isDragging=!0,this.animate(),this.emit(wn.START,this.startPos)}},{key:"dragEnd",value:function(e,o){!this._root||(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(wn.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,o){var a={x:o.pageX-this.downPoint.pageX,y:o.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,o),a}},{key:"dragMove",value:function(e,o){if(e=e||window.event,!!this.isDown){var a=this.startPos,s=a.x,u=a.y,l=this._dragPointerMove(e,o),c=l.x,h=l.y;c=this.checkContain("x",c,s),h=this.checkContain("y",h,u),this.position.x=s+c,this.position.y=u+h,this.dragPoint.x=c,this.dragPoint.y=h,this.emit(wn.MOVE,this.position)}}},{key:"dragCancel",value:function(e,o){this.dragEnd(e,o)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,o,a){return o+a<0?0-a:e==="x"&&o+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&o+a>this.startPos.maxY?this.startPos.maxY-a:o}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),o=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=isNaN(o)?0:o,this.position.y=isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var o=e.transform;if(o.indexOf("matrix")===0){var a=o.split(","),s=o.indexOf("matrix3d")===0?12:4,u=parseInt(a[s],10),l=parseInt(a[s+1],10);this.position.x+=u,this.position.y+=l}}},{key:"_getPositionCoord",value:function(e,o){if(e.indexOf("%")!==-1){var a=vi(this._root.parentNode);return a?parseFloat(e)/100*a[o]:0}return parseInt(e,10)}}]),i}(ao);function et(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?et=function(i){return typeof i}:et=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},et(n)}function el(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function _i(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function tl(n,r,i){return r&&_i(n.prototype,r),i&&_i(n,i),n}function nl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Wn(n,r)}function Wn(n,r){return Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Wn(n,r)}function rl(n){var r=ol();return function(){var t=Bt(n),e;if(r){var o=Bt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return il(this,e)}}function il(n,r){return r&&(et(r)==="object"||typeof r=="function")?r:he(n)}function he(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ol(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Bt(n){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bt(n)}function Pn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var al='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',sl='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',ul=function(n){nl(i,n);var r=rl(i);function i(t){var e;el(this,i),e=r.call(this,t),Pn(he(e),"onCancelClick",function(s){e.exitMini(),e.isClose=!0}),Pn(he(e),"onCenterClick",function(s){var u=he(e),l=u.player;l.paused?l.play():l.pause()}),Pn(he(e),"onScroll",function(s){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var u=parseInt(f.getCss(e.player.root,"height"));u+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>u+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=u&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var o=he(e),a=o.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return tl(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(De,function(){e.setAttr("data-state","pause")}),this.on(oe,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,o=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var s={config:{onClick:function(){e.getMini()}}};o.controls.registerPlugin(di,s,di.pluginName)}var u=f.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",u,this.onCancelClick),this.bind(".play-icon",u,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Qu(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:al,class:"xg-icon-play"},pause:{icon:sl,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;this.lastStyle={},f.addClass(o.root,"xgplayer-mini"),["width","height","top","left"].map(function(u){e.lastStyle[u]=s.style[u],s.style[u]="".concat(e.pos[u],"px")}),a.fluid&&(s.style["padding-top"]=""),this.emit(Et,!0),o.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;f.removeClass(o.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(u){s.style[u]=e.lastStyle[u]}),this.lastStyle=null,a.fluid&&(o.root.style.width="100%",o.root.style.height="0",o.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(Et,!1),this.isMini=o.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=f.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      <div lang-key="`.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,`</div>
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(O);function tt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(i){return typeof i}:tt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},tt(n)}function ll(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function bi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function cl(n,r,i){return r&&bi(n.prototype,r),i&&bi(n,i),n}function fl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Kn(n,r)}function Kn(n,r){return Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Kn(n,r)}function hl(n){var r=dl();return function(){var t=Ft(n),e;if(r){var o=Ft(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return pl(this,e)}}function pl(n,r){return r&&(tt(r)==="object"||typeof r=="function")?r:A(n)}function A(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ft(n){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ft(n)}function Pe(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var je={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},kn=["videoClick","videoDbClick"],On=function(n){fl(i,n);var r=hl(i);function i(){var t;ll(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Pe(A(t),"onMouseMove",function(s){var u=A(t),l=u.player,c=u.playerConfig;l.isActive||(l.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&l.video.focus())}),Pe(A(t),"onMouseEnter",function(s){var u=A(t),l=u.playerConfig,c=u.player;!l.closeFocusVideoFocus&&c.video.focus(),l.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),Pe(A(t),"onMouseLeave",function(s){var u=t.playerConfig,l=u.closePlayerBlur,c=u.leavePlayerTime;l||(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur())}),Pe(A(t),"onVideoClick",function(s){var u=A(t),l=u.player,c=u.playerConfig;s.target&&c.closeVideoClick||(s.target===l.video||s.target===l.innerContainer||s.target===l.video.__canvas)&&(s.preventDefault(),c.closeVideoStopPropagation||s.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){!t._clickCount||(t._clickCount--,pe(A(t),kn[0],function(h,p){t.switchPlayPause(p.e)},{e:s,paused:l.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),Pe(A(t),"onVideoDblClick",function(s){var u=A(t),l=u.player,c=u.playerConfig;if(!(!s.target||s.target!==l.video&&s.target!==l.video.__canvas||c.closeVideoDblclick)){if(t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),s.preventDefault(),s.stopPropagation(),pe(A(t),kn[1],function(h,p){t.emitUserAction(p.e,"switch_fullscreen",{fullscreen:l.fullscreen}),l.fullscreen?l.exitFullscreen():l.getFullscreen()},{e:s,fullscreen:l.fullscreen})}}),t}return cl(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,kn.map(function(u){e.__hooks[u]=null});var o=this.playerConfig,a=o.enableContextmenu,s=o.isMobileSimulateMode;s||P.device==="mobile"&&!P.os.isIpad||(this.config.disableContextmenu=!a,this.initEvents())}},{key:"initEvents",value:function(){var e=this,o=this.player,a=o.video,s=o.root;a.addEventListener("click",this.onVideoClick,!1),a.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(je).map(function(u){s.addEventListener(u,e[je[u]],!1)}),this.config.disableContextmenu&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var o=this.player;this.emitUserAction(e,"switch_play_pause"),o.ended?o.duration!==1/0&&o.duration>0&&o.replay():o.paused?o.play():o.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,o=this.player,a=o.video,s=o.root;this.clickTimer&&clearTimeout(this.clickTimer),s.removeEventListener("click",this.onVideoClick,!1),a.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(je).map(function(u){s.removeEventListener(u,e[je[u]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),i}(Be);function gl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function wi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function yl(n,r,i){return r&&wi(n.prototype,r),i&&wi(n,i),n}var X={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},vl={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},ml={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Pi(n){return n&&n.length>0?n[n.length-1]:null}function ki(n){var r=navigator.userAgent;/(?:iPhone|iPad)/.test(r)&&n.cancelable&&n.preventDefault()}function _l(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var bl=function(){function n(r){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};gl(this,n),this._pos={moving:!1,start:!1,x:0,y:0},this.config=_l(),Object.keys(t).map(function(e){i.config[e]=t[e]}),this.root=r,this.events=t.eventType==="mouse"?ml:vl,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return yl(n,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(X.PRESS,i),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(X.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(X.CLICK,i)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,t){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(t)}},{key:"off",value:function(i,t){if(!!this.__handlers[i]){for(var e=this.__handlers[i],o=-1,a=0;a<e.length;a++)if(e[a]===t){o=a;break}o>=0&&this.__handlers[i].splice(o,1)}}},{key:"trigger",value:function(i,t){!this.__handlers[i]||this.__handlers[i].map(function(e){try{e(t)}catch(o){console.error("trigger>>:".concat(i),o)}})}},{key:"onTouchStart",value:function(i){var t=this._pos,e=this.root,o=this.config;o.needPreventDefault&&ki(i);var a=Pi(i.touches);t.x=a?parseInt(a.pageX,10):i.pageX,t.y=a?parseInt(a.pageX,10):i.pageX,t.start=!0,this.__setPress(i),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(X.TOUCH_START,i)}},{key:"onTouchCancel",value:function(i){this.onTouchEnd(i)}},{key:"onTouchEnd",value:function(i){var t=this._pos,e=this.root,o=this.config;o.needPreventDefault&&ki(i),this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),i.moving=t.moving,i.press=t.press,t.press&&this.trigger(X.PRESS_END,i),this.trigger(X.TOUCH_END,i),!t.press&&!t.moving&&this.__setDb(i),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(i){var t=this._pos,e=this.config,o=Pi(i.touches),a=o?parseInt(o.pageX,10):i.pageX,s=o?parseInt(o.pageY,10):i.pageX,u=a-t.x,l=s-t.y;Math.abs(l)<e.miniStep&&Math.abs(u)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(X.PRESS_END,i),t.press=!1,t.moving=!0,this.trigger(X.TOUCH_MOVE,i))}},{key:"destroy",value:function(){var i=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){i.root.removeEventListener("touchend",i[t[e]])})}}]),n}();const wl=bl;function nt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(i){return typeof i}:nt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},nt(n)}function Pl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Oi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function kl(n,r,i){return r&&Oi(n.prototype,r),i&&Oi(n,i),n}function Ol(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Yn(n,r)}function Yn(n,r){return Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yn(n,r)}function Sl(n){var r=Cl();return function(){var t=jt(n),e;if(r){var o=jt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Tl(this,e)}}function Tl(n,r){return r&&(nt(r)==="object"||typeof r=="function")?r:V(n)}function V(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Cl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function jt(n){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jt(n)}function ke(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var El='<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',ue={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},xl=function(n){Ol(i,n);var r=Sl(i);function i(t){var e;return Pl(this,i),e=r.call(this,t),ke(V(e),"onTouchStart",function(o){var a=V(e),s=a.player,u=a.config,l=a.pos,c=a.playerConfig,h=e.getTouche(o);if(h&&!u.disableGesture&&e.duration>0&&!s.ended){l.isStart=!0,f.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=f.format(e.duration);var p=e.root.getBoundingClientRect();s.rotateDeg===90?(l.top=p.left,l.left=p.top,l.width=p.height,l.height=p.width):(l.top=p.top,l.left=p.left,l.width=p.width,l.height=p.height);var d=parseInt(h.pageX-l.left,10),g=parseInt(h.pageY-l.top,10);l.x=s.rotateDeg===90?g:d,l.y=s.rotateDeg===90?d:g,l.scopeL=u.scopeL*l.width,l.scopeR=(1-u.scopeR)*l.width,l.scopeM1=l.width*(1-u.scopeM)/2,l.scopeM2=l.width-l.scopeM1}}),ke(V(e),"onTouchMove",function(o){var a=e.getTouche(o),s=V(e),u=s.pos,l=s.config,c=s.player;if(!(!a||l.disableGesture||!e.duration||!u.isStart)){var h=l.miniMoveStep,p=l.hideControlsActive,d=parseInt(a.pageX-u.left,10),g=parseInt(a.pageY-u.top,10),_=c.rotateDeg===90?g:d,y=c.rotateDeg===90?d:g;if(Math.abs(_-u.x)>h||Math.abs(y-u.y)>h){var k=_-u.x,w=y-u.y,b=u.scope;if(b===-1&&(b=e.checkScope(_,y,k,w,u),b===0&&(p?c.blur():c.focus({autoHide:!1}),!u.time&&(u.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),u.scope=b),b===-1||b>0&&!l.gestureY||b===0&&!l.gestureX)return;o.cancelable&&o.preventDefault(),e.executeMove(k,w,b,u.width,u.height),u.x=_,u.y=y}}}),ke(V(e),"onTouchEnd",function(o){var a=V(e),s=a.player,u=a.pos,l=a.playerConfig;!u.isStart||(u.scope>-1&&o.cancelable&&o.preventDefault(),e.endLastMove(u.scope),setTimeout(function(){s.getPlugin("progress")&&s.getPlugin("progress").resetSeekState()},10),u.scope=-1,e.resetPos(),f.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),e.changeAction(ue.AUTO))}),ke(V(e),"onRootTouchMove",function(o){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(o)&&(o.stopPropagation(),e.pos.isStart?e.onTouchMove(o):e.onTouchStart(o))}),ke(V(e),"onRootTouchEnd",function(o){if(e.pos.isStart&&e.checkIsRootTarget(o)){o.stopPropagation(),e.onTouchEnd(o);var a=e.player.controls;a&&a.recoverAutoHide()}}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return kl(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:El,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,o=this.playerConfig,a=this.config,s=this.player;o.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),f.isUndefined(o.disableGesture)||(a.disableGesture=!!o.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=f.createDom("xg-mask","",{},"xgmask"),s.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var u=P.device!=="mobile"?"mouse":"touch";this.touch=new wl(this.root,{eventType:u,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),s.root.addEventListener("touchmove",this.onRootTouchMove,!0),s.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(ln,function(){var h=e.player,p=e.config;h.duration*1e3<p.moveDuration&&(p.moveDuration=h.duration*1e3)}),this.on([j,$e],function(){var h=e.pos,p=h.time,d=h.isStart;!d&&p>0&&(e.pos.time=0)});var l={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(l).map(function(h){e.touch.on(h,function(p){e[l[h]](p)})}),!a.disableActive){var c=s.plugins.progress;c&&(c.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),c.addCallBack("dragend",function(){e.changeAction(ue.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,o=e.plugins.thumbnail;if(o&&o.usable){this.thumbnail=o.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},o=e.commonStyle,a=o.playedColor,s=o.progressColor;a&&(this.find(".xg-curbar").style.backgroundColor=a,this.find(".xg-cur").style.color=a),s&&(this.find(".xg-bar").style.backgroundColor=s,this.find(".time-preview").style.color=s),this.config.disableTimeProgress&&f.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(o){e.pos[o]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var o=this.player,a=this.root;a.setAttribute("data-xg-action",e);var s=o.plugins.start;s&&s.recover()}},{key:"getTouche",value:function(e){var o=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return o===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,o,a,s,u){var l=u.width,c=-1;if(e<0||e>l)return c;var h=Math.abs(s===0?a:a/s);return Math.abs(a)>0&&h>=1.73&&e>u.scopeM1&&e<u.scopeM2?c=0:(Math.abs(a)===0||h<=.57)&&(c=e<u.scopeL?1:e>u.scopeR?2:3),c}},{key:"executeMove",value:function(e,o,a,s,u){switch(a){case 0:this.updateTime(e/s*this.config.scopeM);break;case 1:this.updateBrightness(o/u);break;case 2:P.os.isIos||this.updateVolume(o/u);break}}},{key:"endLastMove",value:function(e){var o=this,a=this.pos,s=this.player,u=this.config,l=(a.time-this.timeOffset)/1e3;switch(e){case 0:s.seek(Number(l).toFixed(1)),u.hideControlsEnd?s.blur():s.focus(),this.timer=setTimeout(function(){o.pos.time=0},500);break}this.changeAction(ue.AUTO)}},{key:"checkIsRootTarget",value:function(e){var o=this.player.plugins||{};return o.progress&&o.progress.root.contains(e.target)?!1:o.start&&o.start.root.contains(e.target)||o.controls&&o.controls.root.contains(e.target)}},{key:"onClick",value:function(e){var o=this.player,a=this.config,s=this.playerConfig;if(!o.isPlaying){s.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),o.play());return}!a.closedbClick||s.closeVideoClick?o.isActive?o.blur():o.focus():s.closeVideoClick||((o.isActive||a.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),o.focus())}},{key:"onDbClick",value:function(e){var o=this.config,a=this.player;!o.closedbClick&&a.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onPress",value:function(e){var o=this.pos,a=this.config,s=this.player;a.disablePress||(o.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:s.playbackRate,to:a.pressRate}),s.playbackRate=a.pressRate,this.changeAction(ue.PLAYBACK))}},{key:"onPressEnd",value:function(e){var o=this.pos,a=this.config,s=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{from:s.playbackRate,to:o.rate}),s.playbackRate=o.rate,o.rate=1,this.changeAction(ue.AUTO))}},{key:"updateTime",value:function(e){var o=this.player,a=this.config,s=this.player.duration;e=Number(e.toFixed(4));var u=parseInt(e*a.moveDuration,10)+this.timeOffset;u+=this.pos.time,u=u<0?0:u>s*1e3?s*1e3-200:u,o.getPlugin("time")&&o.getPlugin("time").updateTime(u/1e3),o.getPlugin("progress")&&o.getPlugin("progress").updatePercent(u/1e3/this.duration,!0),this.activeSeekNote(u/1e3,e>0),a.isTouchingSeek&&o.seek(Number((u-this.timeOffset)/1e3).toFixed(1)),this.pos.time=u}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var o=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var s=parseInt(o.volume*10,10)-parseInt(a.volume/10,10);s=s>10?10:s<1?0:s,o.volume=s/10,a.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var o=this.pos,a=this.config,s=this.xgMask,u=o.light+.8*e;u=u>a.maxDarkness?a.maxDarkness:u<0?0:u,s&&(s.style.backgroundColor="rgba(0,0,0,".concat(u,")")),o.light=u}},{key:"activeSeekNote",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,s=this.config,u=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||u||s.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(ue.SEEKING);var l=a.plugins.start;l&&l.focusHide(),this.find(".xg-dur").innerHTML=f.format(this.duration),this.find(".xg-cur").innerHTML=f.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),o?f.removeClass(this.find(".xg-seek-show"),"xg-back"):f.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var o=this.player,a=o.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.hasStart)e.ended||(e.paused?e.play():e.pause());else return!1}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(O);const Rl=xl;function rt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rt=function(i){return typeof i}:rt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},rt(n)}function Si(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Il(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Si(Object(i),!0).forEach(function(t){Zn(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Si(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Al(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ti(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ll(n,r,i){return r&&Ti(n.prototype,r),i&&Ti(n,i),n}function $l(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Xn(n,r)}function Xn(n,r){return Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xn(n,r)}function Dl(n){var r=Ml();return function(){var t=Ht(n),e;if(r){var o=Ht(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Nl(this,e)}}function Nl(n,r){return r&&(rt(r)==="object"||typeof r=="function")?r:qn(n)}function qn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ml(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ht(n){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ht(n)}function Zn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Ci(n){n.preventDefault(),n.returnValue=!1}function Bl(n){var r=n.tagName;return!!(r==="INPUT"||r==="TEXTAREA"||n.isContentEditable)}var Fl=function(n){$l(i,n);var r=Dl(i);function i(){var t;Al(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Zn(qn(t),"onBodyKeyDown",function(s){var u=s||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||u.metaKey||u.altKey||u.ctrlKey)){var l=u.keyCode;return(u.target===document.body||t.config.isGlobalTrigger&&!Bl(u.target))&&t.checkCode(l,!0)&&(Ci(u),t.handleKeyCode(l,s)),!1}}),Zn(qn(t),"onKeydown",function(s){var u=s||window.event;if(!(t.config.disable||t.config.disableRootTrigger||u.metaKey||u.altKey||u.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(u&&(u.keyCode===37||t.checkCode(u.keyCode))&&(u.target===t.player.root||u.target===t.player.video||u.target===t.player.controls.el))Ci(u);else return!0;t.handleKeyCode(u.keyCode,s)}}),t}return Ll(i,[{key:"mergekeyCodeMap",value:function(){var e=this,o=this.config.keyCodeMap;o&&Object.keys(o).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","isBodyTarget"].map(function(s){o[a][s]&&(e.keyCodeMap[a][s]=o[a][s])}):e.keyCodeMap[a]=o[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),o=e.height,a=e.top,s=e.bottom,u=window.innerHeight;return!(a<0&&a<0-o*.9||s>0&&s-u>o*.9)}},{key:"checkCode",value:function(e,o){var a=this,s=!1;return Object.keys(this.keyCodeMap).map(function(u){a.keyCodeMap[u]&&e===a.keyCodeMap[u].keyCode&&!a.keyCodeMap[u].disable&&(s=!o||o&&!a.keyCodeMap[u].noBodyTarget)}),s}},{key:"downVolume",value:function(e){var o=this.player,a=parseFloat((o.volume-.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a>=0?o.volume=a:o.volume=0}},{key:"upVolume",value:function(e){var o=this.player,a=parseFloat((o.volume+.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a<=1?o.volume=a:o.volume=1}},{key:"seek",value:function(e){var o=this.player,a=o.currentTime,s=o.duration,u=a;a+this.seekStep<=s?u=a+this.seekStep:u=s-1;var l={currentTime:{from:a,to:u}};this.emitUserAction(e,"seek",{props:l}),this.player.currentTime=u}},{key:"seekBack",value:function(e){var o=this.player.currentTime,a=0;o-this.seekStep>=0&&(a=o-this.seekStep);var s={currentTime:{from:o,to:a}};this.emitUserAction(e,"seek",{props:s}),this.player.currentTime=a}},{key:"playPause",value:function(e){var o=this.player;!o||(this.emitUserAction(e,"switch_play_pause"),o.paused?o.play():o.pause())}},{key:"exitFullscreen",value:function(e){var o=this.player,a=o.isCssfullScreen,s=o.fullscreen;s&&(o.exitFullscreen(),this.emitUserAction("keyup","switch_fullscreen",{fullscreen:s})),a&&(o.exitCssFullscreen(),this.emitUserAction("keyup","switch_css_fullscreen",{cssfullscreen:a}))}},{key:"handleKeyCode",value:function(e,o){var a=this;Object.keys(this.keyCodeMap).map(function(s){var u=a.keyCodeMap[s],l=u.action,c=u.keyCode,h=u.disable;c===e&&!h&&(typeof l=="function"?l(o,a.player):typeof l=="string"&&typeof a[l]=="function"&&a[l](o,a.player),a.emit(wo,Il({key:s,target:o.target},a.keyCodeMap[s])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),i}(Be);const Ei=Fl;function it(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?it=function(i){return typeof i}:it=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},it(n)}function jl(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function xi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Hl(n,r,i){return r&&xi(n.prototype,r),i&&xi(n,i),n}function Ul(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Jn(n,r)}function Jn(n,r){return Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jn(n,r)}function zl(n){var r=Wl();return function(){var t=Ut(n),e;if(r){var o=Ut(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Vl(this,e)}}function Vl(n,r){return r&&(it(r)==="object"||typeof r=="function")?r:Gl(n)}function Gl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ut(n){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ut(n)}var Kl='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110"><path d="M100 50A50 50 0 1150 0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"/></svg>',Yl=function(n){Ul(i,n);var r=zl(i);function i(){return jl(this,i),r.apply(this,arguments)}return Hl(i,[{key:"registerIcons",value:function(){return{loadingIcon:Kl}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:T.ROOT}}}]),i}(O);const Xl=Yl;function ql(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ri(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Zl(n,r,i){return r&&Ri(n.prototype,r),i&&Ri(n,i),n}var Jl=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Ql=function(){function n(r){ql(this,n),this.fragments=r.fragments||[],this.focusClass="inner-focus",this.style=r.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return Zl(n,[{key:"updateDuration",value:function(i){var t=this;this.duration=parseInt(i*1e3);var e=0,o=this.fragments;this.fragments=o.map(function(a){return a.start=e,a.end=e+a.percent*t.duration,a.duration=a.percent*t.duration,e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,o=this.fragments,a=t.newIndex,s=t.curIndex,u=t.millisecond;a!==s&&e.map(function(h,p){p<a?h[i].style.width="100%":p>a&&(h[i].style.width=0)});var l=o[a],c=u===0?0:(u-l.start)/l.duration;e[a][i].style.width=c<0?0:"".concat(c*100,"%")}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(t)}var e=this.playedIndex,o=this.cachedIndex;if(f.typeOf(i.played)!=="Undefined"){var a=this.findIndex(i.played*1e3,e);this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=a}if(f.typeOf(i.cached)!=="Undefined"){var s=this.findIndex(i.cached*1e3,o);this.updateProgress("cached",{newIndex:s,curIndex:o,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=s}}},{key:"findIndex",value:function(i,t){var e=this.fragments;return e.length===1?0:(i>e[t].start&&i<e[t].end||this.fragments.map(function(o,a){i>o.start&&i<=o.end&&(t=a)}),t)}},{key:"findHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)if(f.hasClass(i[t],this.focusClass))return{dom:i[t],pos:i[t].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var t=this.root.children;return i<0||i>=t.length?null:{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)f.removeClass(i[t],this.focusClass)}},{key:"setHightLight",value:function(i){var t=this.root.children;if(i<t.length)return f.addClass(t[i],this.focusClass),{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var i=this,t=this.style.progressColor;return this.root=f.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map(function(e){var o=f.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(e.percent):"flex: ".concat(e.percent)},"".concat(e.isFocus?"inner-focus":""," xgplayer-progress-inner"));return i.root.appendChild(o),Jl.map(function(a){o.appendChild(f.createDom(a.tag,"",{style:a.styleKey?"background: ".concat(i.style[a.styleKey],"; width:0;"):"width:0;"},a.className))}),{cached:o.children[0],played:o.children[1]}})),this.root}}]),n}();function Ee(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ee=function(i){return typeof i}:Ee=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ee(n)}function ec(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ii(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function tc(n,r,i){return r&&Ii(n.prototype,r),i&&Ii(n,i),n}function nc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&Qn(n,r)}function Qn(n,r){return Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qn(n,r)}function rc(n){var r=oc();return function(){var t=zt(n),e;if(r){var o=zt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ic(this,e)}}function ic(n,r){return r&&(Ee(r)==="object"||typeof r=="function")?r:R(n)}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function oc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function zt(n){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zt(n)}function te(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var ac=function(n){nc(i,n);var r=rc(i);function i(t){var e;return ec(this,i),e=r.call(this,t),te(R(e),"onMoveOnly",function(o){var a=R(e),s=a.pos,u=a.config,l=a.player;f.event(o);var c=f.getEventPos(o,l.zoom),h=l.rotateDeg===90?c.clientY:c.clientX;if(!(s.moving&&Math.abs(s.x-h)<u.miniMoveStep)){s.moving=!0,s.x=h;var p=e.computeTime(o);e.triggerCallbacks("dragmove",p)}}),te(R(e),"onBodyClick",function(o){o.preventDefault(),o.stopPropagation()}),te(R(e),"onMouseDown",function(o){var a=R(e),s=a.player,u=a.pos,l=a.config,c=a.playerConfig,h=f.getEventPos(o,s.zoom),p=s.rotateDeg===90?h.clientY:h.clientX;if(!(s.isMini||l.closeMoveSeek||!c.allowSeekAfterEnded&&s.ended)){o.stopPropagation(),o.preventDefault(),e.focus(),f.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),f.checkIsFunction(l.onMoveStart)&&l.onMoveStart(),f.event(o),u.x=p,u.isDown=!0,u.moving=!1,s.focus({autoHide:!1}),e.isProgressMoving=!0,f.addClass(e.progressBtn,"active");var d=e.computeTime(o);return e._state.time=d.currentTime,e.updateWidth(d.currentTime,d.percent,0),e.isMobile?(e.bind("touchmove",e.onMouseMove),e.bind("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1),s.root.addEventListener("click",e.onBodyClick,!1)),!0}}),te(R(e),"onMouseUp",function(o){var a=R(e),s=a.player,u=a.config,l=a.pos,c=a.playerConfig,h=a._state;o.stopPropagation(),o.preventDefault(),f.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),f.checkIsFunction(u.onMoveEnd)&&u.onMoveEnd(),f.event(o),f.removeClass(e.progressBtn,"active");var p=e.computeTime(o);l.moving?(e.updateWidth(p.currentTime,p.percent,2),e.triggerCallbacks("dragend",p)):e.triggerCallbacks("click",p),l.moving=!1,l.isDown=!1,l.x=0,l.y=0,h.time=0,e.isMobile?(e.unbind("touchmove",e.onMouseMove),e.unbind("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),s.root.removeEventListener("click",e.onBodyClick,!1),l.isEnter?!c.isMobileSimulateMode&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(o)),f.setTimeout(R(e),function(){e.resetSeekState()},10),s.focus()}),te(R(e),"onMouseMove",function(o){var a=R(e),s=a.pos,u=a.player,l=a.config,c=a._state;e.isMobile&&(o.stopPropagation(),o.preventDefault()),f.event(o);var h=f.getEventPos(o,u.zoom),p=u.rotateDeg===90?h.clientY:h.clientX,d=Math.abs(s.x-p);if(!(s.moving&&d<l.miniMoveStep||!s.moving&&d<l.miniStartStep)){s.x=p;var g=e.computeTime(o);c.time<g.currentTime?g.forward=!0:g.forward=!1,c.time=g.currentTime,s.isDown&&!s.moving&&(s.moving=!0,l.isPauseMoving&&u.pause(),e.triggerCallbacks("dragstart",g)),e.updateWidth(g.currentTime,g.percent,1),e.triggerCallbacks("dragmove",g)}}),te(R(e),"onMouseEnter",function(o){var a=R(e),s=a.player,u=a.pos;u.isDown||u.isEnter||s.isMini||!s.config.allowSeekAfterEnded&&s.ended||(u.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),e.focus())}),te(R(e),"onMouseLeave",function(o){var a=R(e),s=a.player,u=a.pos;if(u.isEnter=!1,!s.isMini){if(e.unbind("mousemove",e.onMoveOnly),u.isDown){e.unbind("mouseleave",e.onMouseLeave);return}e.blur()}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0},e}return tc(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"beforeCreate",value:function(e){typeof e.player.config.progress=="boolean"&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e=this;this.innerList=new Ql({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(o){e[o]=e.innerList[o].bind(e.innerList)})}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),P.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(W,function(){e.onTimeupdate()}),this.on(Ie,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(ho,function(){e.onCacheUpdate()}),this.on($e,function(){e.onCacheUpdate(),e._state.now=0}),this.on(Ne,function(){e.onReset()}),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},o=e.commonStyle,a=o.sliderBtnStyle,s=this.progressBtn;a&&(typeof a=="string"?s.style.boxShadow=a:Ee(a)==="object"&&Object.keys(a).map(function(u){s.style[u]=a[u]}))}},{key:"triggerCallbacks",value:function(e,o){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(a){if(a&&a.handler&&a.type===e)try{a.handler(o)}catch(s){console.error("[XGPLAYER][triggerCallbacks] ".concat(a," error"),s)}})}},{key:"addCallBack",value:function(e,o){o&&typeof o=="function"&&this.__dragCallBacks.push({type:e,handler:o})}},{key:"removeCallBack",value:function(e,o){var a=this.__dragCallBacks,s=-1;a.map(function(u,l){u&&u.type===e&&u.handler===o&&(s=l)}),s>-1&&a.splice(s,1)}},{key:"bindDomEvents",value:function(){var e=this.player,o=e.controls,a=e.config;this.isMobile?(this.bind("touchstart",this.onMouseDown),o&&(o.root&&o.root.addEventListener("touchmove",f.stopPropagation),o.center&&o.center.addEventListener("touchend",f.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!a.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),f.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),f.removeClass(this.root,"active")}},{key:"updateWidth",value:function(e,o,a){var s=this.config,u=this.player;if(!(s.isCloseClickSeek&&a===0)){var l=e>u.duration?u.duration-.2:Number(e).toFixed(1);this.updatePercent(o),this.updateTime(e),!(a===1&&(!s.isDragingSeek||u.videoConfig.mediaType==="audio"))&&(this._state.now=l,this._state.direc=l>u.currentTime?0:1,u.seek(l))}}},{key:"computeTime",value:function(e){var o=this.player,a=this.root.getBoundingClientRect(),s=a.width,u=a.height,l=a.top,c=a.left,h=f.getEventPos(e,o.zoom),p,d,g;o.rotateDeg===90?(p=u,d=l,g=h.clientY):(p=s,d=c,g=h.clientX);var _=g-d;_=_>p?p:_<0?0:_;var y=_/p;y=y<0?0:y>1?1:y;var k=parseInt(y*this.duration*1e3,10)/1e3;return{percent:y,currentTime:k,offset:_,width:p,left:d,e}}},{key:"updateTime",value:function(e){var o=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var s=o.plugins.time;s&&s.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,o){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,o=this._state,a=this.duration;if(!(e.isSeeking||this.isProgressMoving||!e.hasStart)){if(o.now>-1){var s=parseInt(o.now*1e3,10)-parseInt(e.currentTime*1e3,10);if(o.direc===0&&s>300||o.direc===1&&s>-300){o.now=-1;return}else o.now=-1}var u=this.timeOffset+e.currentTime;this.innerList.update({played:u},a),this.progressBtn.style.left="".concat(u/a*100,"%");var l=this.player.plugins.miniprogress;l&&l.update({played:u},a)}}},{key:"onCacheUpdate",value:function(){var e=this.player,o=this.duration,a=e.bufferedPoint;this.innerList.update({cached:a.end},o);var s=this.player.plugins.miniprogress;s&&s.update({cached:a.end},o)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,o=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.isMobile?(this.unbind("touchstart",this.onMouseDown),this.unbind("touchmove",this.onMouseMove),this.unbind("touchend",this.onMouseUp),o&&(o.root&&o.root.removeEventListener("touchmove",f.stopPropagation),o.center&&o.center.removeEventListener("touchend",f.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",o=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(o,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),i}(O);const sc=ac;function ot(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ot=function(i){return typeof i}:ot=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ot(n)}function uc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ai(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function lc(n,r,i){return r&&Ai(n.prototype,r),i&&Ai(n,i),n}function cc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&er(n,r)}function er(n,r){return er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},er(n,r)}function fc(n){var r=dc();return function(){var t=Vt(n),e;if(r){var o=Vt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return hc(this,e)}}function hc(n,r){return r&&(ot(r)==="object"||typeof r=="function")?r:pc(n)}function pc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Vt(n){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vt(n)}var gc='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',yc='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',vc=function(n){cc(i,n);var r=fc(i);function i(){return uc(this,i),r.apply(this,arguments)}return lc(i,[{key:"afterCreate",value:function(){var e=this,o=this.player,a=this.config;a.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(De,function(){e.animate(o.paused)}),this.on(oe,function(){e.animate(o.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:gc,class:"xg-icon-play"},pause:{icon:yc,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var o=this.player;return this.emitUserAction(e,"switch_play_pause"),o.ended?o.replay():o.paused?(o.play(),this.animate(!1)):(o.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var o=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),o.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),o.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(O);const mc=vc;function at(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(i){return typeof i}:at=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},at(n)}function _c(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Li(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function bc(n,r,i){return r&&Li(n.prototype,r),i&&Li(n,i),n}function wc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&tr(n,r)}function tr(n,r){return tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tr(n,r)}function Pc(n){var r=Sc();return function(){var t=Gt(n),e;if(r){var o=Gt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return kc(this,e)}}function kc(n,r){return r&&(at(r)==="object"||typeof r=="function")?r:Oc(n)}function Oc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Gt(n){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gt(n)}var Tc='<svg width="32" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M11.237 14l6.382-6.381A.875.875 0 1016.38 6.38l-7 7a.875.875 0 000 1.238l7 7a.875.875 0 101.238-1.238L11.237 14z" fill="#FFF" fill-rule="evenodd"/></svg>',Cc=function(n){wc(i,n);var r=Pc(i);function i(){return _c(this,i),r.apply(this,arguments)}return bc(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(o){o.preventDefault(),o.stopPropagation(),e.config.onClick(o)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:Tc,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){f.addClass(this.root,"show")}},{key:"hide",value:function(){f.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:T.ROOT_TOP,index:0}}}]),i}(O);function st(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?st=function(i){return typeof i}:st=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},st(n)}function Ec(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function $i(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function xc(n,r,i){return r&&$i(n.prototype,r),i&&$i(n,i),n}function xe(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?xe=Reflect.get:xe=function(e,o,a){var s=Rc(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},xe(n,r,i||n)}function Rc(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=ie(n),n!==null););return n}function Ic(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&nr(n,r)}function nr(n,r){return nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},nr(n,r)}function Ac(n){var r=$c();return function(){var t=ie(n),e;if(r){var o=ie(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Lc(this,e)}}function Lc(n,r){return r&&(st(r)==="object"||typeof r=="function")?r:Ao(n)}function Ao(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function ie(n){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ie(n)}function Dc(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Nc='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M19.173 6.861h6.798v6.798h-2.694V9.555h-4.104V6.86zm4.104 16.416v-4.104h2.694v6.798h-6.798v-2.694h4.104zM6.861 13.66V6.86h6.798v2.694H9.555v4.104H6.86zm2.694 5.514v4.104h4.104v2.694H6.86v-6.798h2.694z"/></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M21.867 10.965h4.104v2.694h-6.798V6.86h2.694v4.104zm-2.694 15.006v-6.798h6.798v2.694h-4.104v4.104h-2.694zm-8.208-15.006V6.861h2.694v6.798H6.86v-2.694h4.104zM6.861 21.867v-2.694h6.798v6.798h-2.694v-4.104H6.861z"/></svg>',Bc=function(n){Ic(i,n);var r=Ac(i);function i(){var t;Ec(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Dc(Ao(t),"_onOrientationChange",function(s){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.setRotateDeg(0):t.setRotateDeg(90))}),t}return xc(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.fullscreen=="boolean"&&(e.config.disable=!e.player.config.fullscreen)}},{key:"afterCreate",value:function(){var e=this,o=this.config,a=this.playerConfig;if(!o.disable){o.target&&(this.playerConfig.fullscreenTarget=this.config.target);var s=f.getFullScreenEl();a.fullscreenTarget===s&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(l){e.emitUserAction(l,"switch_fullscreen",{fullscreen:e.player.fullscreen})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(q,function(u){e.changeLangTextKey(e.find(".xg-tips"),u?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(u),e.config.needBackIcon&&e.show()}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Cc,options:{config:{onClick:function(l){e.handleFullscreen(l)}}}})),P.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Nc,class:"xg-get-fullscreen"},exitFullscreen:{icon:Mc,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",P.device==="mobile"?"touchend":"click",this.handleFullscreen),P.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"setRotateDeg",value:function(e){var o=this.player;window.orientation===90||window.orientation===-90?o.rotateDeg=0:o.rotateDeg=e}},{key:"getRotateFullscreen",value:function(e){var o=this.player;o.isCssfullScreen&&o.exitCssFullscreen(e);var a=e?v.INNER_FULLSCREEN:v.ROTATE_FULLSCREEN;o._fullscreenEl=e||o.root,o.changeFullStyle(o.root,e,a,v.PARENT_ROTATE_FULLSCREEN),o.fullscreen=!0,this.setRotateDeg(90),this.emit(q,!0)}},{key:"exitRotateFullscreen",value:function(e){var o=this.player;o.fullscreen=!1;var a=o._fullscreenEl!==o.root?v.INNER_FULLSCREEN:v.ROTATE_FULLSCREEN;o.recoverFullStyle(o.root,o._fullscreenEl,a,v.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(q,!1)}},{key:"changeFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var o=this.player,a=this.config,s=!1;if((a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen())&&(s=!0),s)o.fullscreen?(o.fullscreen=!1,o.exitCssFullscreen(),this.emit(q,!1)):(o.fullscreen=!0,o.getCssFullscreen(),this.emit(q,!0)),this.animate(o.fullscreen);else if(a.rotateFullscreen)o.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(o.fullscreen);else{if(a.switchCallback&&typeof a.switchCallback=="function"){a.switchCallback(o.fullscreen);return}o.fullscreen?o.exitFullscreen():o.getFullscreen()}}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){xe(ie(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){xe(ie(i.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(O);function ut(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ut=function(i){return typeof i}:ut=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ut(n)}function Fc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Di(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function jc(n,r,i){return r&&Di(n.prototype,r),i&&Di(n,i),n}function lt(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?lt=Reflect.get:lt=function(e,o,a){var s=Hc(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},lt(n,r,i||n)}function Hc(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=me(n),n!==null););return n}function Uc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&rr(n,r)}function rr(n,r){return rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rr(n,r)}function zc(n){var r=Wc();return function(){var t=me(n),e;if(r){var o=me(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Vc(this,e)}}function Vc(n,r){return r&&(ut(r)==="object"||typeof r=="function")?r:Gc(n)}function Gc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function me(n){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},me(n)}var Kc=function(n){Uc(i,n);var r=zc(i);function i(t){var e;return Fc(this,i),e=r.call(this,t),e.isActiving=!1,e}return jc(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,o=this.player.controls.config.mode;this.mode=o==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(ln,function(){e.onTimeUpdate()}),this.on(W,function(){e.onTimeUpdate()}),this.on(Ne,function(){e.onReset()}))}},{key:"show",value:function(){this.mode!=="flex"&&lt(me(i.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player,o=this.config;if(!(o.disable||this.isActiving||!e.hasStart)){var a=e.currentTime+this.timeOffset;this.mode==="flex"?(this.centerCurDom.innerHTML=f.format(a),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=f.format(this.duration))):(this.timeDom.innerHTML=f.format(a),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=f.format(this.duration)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=f.format(0),this.centerDurDom.innerHTML=f.format(0)):(this.timeDom.innerHTML=f.format(0),this.durationDom.innerHTML=f.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var o=e.controls.center;this.centerCurDom=f.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=f.createDom("xg-icon","00:00",{},"xgplayer-time right"),o.children.length>0?o.insertBefore(this.centerCurDom,o.children[0]):o.appendChild(this.centerCurDom),o.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(f.hide(this.durationDom),f.hide(this.timeDom),f.hide(this.find(".time-separator")),f.show(this.find(".time-live-tag"))):f.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(f.hide(this.durationDom),f.hide(this.timeDom),f.hide(this.find(".time-separator")),f.show(this.find(".time-live-tag"))):(f.hide(this.find(".time-live-tag")),f.show(this.find(".time-separator")),f.show(this.durationDom),f.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=f.format(e);return}this.timeDom.innerHTML=f.format(e)}}},{key:"resetActive",value:function(){var e=this,o=this.player,a=function(){e.isActiving=!1};this.off(Ie,a),o.isSeeking?this.once(Ie,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(O);const Yc=Kc;function ct(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ct=function(i){return typeof i}:ct=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(n)}function Xc(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ni(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function qc(n,r,i){return r&&Ni(n.prototype,r),i&&Ni(n,i),n}function Zc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&ir(n,r)}function ir(n,r){return ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ir(n,r)}function Jc(n){var r=ef();return function(){var t=Wt(n),e;if(r){var o=Wt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Qc(this,e)}}function Qc(n,r){return r&&(ct(r)==="object"||typeof r=="function")?r:L(n)}function L(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ef(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Wt(n){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wt(n)}function le(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var tf='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.753 18.48l-1.593-1.592c1.437-1.429 2.326-3.407 2.326-5.592s-.89-4.163-2.326-5.591l1.593-1.593c1.845 1.835 2.987 4.376 2.987 7.184s-1.142 5.349-2.987 7.184zm-3.199-3.185L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',nf='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM17.554 15.295L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998zm0 0L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',rf='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.306 9.703l-2.394-2.406-1.604 1.604 2.417 2.395-2.406 2.395 1.604 1.604 2.383-2.418 2.395 2.406 1.604-1.604-2.417-2.383 2.406-2.395-1.604-1.604-2.384 2.418z"/></svg>',of=function(n){Zc(i,n);var r=Jc(i);function i(){var t;Xc(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),le(L(t),"onBarMousedown",function(s){var u=L(t),l=u.player,c=t.find(".xgplayer-slider"),h=t.find(".xgplayer-bar");c.focus(),f.event(s);var p=h.getBoundingClientRect(),d=f.getEventPos(s,l.zoom),g=p.height-(d.clientY-p.top);if(d.h=g,d.barH=p.height,t.pos=d,!(g<-2))return t.updateVolumePos(g,s),document.addEventListener("mouseup",t.onBarMouseUp),t.isStart=!0,!1}),le(L(t),"onBarMouseMove",function(s){if(!!t.isStart){var u=L(t),l=u.pos,c=u.player;s.preventDefault(),s.stopPropagation(),f.event(s);var h=f.getEventPos(s,c.zoom);t.isMoving=!0;var p=l.h-h.clientY+l.clientY;p>l.barH||t.updateVolumePos(p,s)}}),le(L(t),"onBarMouseUp",function(s){f.event(s),document.removeEventListener("mouseup",t.onBarMouseUp),t.isStart=!1,t.isMoving=!1}),le(L(t),"onMouseenter",function(s){t._timerId&&(f.clearTimeout(L(t),t._timerId),t._timerId=null),f.addClass(t.root,"slide-show")}),le(L(t),"onMouseleave",function(s){t._timerId&&(f.clearTimeout(L(t),t._timerId),t._timerId=null),t._timerId=f.setTimeout(L(t),function(){f.removeClass(t.root,"slide-show"),t.isStart&&t.onBarMouseUp(s),t._timerId=null},200)}),le(L(t),"onVolumeChange",function(s){if(!!t.player){var u=t.player,l=u.muted,c=u.volume;t.isMoving||(t.find(".xgplayer-drag").style.height=l||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(l,c)}}),t}return qc(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:nf,class:"xg-volume-small"},volumeLarge:{icon:tf,class:"xg-volume"},volumeMuted:{icon:rf,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var o=this.playerConfig,a=o.commonStyle,s=o.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("muted_change",function(u){e.changeMuted(u)},{pre:function(l){l.preventDefault(),l.stopPropagation()}}),P.device!=="mobile"&&!this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(co,this.onVolumeChange),this.once(Ae,this.onVolumeChange),f.typeOf(s)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,o){var a=this.player,s=this.find(".xgplayer-drag"),u=this.find(".xgplayer-bar");if(!(!u||!s)){var l=parseInt(e/u.getBoundingClientRect().height*1e3,10);s.style.height="".concat(e,"px");var c=Math.max(Math.min(l/1e3,1),0),h={volume:{from:a.volume,to:c}};a.muted&&(h.muted={from:!0,to:!1}),this.emitUserAction(o,"change_volume",{muted:a.muted,volume:a.volume,props:h}),a.volume=Math.max(Math.min(l/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,o=e.volume,a=e.muted,s=this.find(".xgplayer-value-label"),u=Math.max(Math.min(o,1),0);s.innerText=a?0:Math.ceil(u*100)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var o=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:o.muted,volume:o.volume,props:{muted:{from:o.muted,to:!o.muted}}}),o.volume>0&&(o.muted=!o.muted),o.volume<.01&&(o.volume=this.config.miniVolume)}},{key:"animate",value:function(e,o){e||o===0?this.setAttr("data-state","mute"):o<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",P.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,o=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(o?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(O);const af=of;function ft(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ft=function(i){return typeof i}:ft=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ft(n)}function sf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Mi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function uf(n,r,i){return r&&Mi(n.prototype,r),i&&Mi(n,i),n}function lf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&or(n,r)}function or(n,r){return or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},or(n,r)}function cf(n){var r=pf();return function(){var t=Kt(n),e;if(r){var o=Kt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return ff(this,e)}}function ff(n,r){return r&&(ft(r)==="object"||typeof r=="function")?r:hf(n)}function hf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Kt(n){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Kt(n)}var df='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none"><g clip-path="url(#clip0)" fill="#fff"><path d="M17.5 13.75H6.25A3.75 3.75 0 002.5 17.5v6.25a3.75 3.75 0 003.75 3.75H17.5a3.75 3.75 0 003.75-3.75V17.5a3.75 3.75 0 00-3.75-3.75z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.822 6.094a1.247 1.247 0 00.156 1.79l4.509 4.204a1.25 1.25 0 101.705-1.828L9.93 8.152l4.799-.018.039-.001a10 10 0 019.521 13.983 1.25 1.25 0 002.292.998 12.5 12.5 0 00-11.88-17.48l-5.05.019 2.293-2.46a1.25 1.25 0 10-1.829-1.705L5.854 6.06l-.032.036z"/></g><defs><clipPath id="RotateSvg-clip0"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>',gf=function(n){lf(i,n);var r=cf(i);function i(t){var e;return sf(this,i),e=r.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return uf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.rotate=="boolean"&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Le,function(){e.rotateDeg&&f.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,o){var a=this.player;e||(e=0);var s=this.player,u=s.root,l=s.innerContainer,c=s.video,h=u.offsetWidth,p=l&&o?l.offsetHeight:u.offsetHeight,d="100%",g="100%",_=0,y=0;(e===.75||e===.25)&&(d="".concat(p,"px"),g="".concat(h,"px"),_=-(p-h)/2,y=-(h-p)/2);var k="translate(".concat(_,"px,").concat(y,"px) rotate(").concat(e,"turn)"),w={transformOrigin:"center center",transform:k,webKitTransform:k,height:g,width:d},b=o?c:u,D=o?a.getPlugin("poster"):null;Object.keys(w).map(function(C){b.style[C]=w[C],D&&D.root&&(D.root.style[C]=w[C])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=this.player;this.rotateDeg||(this.rotateDeg=0);var u=e?1:-1;this.rotateDeg=(this.rotateDeg+1+u*.25*a)%1,this.updateRotateDeg(this.rotateDeg,o),s.emit(_o,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:df}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.ROTATE_TIPS,`">
      `).concat(this.i18n.ROTATE_TIPS,`
      </div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(O);function ht(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ht=function(i){return typeof i}:ht=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ht(n)}function yf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Bi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function vf(n,r,i){return r&&Bi(n.prototype,r),i&&Bi(n,i),n}function mf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&ar(n,r)}function ar(n,r){return ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ar(n,r)}function _f(n){var r=wf();return function(){var t=Yt(n),e;if(r){var o=Yt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return bf(this,e)}}function bf(n,r){return r&&(ht(r)==="object"||typeof r=="function")?r:Lo(n)}function Lo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Yt(n){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Yt(n)}function Pf(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var kf='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/></svg>',Of='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 7.7a.5.5 0 00.5-.5v-.7a.5.5 0 00-.5-.5h-4a.5.5 0 00-.5.5v3.96a.5.5 0 00.5.5h.7a.5.5 0 00.5-.5V8.83l2.07 2.109a.5.5 0 00.707.006l.5-.49a.5.5 0 00.006-.707L7.973 7.7H9.5z" fill="#fff"/></svg>',ce={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},Sf=function(n){mf(i,n);var r=_f(i);function i(){var t;yf(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Pf(Lo(t),"switchPIP",function(s){if(!t.isPIPAvailable())return!1;s.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(s,"change_pip",{from:"pip",to:"normal"}),t.setAttr("data-state","normal")):t.player.video.readyState===4&&(t.requestPIP(),t.emitUserAction(s,"change_pip",{from:"normal",to:"pip"}),t.setAttr("data-state","pip"))}),t}return vf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;!this.isPIPAvailable()||(this.pMode=ce.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(cn,function(){e.config.showIcon&&(f.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:kf,class:"xg-get-pip"},pipIconExit:{icon:Of,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,o=this.player;this.leavePIPCallback=function(){var a=o.paused;f.setTimeout(e,function(){!a&&o.videoPlay()},0),!a&&o.videoPlay(),e.setAttr("data-state","normal"),o.emit(xn,!1)},this.enterPIPCallback=function(a){o.emit(xn,!0),e.pipWindow=a.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var s=o.video.webkitPresentationMode;e.pMode===ce.FULLSCREEN&&s!==ce.FULLSCREEN&&o.onFullscreenChange(null,!1),e.pMode=s,s===ce.PIP?e.enterPIPCallback(a):s===ce.INLINE&&e.leavePIPCallback(a)},o.video&&(o.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),o.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(o.video)&&o.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,o=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var a=o.poster;return a&&(e.video.poster=f.typeOf(a)==="String"?a:a.poster),i.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(s){return console.error("requestPiP",s),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(i.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(o){return console.error("exitPIP",o),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===ce.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return document.pictureInPictureEnabled&&(f.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&f.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon&&this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),i}(O);const Tf=Sf;function pt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pt=function(i){return typeof i}:pt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},pt(n)}function Cf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Fi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ef(n,r,i){return r&&Fi(n.prototype,r),i&&Fi(n,i),n}function xf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&sr(n,r)}function sr(n,r){return sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},sr(n,r)}function Rf(n){var r=Af();return function(){var t=Xt(n),e;if(r){var o=Xt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return If(this,e)}}function If(n,r){return r&&(pt(r)==="object"||typeof r=="function")?r:ur(n)}function ur(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Af(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Xt(n){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Xt(n)}function Lf(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var $f='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>',Df=function(n){xf(i,n);var r=Rf(i);function i(t){var e;return Cf(this,i),e=r.call(this,t),Lf(ur(e),"playNext",function(o){var a=ur(e),s=a.player;o.preventDefault(),o.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,s.emit(Rn,e.idx+1),e.nextHandler(e.config.urlList[e.idx],e.idx)):(e.nextHandler(),s.emit(Rn))}),e.idx=-1,e}return Ef(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:$f}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var e=P.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var o=this.player;!e||(o.pause(),o.currentTime=0,o.autoplay=!0,o.src=e)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">`.concat(this.i18n.PLAYNEXT_TIPS,`</div>
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(O),$o={exports:{}};(function(n,r){(function(i,t){n.exports=t()})(Wo,function(){return function i(t,e,o){var a=window,s="application/octet-stream",u=o||s,l=t,c=!e&&!o&&l,h=document.createElement("a"),p=function(E){return String(E)},d=a.Blob||a.MozBlob||a.WebKitBlob||p,g=e||"download",_,y;if(d=d.call?d.bind(a):Blob,String(this)==="true"&&(l=[l,u],u=l[0],l=l[1]),c&&c.length<2048&&(g=c.split("/").pop().split("?")[0],h.href=c,h.href.indexOf(c)!==-1)){var k=new XMLHttpRequest;return k.open("GET",c,!0),k.responseType="blob",k.onload=function(E){i(E.target.response,g,s)},setTimeout(function(){k.send()},0),k}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l))if(l.length>1024*1024*1.999&&d!==p)l=C(l),u=l.type||s;else return navigator.msSaveBlob?navigator.msSaveBlob(C(l),g):_e(l);else if(/([\x80-\xff])/.test(l)){var w=0,b=new Uint8Array(l.length),D=b.length;for(w;w<D;++w)b[w]=l.charCodeAt(w);l=new d([b],{type:u})}_=l instanceof d?l:new d([l],{type:u});function C(E){var ae=E.split(/[:;,]/),be=ae[1],Bo=ae[2]=="base64"?atob:decodeURIComponent,Dr=Bo(ae.pop()),Nr=Dr.length,we=0,Mr=new Uint8Array(Nr);for(we;we<Nr;++we)Mr[we]=Dr.charCodeAt(we);return new d([Mr],{type:be})}function _e(E,ae){if("download"in h)return h.href=E,h.setAttribute("download",g),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout(function(){h.click(),document.body.removeChild(h),ae===!0&&setTimeout(function(){a.URL.revokeObjectURL(h.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(E)&&(E="data:"+E.replace(/^data:([\w\/\-\+]+)/,s)),window.open(E)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=E),!0;var be=document.createElement("iframe");document.body.appendChild(be),!ae&&/^data:/.test(E)&&(E="data:"+E.replace(/^data:([\w\/\-\+]+)/,s)),be.src=E,setTimeout(function(){document.body.removeChild(be)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(_,g);if(a.URL)_e(a.URL.createObjectURL(_),!0);else{if(typeof _=="string"||_.constructor===p)try{return _e("data:"+u+";base64,"+a.btoa(_))}catch(E){return _e("data:"+u+","+encodeURIComponent(_))}y=new FileReader,y.onload=function(E){_e(this.result)},y.readAsDataURL(_)}return!0}})})($o);const Nf=$o.exports;function dt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(i){return typeof i}:dt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},dt(n)}function Mf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ji(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Bf(n,r,i){return r&&ji(n.prototype,r),i&&ji(n,i),n}function Ff(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&lr(n,r)}function lr(n,r){return lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lr(n,r)}function jf(n){var r=Uf();return function(){var t=qt(n),e;if(r){var o=qt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Hf(this,e)}}function Hf(n,r){return r&&(dt(r)==="object"||typeof r=="function")?r:Do(n)}function Do(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function qt(n){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qt(n)}function zf(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Vf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>',Gf=function(n){Ff(i,n);var r=jf(i);function i(t){var e;return Mf(this,i),e=r.call(this,t),zf(Do(e),"download",function(o){if(!e.isLock){e.emitUserAction(o,"download");var a=e.getAbsoluteURL(e.player.src);Nf(a),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return Bf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.download=="boolean"&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Vf}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var o=document.createElement("div");o.innerHTML='<a href="'.concat(e,'">x</a>'),e=o.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   <div class="xg-tips" lang-key="`.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"downloadIcon"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(O);function gt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gt=function(i){return typeof i}:gt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},gt(n)}function Wf(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Hi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Kf(n,r,i){return r&&Hi(n.prototype,r),i&&Hi(n,i),n}function Yf(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&cr(n,r)}function cr(n,r){return cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},cr(n,r)}function Xf(n){var r=Jf();return function(){var t=Zt(n),e;if(r){var o=Zt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return qf(this,e)}}function qf(n,r){return r&&(gt(r)==="object"||typeof r=="function")?r:Zf(n)}function Zf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Zt(n){return Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zt(n)}var Qf=function(n){Yf(i,n);var r=Xf(i);function i(){return Wf(this,i),r.apply(this,arguments)}return Kf(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(o){e.fitVideo&&(e.width=o.vWidth,e.height=o.vHeight)},this.once(Le,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,o){var a=document.createElement("a");a.href=e,a.download=o;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}},{key:"createCanvans",value:function(e,o){var a=document.createElement("canvas");this.canvasCtx=a.getContext("2d"),this.canvas=a,a.width=e||this.config.width,a.height=o||this.config.height}},{key:"onClickBtn",value:function(e){var o=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(a){o.emit(bo,a),o.saveScreenShot(a,o.config.name+o.config.format)})}},{key:"shot",value:function(e,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},u=this.config,l=this.player,c=s.quality||u.quality,h=s.type||u.type;return new Promise(function(p,d){a.canvas?(a.canvas.width=e||u.width,a.canvas.height=o||u.height):a.createCanvans(e,o),a.canvasCtx.drawImage(l.video,0,0,e||u.width,o||u.height);var g=a.canvas.toDataURL(h,c).replace(h,"image/octet-stream");g=g.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),p(g)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Le,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",o="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[o],'">').concat(this.i18n[o],"</span>"),` 
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(O);function eh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ui(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function th(n,r,i){return r&&Ui(n.prototype,r),i&&Ui(n,i),n}var nh=function(){function n(r){eh(this,n),this.config=r.config,this.parent=r.root,this.root=f.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),r.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var i=P.device==="mobile"?"touchend":"click";this._delegates=O.delegate.call(this,this.root,"li",i,this.onItemClick)}return th(n,[{key:"renderItemList",value:function(i){var t=this,e=this.config,o=this.root;i?e.data=i:i=e.data,e.style&&Object.keys(e.style).map(function(a){o.style[a]=e[a]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(a,s){var u=a.selected?"option-item selected":"option-item";a["data-index"]=s,t.root.appendChild(f.createDom("li","<span>".concat(a.showText,"</span>"),a,u))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var t=i.delegateTarget;if(t&&f.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,o=this.root.querySelector(".selected");f.addClass(t,"selected"),o&&f.removeClass(o,"selected"),e(i,{from:o?this.getAttrObj(o,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(i,t){if(!i||!t)return{};var e={};t.map(function(a){e[a]=i.getAttribute(a)});var o=i.getAttribute("data-index");return o&&(e.index=Number(o)),e}},{key:"show",value:function(){f.removeClass(this.root,"hide"),f.addClass(this.root,"active")}},{key:"hide",value:function(){f.removeClass(this.root,"active"),f.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),n}();function Re(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Re=function(i){return typeof i}:Re=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Re(n)}function rh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function zi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function ih(n,r,i){return r&&zi(n.prototype,r),i&&zi(n,i),n}function oh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&fr(n,r)}function fr(n,r){return fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fr(n,r)}function ah(n){var r=lh();return function(){var t=Jt(n),e;if(r){var o=Jt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return sh(this,e)}}function sh(n,r){return r&&(Re(r)==="object"||typeof r=="function")?r:uh(n)}function uh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Jt(n){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jt(n)}var He=P.device==="mobile",No=function(n){oh(i,n);var r=ah(i);function i(t){var e;return rh(this,i),e=r.call(this,t),e.isActive=!1,e.curValue=null,e.curIndex=0,e}return ih(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,o=this.config;He&&o.listType!=="middle"&&(o.listType="rightSide"),o.hidePortrait&&f.addClass(this.root,"portrait"),this.once(j,function(){o.list&&o.list.length>0&&(e.renderItemList(o.list),e.show())}),He&&this.on(Cr,function(){!e.isActive||(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),this.activeEvent=He?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||f.addClass(this.root,"show")}},{key:"hide",value:function(){f.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,o,a){if(e===void 0)return"";var s=this.config.list;!a&&(a=this.player.lang),o=!o||f.isUndefined(e[o])?"text":o,typeof e=="number"&&(e=s[e]);try{return Re(e[o])==="object"?e[o][a]||e[o].zh:e[o]}catch(u){return console.warn(u),""}}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(e!==this.isActive){var o=this.player.controls,a=this.config.listType;e?(a==="rightSide"?o.blur():o.focus(),this.optionsList&&this.optionsList.show()):(a==="rightSide"?o.focus():o.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,o){e.preventDefault(),e.stopPropagation();var a=this.config,s=a.listType,u=a.list;(He||s==="rightSide")&&this.onToggle(!1),this.curIndex=o.to.index,this.curItem=u[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,o=this.curIndex<e.length?this.curIndex:0,a=e[o];!a||(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}},{key:"renderItemList",value:function(e,o){var a=this,s=this.config,u=this.optionsList,l=this.player;if(typeof o=="number"&&(this.curIndex=o,this.curItem=s.list[o]),u){u.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:s.listType==="rightSide"?"right-side":"",onItemClick:function(p,d){a.onItemClick(p,d)}},root:s.listType==="rightSide"?l.root:this.root};this.config.isShowIcon&&(this.optionsList=new nh(c),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(!!this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon btn-text">
    <span class="icon-text"></span>
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),i}(O);function yt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yt=function(i){return typeof i}:yt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},yt(n)}function ch(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Vi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function fh(n,r,i){return r&&Vi(n.prototype,r),i&&Vi(n,i),n}function ge(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?ge=Reflect.get:ge=function(e,o,a){var s=hh(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},ge(n,r,i||n)}function hh(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=ee(n),n!==null););return n}function ph(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&hr(n,r)}function hr(n,r){return hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},hr(n,r)}function dh(n){var r=vh();return function(){var t=ee(n),e;if(r){var o=ee(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return gh(this,e)}}function gh(n,r){return r&&(yt(r)==="object"||typeof r=="function")?r:yh(n)}function yh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function ee(n){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ee(n)}var mh=function(n){ph(i,n);var r=dh(i);function i(t){var e;return ch(this,i),e=r.call(this,t),e.curTime=0,e.isPaused=!0,e}return fh(i,[{key:"beforeCreate",value:function(e){var o=e.config.list;Array.isArray(o)&&o.length>0&&(e.config.list=o.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;ge(ee(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(o){e.changeDefinitionList(o)}),this.on(Ir,function(o){e.renderItemList(o.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,o=e.list,a=e.defaultDefinition;if(o.length>0){var s=null;o.map(function(u){u.definition===a&&(s=u)}),s||(s=o[0]),this.changeDefinition(s)}}},{key:"renderItemList",value:function(e){var o=this,a=this.player,s=this.config.list,u=e&&e.url?e.url:a.currentSrc||a.src,l=e&&e.definition?e.definition:this.config.defaultDefinition;e&&!Array.isArray(e)&&s.forEach(function(p){p.selected=!1});var c=0,h=s.map(function(p,d){var g={url:p.url,definition:p.definition||"",showText:o.getTextByLang(p)||p.definition,selected:!1};return(p.selected||p.url===u||!f.isUndefined(p.definition)&&p.definition===l)&&(g.selected=!0,c=d),g});ge(ee(i.prototype),"renderItemList",this).call(this,h,c)}},{key:"changeDefinitionList",value:function(e){!Array.isArray(e)||(this.config.list=e.map(function(o){return!o.text&&o.name&&(o.text=o.name),o.text||(o.text=o.definition),o}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,o){var a=this.player;a.switchURL?a.switchUrl(e.url):a.changeDefinition(e,o)}},{key:"onItemClick",value:function(e,o){ge(ee(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:o.from,to:o.to}),this.player.changeDefinition(o.to,o.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),i}(No);function vt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vt=function(i){return typeof i}:vt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},vt(n)}function _h(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Gi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function bh(n,r,i){return r&&Gi(n.prototype,r),i&&Gi(n,i),n}function J(n,r,i){return typeof Reflect!="undefined"&&Reflect.get?J=Reflect.get:J=function(e,o,a){var s=wh(e,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},J(n,r,i||n)}function wh(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=U(n),n!==null););return n}function Ph(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&pr(n,r)}function pr(n,r){return pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},pr(n,r)}function kh(n){var r=Th();return function(){var t=U(n),e;if(r){var o=U(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Oh(this,e)}}function Oh(n,r){return r&&(vt(r)==="object"||typeof r=="function")?r:Sh(n)}function Sh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Th(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function U(n){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},U(n)}var Ch=function(n){Ph(i,n);var r=kh(i);function i(t){var e;return _h(this,i),e=r.call(this,t),e.curRate=1,e}return bh(i,[{key:"beforeCreate",value:function(e){var o=e.player.config.playbackRate,a=o?Array.isArray(o)?o:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(s){return typeof s=="number"?s={rate:s,text:"".concat(s,"x")}:!s.text&&s.rate&&(s.text="".concat(s.rate,"x")),s}))}},{key:"afterCreate",value:function(){var e=this;J(U(i.prototype),"afterCreate",this).call(this),this.on(fo,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||J(U(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,o){J(U(i.prototype),"onItemClick",this).apply(this,arguments);var a=e.delegateTarget,s=Number(a.getAttribute("rate"));if(!s||s===this.curValue)return!1;var u={playbackRate:{from:this.player.playbackRate,to:s}};this.emitUserAction(e,"change_rate",{props:u}),this.curValue=s,this.player.playbackRate=s}},{key:"renderItemList",value:function(){var e=this,o=this.player.playbackRate||1;this.curValue=o;var a=0,s=this.config.list.map(function(u,l){var c={rate:u.rate};return c.rate===o&&(c.selected=!0,a=l),c.showText=e.getTextByLang(u),c});J(U(i.prototype),"renderItemList",this).call(this,s,a)}},{key:"destroy",value:function(){J(U(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),i}(No);function mt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mt=function(i){return typeof i}:mt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},mt(n)}function Eh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Wi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function xh(n,r,i){return r&&Wi(n.prototype,r),i&&Wi(n,i),n}function Rh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&dr(n,r)}function dr(n,r){return dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},dr(n,r)}function Ih(n){var r=$h();return function(){var t=Qt(n),e;if(r){var o=Qt(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Ah(this,e)}}function Ah(n,r){return r&&(mt(r)==="object"||typeof r=="function")?r:Lh(n)}function Lh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Qt(n){return Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Qt(n)}var Dh='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',Nh='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',Ki=function(n){Rh(i,n);var r=Ih(i);function i(){return Eh(this,i),r.apply(this,arguments)}return xh(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Ct,function(o){e.animate(o)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,o=this.find(".xgplayer-icon");o.appendChild(e.cssFullscreen),o.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var o=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:o}),o?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){!this.root||(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var o=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?o.EXITCSSFULLSCREEN_TIPS:o.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Dh,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Nh,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:T.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(O);function _t(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(i){return typeof i}:_t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_t(n)}function Mh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Yi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Bh(n,r,i){return r&&Yi(n.prototype,r),i&&Yi(n,i),n}function Fh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&gr(n,r)}function gr(n,r){return gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gr(n,r)}function jh(n){var r=zh();return function(){var t=en(n),e;if(r){var o=en(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Hh(this,e)}}function Hh(n,r){return r&&(_t(r)==="object"||typeof r=="function")?r:Uh(n)}function Uh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function en(n){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},en(n)}var Vh=function(n){Fh(i,n);var r=jh(i);function i(){return Mh(this,i),r.apply(this,arguments)}return Bh(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(j,function(){e.handleCanPlay()}),this.on(un,function(o){e.onError(o)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){f.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.player,a=e.errorType,s=o.error;if(!s)switch(a){case"decoder":s=this.i18n.MEDIA_ERR_DECODE;break;case"network":s=this.i18n.MEDIA_ERR_NETWORK;break;default:s=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=s,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(O);function bt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bt=function(i){return typeof i}:bt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bt(n)}function Gh(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Xi(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Wh(n,r,i){return r&&Xi(n.prototype,r),i&&Xi(n,i),n}function Kh(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&yr(n,r)}function yr(n,r){return yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},yr(n,r)}function Yh(n){var r=Zh();return function(){var t=tn(n),e;if(r){var o=tn(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Xh(this,e)}}function Xh(n,r){return r&&(bt(r)==="object"||typeof r=="function")?r:qh(n)}function qh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function tn(n){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},tn(n)}var Jh=function(n){Kh(i,n);var r=Yh(i);function i(){return Gh(this,i),r.apply(this,arguments)}return Wh(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(o){(e.config.onClick||e.customOnClick)&&(o.preventDefault(),o.stopPropagation(),e.customOnClick?e.customOnClick(o):e.config.onClick(o))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var o=this;Object.keys(e).map(function(a){o.root.style[a]=e[a]})}},{key:"show",value:function(e){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(!!e){this.customOnClick=s;var u=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),f.addClass(this.root,"show"),a.mode==="arrow"&&f.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var l=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(l){var c=a.interval||u;this.intervalId=setTimeout(function(){o.hide()},c)}}}},{key:"hide",value:function(){f.removeClass(this.root,"show"),f.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(v.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(O);const Qh=Jh;var qi={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Mo(n){Object.keys(qi).map(function(r){n[r]===void 0&&(n[r]=qi[r])})}var Zi={initDots:function(){var r=this;this._ispots.map(function(i){r.createDot(i,!1)}),this._ispotsInit=!0},createDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(!!t&&(i&&(Mo(r),this._ispots.push(r)),!(!this._ispotsInit&&i))){var e=this.calcuPosition(r.time,r.duration),o=r.style||{};o.left="".concat(e.left,"%"),o.width="".concat(e.width,"%");var a="xgspot_".concat(r.id," xgplayer-spot");e.isMini&&(a+=" mini");var s=f.createDom("xg-spot","",{"data-text":r.text,"data-time":r.time,"data-id":r.id},a);Object.keys(o).map(function(u){s.style[u]=o[u]}),t.outer&&t.outer.appendChild(s)}},findDot:function(r){if(!!this.player.plugins.progress){var i=this._ispots.filter(function(t,e){return t.id===r});return i.length>0?i[0]:null}},updateDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(!!t){var e=this.findDot(r.id);if(e&&Object.keys(r).map(function(u){e[u]=r[u]}),!!this._ispotsInit){var o=t.find('xg-spot[data-id="'.concat(r.id,'"]'));if(!!o){var a=this.calcuPosition(r.time,r.duration),s=r.style||{};s.left="".concat(a.left,"%"),s.width="".concat(a.width,"%"),o.setAttribute("data-text",r.text),o.setAttribute("data-time",r.time),a.isMini?f.addClass(o,"mini"):f.removeClass(o,"mini"),Object.keys(s).map(function(u){o.style[u]=s[u]}),i&&this.showDot(r.id)}}}},deleteDot:function(r){var i=this._ispots,t=this.player.plugins.progress;if(!!t){for(var e=[],o=0;o<i.length;o++)i[o].id===r&&e.push(o);for(var a=e.length,s=a-1;s>=0;s--)if(i.splice(e[s],1),this._ispotsInit){var u=t.find('xg-spot[data-id="'.concat(r,'"]'));u&&u.parentElement.removeChild(u)}}},deleteAllDots:function(){var r=this.player.plugins.progress;if(!!r){if(!this._ispotsInit){this._ispots=[];return}for(var i=r.root.getElementsByTagName("xg-spot"),t=i.length-1;t>=0;t--)r.outer.removeChild(i[t]);this._ispots=[]}},updateAllDots:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(!!t){if(!this._ispotsInit){this._ispots=i;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),o=e.length;if(o>i.length)for(var a=o-1;a>i.length-1;a--)t.outer.removeChild(e[a]);i.map(function(s,u){u<o?(e[u].setAttribute("data-id","".concat(s.id)),r._ispots.push(s),r.updateDot(s)):r.createDot(s)})}}};function ep(n){var r=n.config,i=n.player;Object.keys(Zi).map(function(e){n[e]=Zi[e].bind(n)});var t=i.config.progressDot||r.ispots||[];n._ispots=t.map(function(e){return Mo(e),e}),n._ispotsInit=!1,i.once(ln,function(){n.initDots()})}function wt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wt=function(i){return typeof i}:wt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},wt(n)}function tp(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Ji(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function np(n,r,i){return r&&Ji(n.prototype,r),i&&Ji(n,i),n}function rp(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&vr(n,r)}function vr(n,r){return vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},vr(n,r)}function ip(n){var r=ap();return function(){var t=nn(n),e;if(r){var o=nn(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return op(this,e)}}function op(n,r){return r&&(wt(r)==="object"||typeof r=="function")?r:mr(n)}function mr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ap(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function nn(n){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},nn(n)}function Qi(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var fe={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd"},sp=function(n){rp(i,n);var r=ip(i);function i(t){var e;return tp(this,i),e=r.call(this,t),Qi(mr(e),"onMousemove",function(o){(e._state.f||f.hasClass(o.target,"xg-spot-content"))&&(f.event(o),o.stopPropagation())}),Qi(mr(e),"onMousedown",function(o){(e._state.f||f.hasClass(o.target,"xg-spot-content"))&&(f.event(o),o.stopPropagation())}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e._state={now:0,f:!1},e}return np(i,[{key:"beforeCreate",value:function(e){var o=e.player.plugins.progress;o&&(e.root=o.root)}},{key:"onPluginsReady",value:function(){var e=this.player;!e.plugins.progress||(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),ep(this),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,o=this.player.plugins.progress;if(!(P.device==="mobile"||!o)){Object.keys(fe).map(function(s){e[fe[s]]=e[fe[s]].bind(e),o.addCallBack(s,e[fe[s]])}),this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(s){s.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,s)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.isDrag=!0,this.videoPreview&&f.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&f.removeClass(this.videoPreview,"show")}},{key:"updateLinePos",value:function(e,o){var a=this.root,s=this.previewLine,u=this.timePoint,l=this.player,c=l.controls.mode,h=c==="flex",p=a.getBoundingClientRect().width,d=u.getBoundingClientRect().width,g=e-p/2,_,y;g<0&&!h?(g=0,_=e-p/2,!this.thumbnail&&(y=e-p/2-d/2)):g>o-p&&!h?(_=g-(o-p),!this.thumbnail&&(y=g-(o-p)-d/2),g=o-p):(_=0,!this.thumbnail&&(y=-d/2)),_!==void 0&&(s.style.transform="translateX(".concat(_,"px)")),y!==void 0&&(u.style.transform="translateX(".concat(y,"px)")),a.style.transform="translateX(".concat(g,"px)")}},{key:"updateTimeText",value:function(e){var o=this.timeText,a=this.timePoint;o.textContent=e,!this.thumbnail&&(a.textContent=e)}},{key:"updatePosition",value:function(e,o,a,s){var u=this.root,l=this.config,c=this._state;if(!!u){this.updateLinePos(e,o),c.now=a;var h=f.format(a);s&&s.target&&f.hasClass(s.target,"xgplayer-spot")?(this.showTips(s.target.getAttribute("data-text"),!1,h),c.f=!0,l.isFocusDots&&c.f&&(c.now=parseInt(s.target.getAttribute("data-time"),10))):l.defaultText?(c.f=!1,this.showTips(l.defaultText,!0,h)):(c.f=!1,this.hideTips("")),this.updateTimeText(h),this.updateThumbnails(c.now)}}},{key:"updateThumbnails",value:function(e){var o=this.player,a=this.videoPreview,s=o.plugins.thumbnail;if(s&&s.usable){this.thumbnail&&s.update(this.thumbnail,e,160,90);var u=a&&a.getBoundingClientRect();this.videothumbnail&&s.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P.device!=="mobile"){var o=this.player,a=this.config,s=o.getPlugin("thumbnail");if(s&&Object.keys(e).map(function(l){s.config[l]=e[l]}),!s||!s.usable||!a.isShowThumbnail){f.addClass(this.root,"short-line no-thumbnail");return}else f.removeClass(this.root,"short-line no-thumbnail");this._hasThumnail=!0;var u=this.find(".xg-spot-thumbnail");this.thumbnail=s.createThumbnail(u,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=f.createDom("xg-video-preview","",{},"xgvideo-preview"),o.root.appendChild(this.videoPreview),this.videothumbnail=s.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}}},{key:"calcuPosition",value:function(e,o){var a=this.player.plugins.progress,s=this.player,u=a.root.getBoundingClientRect().width,l=s.duration/u*6;return e+o>s.duration&&(o=s.duration-e),e/s.duration*100,o/s.duration,{left:e/s.duration*100,width:o/s.duration*100,isMini:o<l}}},{key:"showDot",value:function(e){var o=this.findDot(e);if(o){var a=this.root.getBoundingClientRect(),s=a.width,u=o.time/this.player.duration*s;this.updatePosition(u,s,o.time)}}},{key:"showTips",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";!e||(f.addClass(this.root,"no-timepoint"),f.addClass(this.find(".xg-spot-content"),"show-text"),o&&this.config.mode==="production"?(f.addClass(this.root,"product"),this.tipText.textContent=e):(f.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){f.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",f.removeClass(this.find(".xg-spot-content"),"show-text"),f.removeClass(this.root,"product")}},{key:"destroy",value:function(){var e=this,o=this.player.plugins.progress;o&&Object.keys(fe).map(function(a){o.removeCallBack(a,e[fe[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return P.device==="mobile"||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),i}(O);function Pt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pt=function(i){return typeof i}:Pt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Pt(n)}function up(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function eo(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function lp(n,r,i){return r&&eo(n.prototype,r),i&&eo(n,i),n}function cp(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&_r(n,r)}function _r(n,r){return _r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_r(n,r)}function fp(n){var r=dp();return function(){var t=rn(n),e;if(r){var o=rn(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return hp(this,e)}}function hp(n,r){return r&&(Pt(r)==="object"||typeof r=="function")?r:pp(n)}function pp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function rn(n){return rn=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},rn(n)}var gp=function(n){cp(i,n);var r=fp(i);function i(t){var e;return up(this,i),e=r.call(this,t),e.ratio=1,e.interval=null,e.preloadMark={},e}return lp(i,[{key:"afterCreate",value:function(){this.usable&&this.initThumbnail()}},{key:"usable",get:function(){var e=this.config,o=e.urls,a=e.pic_num;return o&&o.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,o=e.width,a=e.height,s=e.pic_num,u=e.interval;this.ratio=o/a*100,this.interval=u||Math.round(this.player.duration/s),this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var o=this,a=this.config.urls,s=a.length,u=[e-1,e,e+1,e+2];u.map(function(l){!o.preloadMark[l]&&l>=0&&l<s&&(f.preloadImg(a[l]),o.preloadMark[l]=!0)})}},{key:"getPosition",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=this.config,u=s.pic_num,l=s.row,c=s.col,h=s.width,p=s.height;this.interval=Math.round(this.player.duration/u);var d=Math.ceil(e/this.interval);d=d>u?u:d;var g=d<l*c?0:Math.ceil(d/(l*c))-1,_=d-g*(c*l),y=_>0?Math.ceil(_/c)-1:0,k=_>0?_-y*c-1:0,w=0,b=0;if(o&&a){var D=o/a;D<h/p?(w=o,b=w/(h/p)):(b=a,w=b*(h/p))}else w=o||h,b=w/(h/p);var C=this.getUrlByIndex(g);return{urlIndex:g,rowIndex:y,colIndex:k,url:C,height:b,width:w,style:{backgroundImage:"url(".concat(C,")"),backgroundSize:"".concat(w*c,"px auto"),backgroundPosition:"-".concat(k*w,"px -").concat(y*b,"px"),width:"".concat(w,"px"),height:"".concat(b,"px")}}}},{key:"update",value:function(e,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=this.config,c=l.pic_num,h=l.urls;if(!(c<=0||!h||h.length===0)){var p=this.getPosition(o,a,s);this.preload(p.urlIndex),Object.keys(p.style).map(function(d){e.style[d]=p.style[d]}),Object.keys(u).map(function(d){e.style[d]=u[d]})}}},{key:"createThumbnail",value:function(e,o){var a=f.createDom("xg-thumbnail","",{},"thumbnail ".concat(o));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(O);function kt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kt=function(i){return typeof i}:kt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},kt(n)}function yp(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function to(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function vp(n,r,i){return r&&to(n.prototype,r),i&&to(n,i),n}function mp(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&br(n,r)}function br(n,r){return br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},br(n,r)}function _p(n){var r=Pp();return function(){var t=on(n),e;if(r){var o=on(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return bp(this,e)}}function bp(n,r){return r&&(kt(r)==="object"||typeof r=="function")?r:wp(n)}function wp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function on(n){return on=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},on(n)}var kp=function(n){mp(i,n);var r=_p(i);function i(){return yp(this,i),r.apply(this,arguments)}return vp(i,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},o=arguments.length>1?arguments[1]:void 0;!o||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/o*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/o*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),i}(O);const Op=kp;function Ot(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ot=function(i){return typeof i}:Ot=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ot(n)}function Sp(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function no(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Tp(n,r,i){return r&&no(n.prototype,r),i&&no(n,i),n}function Cp(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&wr(n,r)}function wr(n,r){return wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wr(n,r)}function Ep(n){var r=Rp();return function(){var t=an(n),e;if(r){var o=an(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return xp(this,e)}}function xp(n,r){return r&&(Ot(r)==="object"||typeof r=="function")?r:St(n)}function St(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function an(n){return an=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},an(n)}function Sn(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var Tn={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate"};function Ip(){try{return window.performance.now()}catch(n){return new Date().getTime()}}function ro(n){return!(P.browser==="safari"&&(/^blob/.test(n.currentSrc)||/^blob/.test(n.src)))}function Ap(){try{var n=document.createElement("canvas").getContext;return!!n}catch(r){return!1}}var Ue=null,Lp=function(n){Cp(i,n);var r=Ep(i);function i(){var t;Sp(this,i);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),Sn(St(t),"onLoadedData",function(){if(!!t.player){var s=t.player.video;t.videoPI=parseInt(s.videoWidth/s.videoHeight*100,10)}}),Sn(St(t),"start",function(){var s=t.player.video,u=Ip();!ro(s)||!t.canvasCtx||(t.stop(),(t.config.mode===Tn.REAL_TIME||u-t.preTime>=t.interval)&&(s&&s.videoWidth&&t.update(s,s.videoWidth,s.videoHeight),t.preTime=u),t.frameId=window.setTimeout(function(){t.start()},t.interval))}),Sn(St(t),"stop",function(){t.frameId&&(window.clearTimeout(t.frameId),t.frameId=null)}),t}return Tp(i,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var o=this.config,a=o.disable,s=o.mode;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(cn,function(){!e.player||(e.init(),!e.player.paused&&e.start())}),this.once(Ae,this.onLoadedData),this.on(Me,function(){e.once(Ae,e.onLoadedData)}),s!==Tn.FIRST_FRAME&&(this.on(oe,function(){e.start()}),this.on(De,function(){e.stop()})),s===Tn.FIRST_FRAME&&this.once(W,function(){var u=e.player.video;u&&ro(u)&&u.videoWidth&&e.update(u,u.videoWidth,u.videoHeight)}))}},{key:"init",value:function(){var e=this.player,o=this.config;this.canvasFilter=i.supportCanvasFilter();try{var a=this.config.isInnerRender&&e.innerContainer||e.root;a.insertAdjacentHTML("afterbegin",`<div class="xgplayer-dynamic-bg"><canvas>
        </canvas><xgmask></xgmask></div>`),this.root=a.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=o.filter,this.canvas.style.webkitFilter=o.filter),this.mask=this.find("xgmask"),o.addMask&&(this.mask.style.background=o.maskBg),this.canvasCtx=this.canvas.getContext("2d");var s=this.playerConfig.poster;if(s){var u=f.typeOf(s)==="String"?s:f.typeOf(s.poster)==="String"?s.poster:null;this.updateImg(u)}}catch(l){S.logError("plugin:DynamicBg",l)}}},{key:"updateImg",value:function(e){var o=this;if(!!e){var a=this.canvas.getBoundingClientRect(),s=a.width,u=a.height,l=new window.Image;l.onload=function(){!o.canvas||(o.canvas.height=u,o.canvas.width=s,l=null)},l.src=e}}},{key:"update",value:function(e,o,a){if(!(!this.canvas||!this.canvasCtx||!this.videoPI))try{var s=this._pos,u=this.config,l=this.canvas.getBoundingClientRect(),c=l.width,h=l.height;if(this.videoPI=parseInt(o/a*100,10),c!==s.width||h!==s.height){var p=parseInt(c/h*100,10);s.width=this.canvas.width=c,s.height=this.canvas.height=h;var d=h,g=c;p<this.videoPI?g=parseInt(h*this.videoPI/100,10):p>this.videoPI&&(d=parseInt(c*100/this.videoPI,10)),p<this.videoPI?g=parseInt(h*this.videoPI/100,10):p>this.videoPI&&(d=parseInt(c*100/this.videoPI,10)),s.rwidth=g*1.2,s.rheight=d*1.2,s.x=(c-s.rwidth)/2,s.y=(h-s.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=u.filter),this.canvasCtx.drawImage(e,s.x,s.y,s.rwidth,s.rheight)}catch(_){S.logError("plugin:DynamicBg",_)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Ue=="boolean"||(Ue=Ap()),Ue}},{key:"supportCanvasFilter",value:function(){return!(P.browser==="safari"||P.browser==="firefox")}}]),i}(O);const $p=Lp,Dp={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}};function Np(n){return jp(n)||Fp(n)||Bp(n)||Mp()}function Mp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bp(n,r){if(!!n){if(typeof n=="string")return Pr(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pr(n,r)}}function Fp(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jp(n){if(Array.isArray(n))return Pr(n)}function Pr(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function Hp(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var Up=function n(r,i){var t,e,o;Hp(this,n);var a=i&&i.isMobileSimulateMode,s=i.isLive,u=s?[]:[sc,Op,sp,Yc],l=[].concat(u,[mc,Bc,gf,Df,mh,Ch,Gf,Qf,af,Tf]),c=[ou,du,Cu,Xl,Nu,Vh,Qh,gp,ul];this.plugins=[Xs].concat(Np(l),c);var h=a?"mobile":P.device;switch(h){case"pc":(t=this.plugins).push.apply(t,[Ei,On,Ki]);break;case"mobile":(e=this.plugins).push.apply(e,[Rl]);break;default:(o=this.plugins).push.apply(o,[Ei,On,Ki])}(P.os.isIpad||h==="pc")&&this.plugins.push($p),P.os.isIpad&&this.plugins.push(On),this.ignores=[],this.i18n=[Dp]};function Tt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tt=function(i){return typeof i}:Tt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Tt(n)}function zp(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Vp(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&kr(n,r)}function kr(n,r){return kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},kr(n,r)}function Gp(n){var r=Yp();return function(){var t=sn(n),e;if(r){var o=sn(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Wp(this,e)}}function Wp(n,r){return r&&(Tt(r)==="object"||typeof r=="function")?r:Kp(n)}function Kp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Yp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function sn(n){return sn=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sn(n)}function Y(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var z=function(n){Vp(i,n);var r=Gp(i);function i(){return zp(this,i),r.apply(this,arguments)}return i}(Lr);Y(z,"defaultPreset",Up);Y(z,"Util",f);Y(z,"Sniffer",P);Y(z,"Errors",Sr);Y(z,"Events",ba);Y(z,"Plugin",O);Y(z,"BasePlugin",Be);Y(z,"I18N",ne);Y(z,"STATE_CLASS",v);const Xp=z,qp={class:"flex justify-between"},Zp=Or("strong",null,"西瓜视频播放器",-1),Jp=Or("main",{id:"player"},null,-1),Qp=io({name:"player"}),hd=io(Hr(jr({},Qp),{setup(n){return Ko(()=>{new Xp({id:"player",lang:"zh-cn",volume:0,autoplay:!1,url:"https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-720p.mp4",playbackRate:[.5,.75,1,1.5,2,3,4,5],fluid:!0,videoInit:!0,download:!0,pip:!0})}),(r,i)=>{const t=Go,e=Vo;return Yo(),Xo(e,{"body-style":{height:"100%"},shadow:"hover",style:{height:"100%"}},{header:fn(()=>[Or("nav",qp,[Zp,qo(t,{href:"https://v2.h5player.bytedance.com",target:"_blank"},{default:fn(()=>[Zo("西瓜视频")]),_:1})])]),default:fn(()=>[Jp]),_:1})}}}));export{hd as default};
