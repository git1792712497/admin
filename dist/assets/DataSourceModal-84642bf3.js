var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,t,o)=>new Promise(((a,s)=>{var r=e=>{try{n(o.next(e))}catch(t){s(t)}},i=e=>{try{n(o.throw(e))}catch(t){s(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((o=o.apply(e,t)).next())}));import{a as i,B as n}from"./index-c9e02f09.js";import{u as l,B as c}from"./useForm-76a4ff23.js";import{g as d,d as p}from"./tenant-2dbceb61.js";import{g as u}from"./datasource-efce687f.js";import{a as m,w as f,o as b,j,H as y,n as g,k as v,ag as h}from"./index-c5a6c875.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./index-bb91fa2a.js";import"./get-8f9589fb.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const w=m({emits:["success","register"],setup(e,{emit:m}){const w=f(),[O,{setFieldsValue:P,resetFields:x,validate:F}]=l({labelWidth:90,schemas:[{field:"datasourceId",label:"数据源",component:"ApiSelect",componentProps:{placeholder:"请选择数据源",api:u,labelField:"name",valueField:"id"}}],showActionButtonGroup:!1,baseColProps:{span:24},actionColOptions:{span:23}}),[I,{setModalProps:B,closeModal:R}]=i((e=>r(this,null,(function*(){x(),w.value=e.record.tenantId;const r=yield d({id:e.record.id});P(((e,r)=>{for(var i in r||(r={}))o.call(r,i)&&s(e,i,r[i]);if(t)for(var i of t(r))a.call(r,i)&&s(e,i,r[i]);return e})({},r)),B({confirmLoading:!1})}))));function q(){return r(this,null,(function*(){try{const e=yield F();e.tenantId=w.value,B({confirmLoading:!0}),yield p(e),R(),m("success")}finally{B({confirmLoading:!1})}}))}return(e,t)=>(b(),j(v(n),h(e.$attrs,{onRegister:v(I),title:"租户授权配置",onOk:q}),{default:y((()=>[g(v(c),{onRegister:v(O)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{w as default};
