import{bo as e,a as r,w as o,c as a,d1 as t,B as s,aa as i,U as n,ab as l,o as c,h as u,O as m,am as d,E as f,G as p,n as j,k as b,H as g,K as y,t as h,j as v,l as x}from"./index-c5a6c875.js";import w from"./DetailModal-f2aee4c3.js";import{B as k}from"./TableImg-d2c728a3.js";import{T as C}from"./useForm-76a4ff23.js";import{u as E}from"./useTable-0a379cac.js";import{u as L}from"./index-c9e02f09.js";import{getColumns as R}from"./data-5f6e3321.js";import"./index-2c15cc4f.js";import"./get-8f9589fb.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const T={class:"p-4"},I=["src"],O=r({setup(r){const O=o(),_=o([]),{t:A}=a(),D=t(),[q,{setTableData:B}]=E({title:A("sys.errorLog.tableTitle"),columns:R(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[F,{openModal:M}]=L();function H(e){O.value=e,M(!0)}function P(){throw new Error("fire vue error!")}function V(){_.value.push(`${(new Date).getTime()}.png`)}function z(){return r=this,o=null,a=function*(){yield e.get({url:"/error"})},new Promise(((e,t)=>{var s=e=>{try{n(a.next(e))}catch(r){t(r)}},i=e=>{try{n(a.throw(e))}catch(r){t(r)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(s,i);n((a=a.apply(r,o)).next())}));var r,o,a}return s((()=>D.getErrorLogInfoList),(e=>{i((()=>{B(n(e))}))}),{immediate:!0}),(e,r)=>{const o=l("a-button");return c(),u("div",T,[(c(!0),u(m,null,d(_.value,(e=>f((c(),u("img",{key:e,src:e},null,8,I)),[[p,!1]]))),128)),j(w,{info:O.value,onRegister:b(F)},null,8,["info","onRegister"]),j(b(k),{onRegister:b(q),class:"error-handle-table"},{toolbar:g((()=>[j(o,{onClick:P,type:"primary"},{default:g((()=>[y(h(b(A)("sys.errorLog.fireVueError")),1)])),_:1}),j(o,{onClick:V,type:"primary"},{default:g((()=>[y(h(b(A)("sys.errorLog.fireResourceError")),1)])),_:1}),j(o,{onClick:z,type:"primary"},{default:g((()=>[y(h(b(A)("sys.errorLog.fireAjaxError")),1)])),_:1})])),bodyCell:g((({column:e,record:r})=>["action"===e.dataIndex?(c(),v(b(C),{key:0,actions:[{label:b(A)("sys.errorLog.tableActionDesc"),onClick:H.bind(null,r)}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"])])}}});export{O as default};
