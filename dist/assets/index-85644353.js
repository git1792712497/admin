import{B as e}from"./TableImg-d2c728a3.js";import{T as a}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{b as o}from"./work-d99648b5.js";import{s,a as n,b2 as i,w as d,c8 as r,B as l,ab as c,o as m,h as u,n as p,H as f,O as b,K as j,t as I,l as g,j as w,S as x}from"./index-c5a6c875.js";import{u as y}from"./index-c9e02f09.js";import v from"./IframeModal-56501107.js";import{g as h}from"./system-54dc9bf1.js";import{a as k}from"./flow-a40dbf2f.js";import{u as R}from"./dict-5f910412.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const S=[{title:"租户编号",dataIndex:"tenantId"},{title:"流程分类",dataIndex:"category"},{title:"流程标识",dataIndex:"key"},{title:"流程名称",dataIndex:"name"},{title:"流程版本",dataIndex:"version"},{title:"状态",dataIndex:"suspensionState"},{title:"部署时间",dataIndex:"deploymentTime"}],T=[{field:"category",label:"流程分类",component:"ApiSelect",colProps:{span:8},componentProps:{api:h,params:{code:"flow"},labelField:"dictValue",valueField:"dictKey"}},{field:"name",label:"流程名称",component:"Input",colProps:{span:8}}],M=n({name:"FlowManager",components:{BasicTable:e,TableAction:a,IframeModal:v,RadioGroup:i.Group,RadioButton:i.Button},setup(){const e=d("1"),{createMessage:a}=x(),s=r(),[n,{openModal:i}]=y(),[c,{reload:m}]=t({api:o,searchInfo:{mode:e.value},columns:S,formConfig:{labelWidth:120,schemas:T},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});return l(e,(()=>{m({searchInfo:{mode:e.value}})})),{mode:e,registerTable:c,handleStart:function(e){s(`/work/process/${k(R().getFlowRouter,e.category)}/form/${e.id}`)},viewModal:n,handleView:function(e){i(!0,{url:`/api/blade-flow/process/resource-view?processDefinitionId=${e.id}`})},handleSuccess:function(){a.success("操作成功"),m()}}}}),_=j("通用流程"),B=j("定制流程");const F=s(M,[["render",function(e,a,t,o,s,n){const i=c("RadioButton"),d=c("RadioGroup"),r=c("TableAction"),l=c("BasicTable"),x=c("IframeModal");return m(),u("div",null,[p(l,{onRegister:e.registerTable},{toolbar:f((()=>[p(d,{value:e.mode,"onUpdate:value":a[0]||(a[0]=a=>e.mode=a),"button-style":"solid"},{default:f((()=>[p(i,{value:"1"},{default:f((()=>[_])),_:1}),p(i,{value:"2"},{default:f((()=>[B])),_:1})])),_:1},8,["value"])])),bodyCell:f((({column:a,record:t})=>["tenantId"===a.dataIndex?(m(),u(b,{key:0},[j(I(""===t.tenantId?"通用":t.tenantId),1)],64)):g("",!0),"category"===a.dataIndex?(m(),u(b,{key:1},[j(I(t.categoryName),1)],64)):g("",!0),"version"===a.dataIndex?(m(),u(b,{key:2},[j(" v"+I(t.version),1)],64)):g("",!0),"suspensionState"===a.dataIndex?(m(),u(b,{key:3},[j(I(1===t.suspensionState?"激活":"挂起"),1)],64)):g("",!0),"action"===a.dataIndex?(m(),w(r,{key:4,actions:[{auth:"work_start_flow",label:"发起",icon:"clarity:note-edit-line",onClick:e.handleStart.bind(null,t)},{auth:"work_start_image",label:"流程图",icon:"ant-design:picture-filled",onClick:e.handleView.bind(null,t)}]},null,8,["actions"])):g("",!0)])),_:1},8,["onRegister"]),p(x,{onRegister:e.viewModal},null,8,["onRegister"])])}]]);export{F as default};
