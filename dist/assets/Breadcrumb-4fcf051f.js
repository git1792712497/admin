var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&o(e,n,t[n]);return e},u=(e,r)=>t(e,n(r));import{s,a as i,bc as d,eC as m,ax as h,w as p,z as v,b as f,cC as b,c8 as y,Z as g,ab as C,o as O,h as k,n as w,H as x,j as I,l as P,t as j,K as B,q as M,c as R,cm as S,cy as $,ck as A,dT as D,V as E}from"./index-c5a6c875.js";const _=i({name:"LayoutBreadcrumb",components:{Icon:d,[m.name]:m},props:{theme:h.oneOf(["dark","light"])},setup(){const e=p([]),{currentRoute:t}=v(),{prefixCls:n}=f("layout-breadcrumb"),{getShowBreadCrumbIcon:r}=b(),a=y(),{t:l}=R();function o(e,t){const n=[];return e.forEach((e=>{var r,a;t.includes(e.path)&&n.push(u(c({},e),{name:(null==(r=e.meta)?void 0:r.title)||e.name})),(null==(a=e.children)?void 0:a.length)&&n.push(...o(e.children,t))})),n}return g((()=>{return n=this,r=null,a=function*(){var n,r,a;if(t.value.name===S)return;const l=yield $(),s=t.value.matched,i=null==s?void 0:s[s.length-1];let d=t.value.path;i&&(null==(n=null==i?void 0:i.meta)?void 0:n.currentActiveMenu)&&(d=i.meta.currentActiveMenu);const m=A(l,d),h=o(l.filter((e=>e.path===m[0])),m);if(!h||0===h.length)return;const p=D(h,(e=>{const{meta:t,name:n}=e;if(!t)return!!n;const{title:r,hideBreadcrumb:a,hideMenu:l}=t;return!(!r||a||l)})).filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)}));(null==(r=t.value.meta)?void 0:r.currentActiveMenu)&&p.push(u(c({},t.value),{name:(null==(a=t.value.meta)?void 0:a.title)||t.value.name})),e.value=p},new Promise(((e,t)=>{var l=e=>{try{c(a.next(e))}catch(n){t(n)}},o=e=>{try{c(a.throw(e))}catch(n){t(n)}},c=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);c((a=a.apply(n,r)).next())}));var n,r,a})),{routes:e,t:l,prefixCls:n,getIcon:function(e){var t;return e.icon||(null==(t=e.meta)?void 0:t.icon)},getShowBreadCrumbIcon:r,handleClick:function(e,t,n){null==n||n.preventDefault();const{children:r,redirect:l,meta:o}=e;if(!(null==r?void 0:r.length)||l){if(!(null==o?void 0:o.carryParam))if(l&&E(l))a(l);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,a(e)}}else null==n||n.stopPropagation()},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}}),q={key:1};const z=s(_,[["render",function(e,t,n,r,a,l){const o=C("Icon"),c=C("router-link"),u=C("a-breadcrumb");return O(),k("div",{class:M([e.prefixCls,`${e.prefixCls}--${e.theme}`])},[w(u,{routes:e.routes},{itemRender:x((({route:t,routes:n,paths:r})=>[e.getShowBreadCrumbIcon&&e.getIcon(t)?(O(),I(o,{key:0,icon:e.getIcon(t)},null,8,["icon"])):P("",!0),e.hasRedirect(n,t)?(O(),I(c,{key:2,to:"",onClick:n=>e.handleClick(t,r,n)},{default:x((()=>[B(j(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(O(),k("span",q,j(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)}]]);export{z as default};
