import{B as e,u as o}from"./useForm-76a4ff23.js";import{g as t,b as a}from"./system-54dc9bf1.js";import{f as s,d as l}from"./flow-db406d19.js";import{f as n}from"./flow-a40dbf2f.js";import{s as i,a as r,dg as d,w as m,ab as p,o as c,j as u,H as f,n as b}from"./index-c5a6c875.js";import"./index-bb91fa2a.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./get-8f9589fb.js";import"./index-c9e02f09.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const j=[{field:"categoryValue",label:"流程类型",component:"ApiSelect",componentProps:{stringToNumber:!0,api:t,params:{code:"flow"},labelField:"dictValue",valueField:"dictKey"},required:!0},{field:"flowMode",label:"流程模式",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"通用流程",value:1},{label:"定制流程",value:2}]},required:!0},{field:"tenantId",label:"所属租户",component:"ApiSelect",componentProps:{api:a,labelField:"tenantName",valueField:"tenantId",mode:"multiple"},show:({model:e})=>2==e.flowMode},{field:"flowFile",component:"Upload",label:"附件上传",rules:[{required:!0,message:"请选择上传文件"}],componentProps:()=>({api:s,multiple:!1})}];const y=i(r({name:"Deploy",components:{BasicForm:e,CollapseContainer:d},emits:["success","register"],setup(e,{emit:t}){const a=m(""),[s,{resetFields:i,validate:r}]=o({labelWidth:300,schemas:j,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:13}});return{registerForm:s,handleSubmit:function(){return e=this,o=null,s=function*(){try{const e=yield r();yield l({tenantIds:e.tenantId?e.tenantId.join(","):"",modelId:a.value,category:n(e.categoryValue)}),t("success"),i()}finally{i()}},new Promise(((t,a)=>{var l=e=>{try{i(s.next(e))}catch(o){a(o)}},n=e=>{try{i(s.throw(e))}catch(o){a(o)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,n);i((s=s.apply(e,o)).next())}));var e,o,s}}}}),[["render",function(e,o,t,a,s,l){const n=p("BasicForm"),i=p("CollapseContainer");return c(),u(i,{title:"流程部署"},{default:f((()=>[b(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1})}]]);export{y as default};
