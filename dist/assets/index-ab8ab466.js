import{c as e,_ as a}from"./DatasourceModal-5ab67d47.js";import{B as t}from"./TableImg-d2c728a3.js";import{T as o}from"./useForm-76a4ff23.js";import{u as i}from"./useTable-0a379cac.js";import{b as s,r}from"./datasource-efce687f.js";import{u as n}from"./index-c9e02f09.js";import{a as c,ab as d,ac as l,o as u,h as m,n as p,H as f,E as b,j,k as h,l as y,K as g,S as x}from"./index-c5a6c875.js";import"./index-2c15cc4f.js";import"./get-8f9589fb.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const v=g(" 新增 "),C=c({setup(c){const{createMessage:g}=x(),{success:C}=g,[w,{openModal:_}]=n(),[k,{reload:R,updateTableDataRecord:D}]=i({api:s,rowKey:"id",columns:e,formConfig:{labelWidth:120},useSearchForm:!1,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function F(){_(!0,{isDetail:!1,isUpdate:!1})}function I(e){_(!0,{record:e,isUpdate:!1,isDetail:!0})}function M(e){_(!0,{record:e,isDetail:!1,isUpdate:!0})}function O(e){return a=this,t=null,o=function*(){yield r({ids:e.id}),C("操作成功"),R()},new Promise(((e,i)=>{var s=e=>{try{n(o.next(e))}catch(a){i(a)}},r=e=>{try{n(o.throw(e))}catch(a){i(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(s,r);n((o=o.apply(a,t)).next())}));var a,t,o}function S({isUpdate:e,values:a}){C("操作成功"),e?D(a.id,a):R()}return(e,i)=>{const s=d("a-button"),r=l("auth");return u(),m("div",null,[p(h(t),{onRegister:h(k)},{toolbar:f((()=>[b((u(),j(s,{type:"primary",onClick:F},{default:f((()=>[v])),_:1})),[[r,"datasource_add"]])])),bodyCell:f((({column:e,record:a})=>["action"===e.dataIndex?(u(),j(h(o),{key:0,actions:[{auth:"datasource_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:I.bind(null,a)},{auth:"datasource_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:M.bind(null,a)},{auth:"datasource_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:O.bind(null,a)}}]},null,8,["actions"])):y("",!0)])),_:1},8,["onRegister"]),p(a,{onRegister:h(w),onSuccess:S},null,8,["onRegister"])])}}});export{C as default};
