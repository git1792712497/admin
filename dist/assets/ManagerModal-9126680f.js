var e=(e,t,a)=>new Promise(((o,s)=>{var n=e=>{try{i(a.next(e))}catch(t){s(t)}},l=e=>{try{i(a.throw(e))}catch(t){s(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,l);i((a=a.apply(e,t)).next())}));import{B as t,a}from"./index-c9e02f09.js";import{B as o,u as s}from"./useForm-76a4ff23.js";import{g as n}from"./system-54dc9bf1.js";import{c as l}from"./flow-db406d19.js";import{s as i,a as r,w as d,ab as c,o as p,j as m,H as u,n as f,ag as g}from"./index-c5a6c875.js";const b=[{title:"租户编号",dataIndex:"tenantId"},{title:"流程主键",dataIndex:"id"},{title:"流程标识",dataIndex:"key"},{title:"流程名称",dataIndex:"name"},{title:"流程分类",dataIndex:"category"},{title:"流程版本",dataIndex:"version"},{title:"状态",dataIndex:"suspensionState"},{title:"部署时间",dataIndex:"deploymentTime"}],y=[{field:"key",label:"流程标识",component:"Input",colProps:{span:8}},{field:"category",label:"流程分类",component:"ApiSelect",colProps:{span:8},componentProps:{api:n,params:{code:"flow"},labelField:"dictValue",valueField:"dictKey"}}],v=[{field:"flowState",label:"流程状态",component:"Select",required:!0,componentProps:{options:[{label:"激活",value:"active"},{label:"挂起",value:"suspend"}]}}];const x=i(r({name:"ManagerModal",components:{BasicModal:t,BasicForm:o},emits:["success","register"],setup(t,{emit:o}){const n=d(""),[i,{resetFields:r,validate:c}]=s({labelWidth:100,baseColProps:{span:24},schemas:v,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:23}}),[p,{setModalProps:m,closeModal:u}]=a((t=>e(this,null,(function*(){r(),m({confirmLoading:!1}),n.value=t.record.id}))));return{registerModal:p,registerForm:i,handleSubmit:function(){return e(this,null,(function*(){try{const e=yield c();m({confirmLoading:!0}),yield l({state:e.flowState,processId:n.value}),u(),o("success")}finally{m({confirmLoading:!1})}}))}}}}),[["render",function(e,t,a,o,s,n){const l=c("BasicForm"),i=c("BasicModal");return p(),m(i,g(e.$attrs,{onRegister:e.registerModal,title:"变更状态",onOk:e.handleSubmit}),{default:u((()=>[f(l,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","onOk"])}]]),h=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as M,h as a,b as c,y as s};
