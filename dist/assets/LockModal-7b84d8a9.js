import{s as e,a as s,b as a,v as r,f as o,ab as t,o as i,j as l,H as n,i as c,q as d,t as m,n as p,K as u,ag as f,c as h}from"./index-c5a6c875.js";import{B as b,a as g}from"./index-c9e02f09.js";import{B as j,u as v}from"./useForm-76a4ff23.js";import{u as x}from"./lock-bbc913c9.js";import{h as k}from"./header-e7a2da68.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./index-bb91fa2a.js";import"./get-8f9589fb.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const _=s({name:"LockModal",components:{BasicModal:b,BasicForm:j},setup(){const{t:e}=h(),{prefixCls:s}=a("header-lock-modal"),t=r(),i=x(),l=o((()=>{var e;return null==(e=t.getUserInfo)?void 0:e.realName})),[n,{closeModal:c}]=g(),[d,{validateFields:m,resetFields:p}]=v({showActionButtonGroup:!1,schemas:[{field:"password",label:e("layout.header.lockScreenPassword"),colProps:{span:24},component:"InputPassword",required:!0}]});return{t:e,prefixCls:s,getRealName:l,register:n,registerForm:d,handleLock:function(){return e=this,s=null,a=function*(){const e=(yield m()).password;c(),i.setLockInfo({isLock:!0,pwd:e}),yield p()},new Promise(((r,o)=>{var t=e=>{try{l(a.next(e))}catch(s){o(s)}},i=e=>{try{l(a.throw(e))}catch(s){o(s)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,i);l((a=a.apply(e,s)).next())}));var e,s,a},avatar:o((()=>{const{avatar:e}=t.getUserInfo;return e||k}))}}}),y=["src"];const w=e(_,[["render",function(e,s,a,r,o,h){const b=t("BasicForm"),g=t("a-button"),j=t("BasicModal");return i(),l(j,f({footer:null,title:e.t("layout.header.lockScreen")},e.$attrs,{class:e.prefixCls,onRegister:e.register}),{default:n((()=>[c("div",{class:d(`${e.prefixCls}__entry`)},[c("div",{class:d(`${e.prefixCls}__header`)},[c("img",{src:e.avatar,class:d(`${e.prefixCls}__header-img`)},null,10,y),c("p",{class:d(`${e.prefixCls}__header-name`)},m(e.getRealName),3)],2),p(b,{onRegister:e.registerForm},null,8,["onRegister"]),c("div",{class:d(`${e.prefixCls}__footer`)},[p(g,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:n((()=>[u(m(e.t("layout.header.lockScreenBtn")),1)])),_:1},8,["onClick"])],2)],2)])),_:1},16,["title","class","onRegister"])}]]);export{w as default};
