var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,t,a)=>new Promise(((o,l)=>{var s=e=>{try{n(a.next(e))}catch(t){l(t)}},i=e=>{try{n(a.throw(e))}catch(t){l(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,i);n((a=a.apply(e,t)).next())}));import{cP as i,bc as n,a as r,w as d,k as c,f as p,o as u,j as m,H as f,E as b,G as v,i as y,n as h,ag as I}from"./index-c5a6c875.js";import{u as g,B as P}from"./useForm-76a4ff23.js";import{g as x}from"./system-54dc9bf1.js";import{a as w,B as j}from"./index-c9e02f09.js";import{u as O,D as _}from"./index-2c15cc4f.js";import{a as R,s as k}from"./scope-98debdcf.js";const N=[{title:"菜单名称",dataIndex:"name",width:200,align:"left"},{title:"图标",dataIndex:"source",width:50,customRender:({record:e})=>i(n,{icon:e.source})},{title:"菜单编号",dataIndex:"code",width:180},{title:"路由地址",dataIndex:"path"},{title:"排序",dataIndex:"sort",width:50}],q=[{field:"name",label:"菜单名称",component:"Input",colProps:{span:8}},{field:"code",label:"菜单编号",component:"Input",colProps:{span:8}}],B=[{field:"scopeName",label:"权限名称",component:"Input",colProps:{span:8}},{field:"resourceCode",label:"权限编号",component:"Input",colProps:{span:8}}],C=[{title:"权限名称",dataIndex:"scopeName"},{title:"权限编号",dataIndex:"resourceCode"},{title:"权限路径",dataIndex:"scopePath"},{title:"接口类型",dataIndex:"scopeTypeName"}],F=[{field:"scopeName",label:"权限名称",component:"Input",required:!0},{field:"resourceCode",label:"权限编号",component:"Input",required:!0},{field:"scopePath",label:"权限路径",component:"Input",required:!0},{field:"scopeType",label:"接口类型",component:"ApiSelect",componentProps:{api:x,params:{code:"api_scope_type"},labelField:"dictValue",valueField:"dictKey",stringToNumber:!0},required:!0},{field:"remark",label:"备注",component:"Input",required:!0}],T=[{field:"scopeName",label:"权限名称"},{field:"resourceCode",label:"权限编号"},{field:"scopePath",label:"权限路径"},{field:"scopeType",label:"接口类型"},{field:"remark",label:"备注"}],S=r({emits:["success","register"],setup(e,{emit:i}){const n=d(!0),r=d(!0),x=d(""),N=d(""),[q,{setDescProps:B}]=O({schema:T}),[C,{resetFields:S,setFieldsValue:A,validate:D}]=g({labelWidth:100,schemas:F,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[L,{setModalProps:M,closeModal:z}]=w((e=>s(this,null,(function*(){if(M({confirmLoading:!1}),n.value=!!(null==e?void 0:e.isUpdate),r.value=!!(null==e?void 0:e.isDetail),N.value=null==e?void 0:e.menuId,c(r)){const t=yield R({id:e.record.id});B({data:t})}else if(S(),c(n)){x.value=e.record.id;const s=yield R({id:e.record.id});A(((e,s)=>{for(var i in s||(s={}))a.call(s,i)&&l(e,i,s[i]);if(t)for(var i of t(s))o.call(s,i)&&l(e,i,s[i]);return e})({},s))}})))),E=p((()=>c(n)?"编辑权限":c(r)?"权限详情":"新增权限"));function G(){return s(this,null,(function*(){try{const e=yield D();M({confirmLoading:!0}),e.menuId=N.value,c(n)&&(e.id=x.value),yield k(e),z(),i("success")}finally{M({confirmLoading:!1})}}))}return(e,t)=>(u(),m(c(j),I(e.$attrs,{onRegister:c(L),title:c(E),width:"50%",showOkBtn:!r.value,onOk:G}),{default:f((()=>[b(y("div",null,[h(c(_),{size:"middle",onRegister:c(q),column:2},null,8,["onRegister"])],512),[[v,r.value]]),b(y("div",null,[h(c(P),{onRegister:c(C)},null,8,["onRegister"])],512),[[v,!r.value]])])),_:1},16,["onRegister","title","showOkBtn"]))}}),A=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{A,S as _,C as a,q as b,N as c,B as s};
