var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;import{u as n,B as l}from"./useForm-76a4ff23.js";import{a as u,dD as c,c8 as d,z as m,w as p,o as f,h as b,n as y,H as j,k as v,bn as h,L as w,dg as g,O as I,am as O,j as _,dE as x,i as P,t as k,l as T,K as A,cU as B,dC as D}from"./index-c5a6c875.js";import{a as F}from"./index-33df9098.js";import{e as C,a as E,c as N}from"./process-98643a44.js";import"./index-bb91fa2a.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./get-8f9589fb.js";import"./index-c9e02f09.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./onMountedOrActivated-48cd1b25.js";import"./useContentViewHeight-e138bd2a.js";import"./user-a4458d91.js";const R=A("关闭"),q={key:0},$={key:1},z={key:2},H=["src"],S=u({setup(e){const u=c.Item,A=d(),{currentRoute:S}=m(),V=p([]),W=p(""),[G,{setFieldsValue:K}]=n({labelWidth:100,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,showResetButton:!1,submitButtonOptions:{text:"提交"}});function L(){B(D).close(S.value),A("/work/start",!0)}return function(){return e=this,n=null,l=function*(){W.value=`/api/blade-flow/process/diagram-view?processInstanceId=${S.value.params.processInstanceId}&t=${(new Date).getTime()}`;const e=yield E({businessId:S.value.params.businessId}),n=e.flow.assigneeName;var l;K((l=((e,t)=>{for(var s in t||(t={}))i.call(t,s)&&o(e,s,t[s]);if(a)for(var s of a(t))r.call(t,s)&&o(e,s,t[s]);return e})({},e),t(l,s({assigneeName:n}))));const u=yield N({processInstanceId:S.value.params.processInstanceId});V.value=u},new Promise(((t,s)=>{var a=e=>{try{r(l.next(e))}catch(t){s(t)}},i=e=>{try{r(l.throw(e))}catch(t){s(t)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,i);r((l=l.apply(e,n)).next())}));var e,n,l}(),(e,t)=>(f(),b("div",null,[y(v(F),{title:"请假流程详情"},{rightFooter:j((()=>[y(v(h),null,{default:j((()=>[y(v(w),{onClick:L},{default:j((()=>[R])),_:1})])),_:1})])),default:j((()=>[y(v(g),{title:"审批信息"},{default:j((()=>[y(v(l),{onRegister:v(G)},null,8,["onRegister"])])),_:1}),y(v(g),{title:"流程信息"},{default:j((()=>[y(v(c),{mode:"left"},{default:j((()=>[(f(!0),b(I,null,O(V.value,(e=>(f(),_(v(u),{key:`${e.historyActivityId}`},{default:j((()=>[y(v(x),{title:e.createTime},{default:j((()=>[P("p",null,k(e.assigneeName)+" 在 ["+k(e.createTime)+"] 开始处理 ["+k(e.historyActivityName)+"] 环节",1),""!==e.historyActivityDurationTime?(f(),b("p",q,"任务历时 ["+k(e.historyActivityDurationTime)+"]",1)):T("",!0),""!==e.comment?(f(),b("p",$,"批复意见: ["+k(e.comment)+"]",1)):T("",!0),""!==e.endTime?(f(),b("p",z,"结束时间: ["+k(e.endTime)+"]",1)):T("",!0)])),_:2},1032,["title"])])),_:2},1024)))),128))])),_:1})])),_:1}),y(v(g),{title:"流程跟踪"},{default:j((()=>[P("img",{src:W.value,alt:"design"},null,8,H)])),_:1})])),_:1})]))}});export{S as default};
