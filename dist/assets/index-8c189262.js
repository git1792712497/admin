var e=(e,o,t)=>new Promise(((a,i)=>{var n=e=>{try{l(t.next(e))}catch(o){i(o)}},s=e=>{try{l(t.throw(e))}catch(o){i(o)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);l((t=t.apply(e,o)).next())}));import o from"./ModelModal-e104b61c.js";import t from"./CodeColumnModal-aff0967f.js";import{B as a}from"./TableImg-d2c728a3.js";import{T as i}from"./useForm-76a4ff23.js";import{u as n}from"./useTable-0a379cac.js";import{l as s,r as l}from"./model-0b68421a.js";import{u as d}from"./index-c9e02f09.js";import{g as r}from"./datasource-efce687f.js";import{a as c,w as m,ab as u,o as p,h as f,n as b,H as j,O as x,K as I,t as y,k as C,ef as g,l as h,j as v,S as w}from"./index-c5a6c875.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./index-bb91fa2a.js";import"./get-8f9589fb.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./system-54dc9bf1.js";import"./validate-e879236f.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./merge-5148c4a3.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";const k=[{title:"数据源",dataIndex:"datasourceId"},{title:"物理表名",dataIndex:"modelTable"},{title:"模型类名",dataIndex:"modelClass"},{title:"模型名称",dataIndex:"modelName"},{title:"模型编号",dataIndex:"modelCode"}],M=[{field:"datasourceId",label:"数据源",component:"ApiSelect",componentProps:{api:r,labelField:"name",valueField:"id"}},{field:"modelName",label:"模型名称",component:"Input"},{field:"modelCode",label:"模型编号",component:"Input"}],R=I(" 新增 "),F=c({setup(c){let F=m({});!function(){e(this,null,(function*(){F.value.source=yield r()}))}();const{createMessage:S}=w(),{success:O}=S,[P,{openModal:T}]=d(),[q,{openModal:_}]=d(),[A,{reload:B}]=n({api:s,rowKey:"id",columns:k,formConfig:{labelWidth:120,schemas:M,baseColProps:{xl:12,xxl:6}},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function E(){T(!0,{isUpdate:!1})}function H(e){T(!0,{record:e,isUpdate:!0})}function K(e){_(!0,{record:e})}function N(o){return e(this,null,(function*(){yield l({ids:o.id}),O("操作成功"),B()}))}function U(){O("操作成功"),B()}return(e,n)=>{const s=u("a-button");return p(),f("div",null,[b(C(a),{onRegister:C(A)},{toolbar:j((()=>[b(s,{type:"primary",onClick:E},{default:j((()=>[R])),_:1})])),bodyCell:j((({column:e,record:o})=>["datasourceId"===e.dataIndex?(p(),f(x,{key:0},[I(y(C(g)(C(F).source,o.datasourceId)),1)],64)):h("",!0),"action"===e.dataIndex?(p(),v(C(i),{key:1,actions:[{label:"编辑",icon:"clarity:note-edit-line",onClick:H.bind(null,o)},{label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:N.bind(null,o)}},{label:"模型配置",icon:"clarity:note-edit-line",onClick:K.bind(null,o)}]},null,8,["actions"])):h("",!0)])),_:1},8,["onRegister"]),b(o,{onRegister:C(P),onSuccess:U},null,8,["onRegister"]),b(t,{onRegister:C(q),onSuccess:U},null,8,["onRegister"])])}}});export{F as default};
