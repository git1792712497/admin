var K=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var S=(e,o,t)=>o in e?K(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,P=(e,o)=>{for(var t in o||(o={}))R.call(o,t)&&S(e,t,o[t]);if(O)for(var t of O(o))ee.call(o,t)&&S(e,t,o[t]);return e},T=(e,o)=>Q(e,X(o));import{b as B,d as w,u as oe}from"./base-c9ac7f1d.js";import{u as z,d as te}from"./plugin-vue_export-helper-2c43b310.js";import{a5 as le,bq as ne,w as k,a8 as ae,a2 as h,d as se,e as ue,r as I,p as ce,Y as v,U as D,n as ie,l as re,A as de}from"./runtime-core.esm-bundler-763b24c9.js";import{P as x}from"./vnode-a085d075.js";import{i as fe}from"./icon-bea742d8.js";import{U as L}from"./event-9519ab40.js";import{i as V,a1 as me,u as F}from"./index-e4b86012.js";import{a as ye}from"./index-af263c7f.js";import{u as A}from"./index-cfc72b3d.js";import{h as N,g as ve,b as pe,r as Ce,a as be}from"./style-be20bb62.js";import{t as ge}from"./error-78e43d3e.js";import{a as he}from"./scroll-6da5dc64.js";const xe=e=>{le(e)||ge("[useLockscreen]","You need to pass a ref param to this function");const o=z("popup"),t=ne(()=>o.bm("parent","hidden"));if(!V||N(document.body,t.value))return;let l=0,u=!1,c="0";const n=()=>{setTimeout(()=>{Ce(document.body,t.value),u&&(document.body.style.width=c)},200)};k(e,r=>{if(!r){n();return}u=!N(document.body,t.value),u&&(c=document.body.style.width),l=he(o.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,d=ve(document.body,"overflowY");l>0&&(s||d==="scroll")&&u&&(document.body.style.width=`calc(100% - ${l}px)`),pe(document.body,t.value)}),ae(()=>n())},we=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},ke=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:w([String,Array,Object])},zIndex:{type:w([String,Number])}}),Be={click:e=>e instanceof MouseEvent};var Ee=se({name:"ElOverlay",props:ke,emits:Be,setup(e,{slots:o,emit:t}){const l=z("overlay"),u=s=>{t("click",s)},{onClick:c,onMousedown:n,onMouseup:r}=we(e.customMaskEvent?void 0:u);return()=>e.mask?ue("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:n,onMouseup:r},[I(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):ce("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[I(o,"default")])}});const $e=Ee,Me=B({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:fe},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),He={close:()=>!0},Ue=B(T(P({},Me),{appendToBody:{type:Boolean,default:!1},beforeClose:{type:w(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}})),We={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[L]:e=>me(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},_e=(e,o)=>{const l=de().emit,{nextZIndex:u}=ye();let c="";const n=A(),r=A(),s=v(!1),d=v(!1),y=v(!1),p=v(e.zIndex||u());let f,m;const Y=oe("namespace",te),$=D(()=>{const a={},i=`--${Y.value}-dialog`;return e.fullscreen||(e.top&&(a[`${i}-margin-top`]=e.top),e.width&&(a[`${i}-width`]=be(e.width))),a}),H=D(()=>e.alignCenter?{display:"flex"}:{});function U(){l("opened")}function W(){l("closed"),l(L,!1),e.destroyOnClose&&(y.value=!1)}function _(){l("close")}function E(){m==null||m(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=F(()=>M(),e.openDelay):M()}function C(){f==null||f(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=F(()=>g(),e.closeDelay):g()}function b(){function a(i){i||(d.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(a):C()}function q(){e.closeOnClickModal&&b()}function M(){!V||(s.value=!0)}function g(){s.value=!1}function Z(){l("openAutoFocus")}function j(){l("closeAutoFocus")}function G(a){var i;((i=a.detail)==null?void 0:i.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&xe(s);function J(){e.closeOnPressEscape&&b()}return k(()=>e.modelValue,a=>{a?(d.value=!1,E(),y.value=!0,p.value=e.zIndex?p.value++:u(),ie(()=>{l("open"),o.value&&(o.value.scrollTop=0)})):s.value&&C()}),k(()=>e.fullscreen,a=>{!o.value||(a?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),re(()=>{e.modelValue&&(s.value=!0,y.value=!0,E())}),{afterEnter:U,afterLeave:W,beforeLeave:_,handleClose:b,onModalClick:q,close:C,doClose:g,onOpenAutoFocus:Z,onCloseAutoFocus:j,onCloseRequested:J,onFocusoutPrevented:G,titleId:n,bodyId:r,closed:d,style:$,overlayDialogStyle:H,rendered:y,visible:s,zIndex:p}};export{$e as E,He as a,Ue as b,We as c,Me as d,we as e,_e as u};
