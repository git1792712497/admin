import{B as e}from"./TableImg-d2c728a3.js";import{T as i}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{f as a,r as o}from"./menu-b0618eaf.js";import{u as n}from"./index-c9e02f09.js";import{c as s,s as r,_ as l}from"./MenuModal-7e51f719.js";import{a as c,ab as d,ac as u,o as m,h as p,n as f,H as b,E as j,j as h,k as g,v as y,l as x,K as C,S as v}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-2c15cc4f.js";const _=C(" 新增菜单 "),w=c({setup(c){const{createMessage:C}=v(),{success:w}=C,[k,{openModal:R}]=n(),[I,{reload:M}]=t({title:"菜单列表",api:a,columns:s,formConfig:{labelWidth:120,schemas:r},pagination:!1,striped:!1,useSearchForm:!0,canResize:!1,actionColumn:{width:300,title:"操作",dataIndex:"action"}});function S(e){R(!0,{record:e,isDetail:!1,isUpdate:!1,addChild:!!e})}function F(e){R(!0,{record:e,isUpdate:!0,isDetail:!1})}function O(e){R(!0,{record:e,isUpdate:!1,isDetail:!0})}function U(e){return i=this,t=null,a=function*(){yield o({ids:e.id}),w("操作成功"),M()},new Promise(((e,o)=>{var n=e=>{try{r(a.next(e))}catch(i){o(i)}},s=e=>{try{r(a.throw(e))}catch(i){o(i)}},r=i=>i.done?e(i.value):Promise.resolve(i.value).then(n,s);r((a=a.apply(i,t)).next())}));var i,t,a}function q(){M()}return(t,a)=>{const o=d("a-button"),n=u("auth");return m(),p("div",null,[f(g(e),{onRegister:g(I)},{toolbar:b((()=>[j((m(),h(o,{type:"primary",onClick:S},{default:b((()=>[_])),_:1})),[[n,"menu_add"]])])),bodyCell:b((({column:e,record:t})=>["action"===e.dataIndex?(m(),h(g(i),{key:0,actions:[{auth:"menu_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:O.bind(null,t)},{auth:"menu_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:F.bind(null,t)},{auth:"menu_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:U.bind(null,t)}},{ifShow:()=>g(y)().getUserInfo.role_name.includes("admin"),label:"新增子项",icon:"clarity:plus-line",onClick:S.bind(null,t,!0)}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"]),f(l,{onRegister:g(k),onSuccess:q},null,8,["onRegister"])])}}});export{w as default};
