var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&n(e,o,t[o]);if(a)for(var o of a(t))l.call(t,o)&&n(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));import{n as c,r as u,c as p,a as f,b as d,f as g,s as h,ab as y,o as w,h as b,O as v,ad as m,j as k,H as C,K as D,t as x,ag as O,l as B,q as P,ae as $,ah as j,ax as S,i as T,cT as _,a7 as F,w as L,a1 as H,B as V,aq as E,k as A,as as q,bv as I,aa as M,ak as N,ac as z,al as K,E as R,am as Y,an as Z,ao as G,ap as J,x as Q,au as U,ar as W,at as X,Z as ee,Y as te}from"./index-c5a6c875.js";import{i as oe}from"./isEqual-f9888ec4.js";const ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};function se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),a.forEach((function(t){le(e,t,o[t])}))}return e}function le(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ne=function(e,t){var o=se({},e,t.attrs);return c(u,se({},o,{icon:ae}),null)};ne.displayName="ArrowLeftOutlined",ne.inheritAttrs=!1;const re=ne,{t:ie}=p(),ce={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:ie("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:ie("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},ue=r({isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},ce);const pe=h(f({name:"BasicDrawerFooter",props:i(r({},ce),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:t}){const{prefixCls:o}=d("basic-drawer-footer");return{handleOk:function(){t("ok")},prefixCls:o,handleClose:function(){t("close")},getStyle:g((()=>{const t=`${e.height}`;return{height:t,lineHeight:`calc(${t} - 1px)`}}))}}}),[["render",function(e,t,o,a,s,l){const n=y("a-button");return e.showFooter||e.$slots.footer?(w(),b("div",{key:0,class:P(e.prefixCls),style:$(e.getStyle)},[e.$slots.footer?m(e.$slots,"footer",{key:1}):(w(),b(v,{key:0},[m(e.$slots,"insertFooter"),e.showCancelBtn?(w(),k(n,O({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:C((()=>[D(x(e.cancelText),1)])),_:1},16,["onClick"])):B("",!0),m(e.$slots,"centerFooter"),e.showOkBtn?(w(),k(n,O({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:C((()=>[D(x(e.okText),1)])),_:1},16,["type","onClick","loading"])):B("",!0),m(e.$slots,"appendFooter")],64))],6)):B("",!0)}]]),fe=f({name:"BasicDrawerHeader",components:{BasicTitle:j,ArrowLeftOutlined:re},props:{isDetail:S.bool,showDetailBack:S.bool,title:S.string},emits:["close"],setup(e,{emit:t}){const{prefixCls:o}=d("basic-drawer-header");return{prefixCls:o,handleClose:function(){t("close")}}}}),de={key:1};const ge=h(f({components:{Drawer:_,ScrollContainer:F,DrawerFooter:pe,DrawerHeader:h(fe,[["render",function(e,t,o,a,s,l){const n=y("BasicTitle"),r=y("ArrowLeftOutlined");return e.isDetail?(w(),b("div",{key:1,class:P([e.prefixCls,`${e.prefixCls}--detail`])},[T("span",{class:P(`${e.prefixCls}__twrap`)},[e.showDetailBack?(w(),b("span",{key:0,onClick:t[0]||(t[0]=(...t)=>e.handleClose&&e.handleClose(...t))},[c(r,{class:P(`${e.prefixCls}__back`)},null,8,["class"])])):B("",!0),e.title?(w(),b("span",de,x(e.title),1)):B("",!0)],2),T("span",{class:P(`${e.prefixCls}__toolbar`)},[m(e.$slots,"titleToolbar")],2)],2)):(w(),k(n,{key:0,class:P(e.prefixCls)},{default:C((()=>[m(e.$slots,"title"),D(" "+x(e.$slots.title?"":e.title),1)])),_:3},8,["class"]))}]])},inheritAttrs:!1,props:ue,emits:["visible-change","ok","close","register"],setup(e,{emit:t}){const o=L(!1),a=H(),s=L(null),{t:l}=p(),{prefixVar:n,prefixCls:c}=d("basic-drawer"),u={setDrawerProps:function(e){s.value=E(A(s)||{},e),Reflect.has(e,"visible")&&(o.value=!!e.visible)},emitVisible:void 0},f=J();f&&t("register",u,f.uid);const h=g((()=>E(q(e),A(s)))),y=g((()=>{const e=i(r(r({placement:"right"},A(a)),A(h)),{visible:A(o)});e.title=void 0;const{isDetail:t,width:s,wrapClassName:l,getContainer:u}=e;if(t){s||(e.width="100%");const t=`${c}__detail`;e.class=l?`${l} ${t}`:t,u||(e.getContainer=`.${n}-layout-content`)}return e})),w=g((()=>r(r({},a),A(y)))),b=g((()=>{const{footerHeight:e,showFooter:t}=A(y);return t&&e?I(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),v=g((()=>({position:"relative",height:`calc(100% - ${A(b)})`}))),m=g((()=>{var e;return!!(null==(e=A(y))?void 0:e.loading)}));return V((()=>e.visible),((e,t)=>{e!==t&&(o.value=e)}),{deep:!0}),V((()=>o.value),(e=>{M((()=>{var o;t("visible-change",e),f&&(null==(o=u.emitVisible)||o.call(u,e,f.uid))}))})),{onClose:function(e){return a=this,s=null,l=function*(){const{closeFunc:a}=A(y);if(t("close",e),a&&N(a)){const e=yield a();o.value=!e}else o.value=!1},new Promise(((t,o)=>{var n=t=>{try{i(l.next(t))}catch(e){o(e)}},r=t=>{try{i(l.throw(t))}catch(e){o(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,r);i((l=l.apply(a,s)).next())}));var a,s,l},t:l,prefixCls:c,getMergeProps:h,getScrollContentStyle:v,getProps:y,getLoading:m,getBindValues:w,getFooterHeight:b,handleOk:function(){t("ok")}}}}),[["render",function(e,t,o,a,s,l){const n=y("DrawerHeader"),r=y("ScrollContainer"),i=y("DrawerFooter"),u=y("Drawer"),p=z("loading");return w(),k(u,O({class:e.prefixCls,onClose:e.onClose},e.getBindValues),K({default:C((()=>[R((w(),k(r,{style:$(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:C((()=>[m(e.$slots,"default")])),_:3},8,["style","loading-tip"])),[[p,e.getLoading]]),c(i,O(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),K({_:2},[Y(Object.keys(e.$slots),(t=>({name:t,fn:C((o=>[m(e.$slots,t,Z(G(o||{})))]))})))]),1040,["onClose","onOk","height"])])),_:2},[e.$slots.title?{name:"title",fn:C((()=>[m(e.$slots,"title")]))}:{name:"title",fn:C((()=>[c(n,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:C((()=>[m(e.$slots,"titleToolbar")])),_:3},8,["title","isDetail","showDetailBack","onClose"])]))}]),1040,["class","onClose"])}]]),he=Q({}),ye=Q({});function we(){if(!J())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=L(null),t=L(!1),o=L("");const a=()=>{const t=A(e);return t||X("useDrawer instance is undefined!"),t};return[function(a,s){U((()=>{e.value=null,t.value=null,he[A(o)]=null})),A(t)&&W()&&a===A(e)||(o.value=s,e.value=a,t.value=!0,a.emitVisible=(e,t)=>{ye[t]=e})},{setDrawerProps:e=>{var t;null==(t=a())||t.setDrawerProps(e)},getVisible:g((()=>ye[~~A(o)])),openDrawer:(e=!0,t,s=!0)=>{var l;if(null==(l=a())||l.setDrawerProps({visible:e}),!t)return;if(s)return he[A(o)]=null,void(he[A(o)]=q(t));oe(q(he[A(o)]),q(t))||(he[A(o)]=q(t))},closeDrawer:()=>{var e;null==(e=a())||e.setDrawerProps({visible:!1})}}]}const be=e=>{const t=L(null),o=J(),a=L("");if(!J())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const s=()=>{const e=A(t);if(e)return e;X("useDrawerInner instance is undefined!")};return ee((()=>{const t=he[A(a)];t&&e&&N(e)&&M((()=>{e(t)}))})),[(e,s)=>{U((()=>{t.value=null})),a.value=s,t.value=e,null==o||o.emit("register",e,s)},{changeLoading:(e=!0)=>{var t;null==(t=s())||t.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var t;null==(t=s())||t.setDrawerProps({confirmLoading:e})},getVisible:g((()=>ye[~~A(a)])),closeDrawer:()=>{var e;null==(e=s())||e.setDrawerProps({visible:!1})},setDrawerProps:e=>{var t;null==(t=s())||t.setDrawerProps(e)}}]},ve=te(ge);export{ve as B,we as a,be as u};
