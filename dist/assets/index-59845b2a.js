import{B as e}from"./TableImg-d2c728a3.js";import{T as o}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{e as n,r as i}from"./tenant-2dbceb61.js";import{a as s,ab as a,ac as r,o as l,h as c,n as d,H as u,E as m,j as p,k as f,v as g,l as b,K as j,S as h}from"./index-c5a6c875.js";import{a as k}from"./index-6c947566.js";import{u as y}from"./index-c9e02f09.js";import{c as R,s as _,_ as w}from"./TenantModal-d29ccd91.js";import v from"./SettingModal-3f467cbf.js";import S from"./DataSourceModal-84642bf3.js";import x from"./TenantPackageDrawer-b6d62eca.js";import C from"./TenantPackageSettingModal-964b72f1.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-2c15cc4f.js";import"./datasource-efce687f.js";import"./tenantpackage-ad168568.js";import"./TenantPackageModal-2c5fc626.js";import"./menu-b0618eaf.js";const I=j(" 新增 "),M=j(" 授权配置 "),T=j(" 数据源配置 "),U=j(" 产品包配置 "),D=j(" 产品包管理 "),P=s({setup(s){const{createMessage:j}=h(),[P,{openDrawer:F}]=k(),[O,{openModal:q}]=y(),[E,{openModal:K}]=y(),[B,{openModal:H}]=y(),[W,{openModal:z}]=y(),[A,{reload:V,getRowSelection:G,getSelectRows:J}]=t({api:n,rowKey:"id",columns:R,rowSelection:{type:"checkbox"},clickToRowSelect:!1,formConfig:{labelWidth:120,schemas:_},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function L(){q(!0,{isDetail:!1,isUpdate:!1})}function N(e){q(!0,{record:e,isUpdate:!1,isDetail:!0})}function Q(e){q(!0,{record:e,isDetail:!1,isUpdate:!0})}function X(){const e=G().selectedRowKeys;0!=(null==e?void 0:e.length)?K(!0,{ids:e}):j.error("请至少选择一条数据")}function Y(){const e=J();0!=(null==e?void 0:e.length)?(null==e?void 0:e.length)>1?j.error("只能选择一条数据"):z(!0,{record:e[0]}):j.error("请至少选择一条数据")}function Z(){const e=J();0!=(null==e?void 0:e.length)?(null==e?void 0:e.length)>1?j.error("只能选择一条数据"):H(!0,{record:e[0]}):j.error("请至少选择一条数据")}function $(){F(!0)}function ee(e){return o=this,t=null,n=function*(){yield i({ids:e.id}),j.success("操作成功"),V()},new Promise(((e,i)=>{var s=e=>{try{r(n.next(e))}catch(o){i(o)}},a=e=>{try{r(n.throw(e))}catch(o){i(o)}},r=o=>o.done?e(o.value):Promise.resolve(o.value).then(s,a);r((n=n.apply(o,t)).next())}));var o,t,n}function oe(){j.success("操作成功"),V()}return(t,n)=>{const i=a("a-button"),s=r("auth");return l(),c("div",null,[d(f(e),{onRegister:f(A)},{toolbar:u((()=>[m((l(),p(i,{type:"primary",onClick:L},{default:u((()=>[I])),_:1})),[[s,"post_add"]]),f(g)().getUserInfo.role_name.includes("administrator")?(l(),p(i,{key:0,preIcon:"ant-design:tool-outlined",onClick:X},{default:u((()=>[M])),_:1})):b("",!0),f(g)().getUserInfo.role_name.includes("administrator")?(l(),p(i,{key:1,preIcon:"ant-design:setting-outlined",onClick:Y},{default:u((()=>[T])),_:1})):b("",!0),f(g)().getUserInfo.role_name.includes("administrator")?(l(),p(i,{key:2,preIcon:"ant-design:usb-outlined",onClick:Z},{default:u((()=>[U])),_:1})):b("",!0),f(g)().getUserInfo.role_name.includes("administrator")?(l(),p(i,{key:3,preIcon:"ant-design:appstore-add-outlined",onClick:$},{default:u((()=>[D])),_:1})):b("",!0)])),bodyCell:u((({column:e,record:t})=>["action"===e.dataIndex?(l(),p(f(o),{key:0,actions:[{auth:"post_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:N.bind(null,t)},{auth:"post_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:Q.bind(null,t)},{auth:"post_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:ee.bind(null,t)}}]},null,8,["actions"])):b("",!0)])),_:1},8,["onRegister"]),d(w,{onRegister:f(O),onSuccess:oe},null,8,["onRegister"]),d(v,{onRegister:f(E),onSuccess:oe},null,8,["onRegister"]),d(S,{onRegister:f(W),onSuccess:oe},null,8,["onRegister"]),d(C,{onRegister:f(B),onSuccess:oe},null,8,["onRegister"]),d(x,{onRegister:f(P)},null,8,["onRegister"])])}}});export{P as default};
