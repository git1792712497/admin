import{B as e}from"./TableImg-d2c728a3.js";import{T as o}from"./useForm-76a4ff23.js";import{u as a}from"./useTable-0a379cac.js";import{t as s}from"./work-d99648b5.js";import{s as t,a as i,c8 as n,ab as r,o as l,h as d,n as c,H as m,O as p,K as u,t as f,l as b,j,S as I}from"./index-c5a6c875.js";import{u as w}from"./index-c9e02f09.js";import g from"./IframeModal-56501107.js";import{a as h}from"./flow-a40dbf2f.js";import{u as k}from"./dict-5f910412.js";import{g as x}from"./system-54dc9bf1.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const y=[{title:"流程名称",dataIndex:"processDefinitionName"},{title:"当前步骤",dataIndex:"taskName"},{title:"流程版本",dataIndex:"processDefinitionVersion"},{title:"申请时间",dataIndex:"createTime"}],T=[{field:"category",label:"流程分类",component:"ApiSelect",colProps:{span:8},componentProps:{api:x,params:{code:"flow"},labelField:"dictValue",valueField:"dictKey"}},{field:"name",label:"流程名称",component:"Input",colProps:{span:8}}];const F=t(i({name:"FlowManager",components:{BasicTable:e,TableAction:o,IframeModal:g},setup(){const{createMessage:e}=I(),[o,{openModal:t}]=w(),i=n(),[r,{reload:l}]=a({api:s,columns:y,formConfig:{labelWidth:120,schemas:T},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});return{registerTable:r,handleEdit:function(e){i(`/work/process/${h(k().getFlowRouter,e.category)}/handle/${e.taskId}/${e.processInstanceId}/${e.businessId}`)},handleDetail:function(e){i(`/work/process/${h(k().getFlowRouter,e.category)}/detail/${e.processInstanceId}/${e.businessId}`)},viewModal:o,handleView:function(e){t(!0,{url:`/api/blade-flow/process/diagram-view?processInstanceId=${e.processInstanceId}`})},handleSuccess:function(){e.success("操作成功"),l()}}}}),[["render",function(e,o,a,s,t,i){const n=r("TableAction"),I=r("BasicTable"),w=r("IframeModal");return l(),d("div",null,[c(I,{onRegister:e.registerTable},{bodyCell:m((({column:o,record:a})=>["processDefinitionVersion"===o.dataIndex?(l(),d(p,{key:0},[u("v"+f(a.processDefinitionVersion),1)],64)):b("",!0),"action"===o.dataIndex?(l(),j(n,{key:1,actions:[{auth:"work_todo_handle",label:"处理",icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,a)},{auth:"work_todo_detail",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:e.handleDetail.bind(null,a)},{auth:"work_todo_follow",label:"跟踪",icon:"ant-design:picture-filled",onClick:e.handleView.bind(null,a)}]},null,8,["actions"])):b("",!0)])),_:1},8,["onRegister"]),c(w,{onRegister:e.viewModal},null,8,["onRegister"])])}]]);export{F as default};
