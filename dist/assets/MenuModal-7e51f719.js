var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(a,l,o)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[l]=o,n=(e,a,l)=>new Promise(((o,t)=>{var n=e=>{try{i(l.next(e))}catch(a){t(a)}},s=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);i((l=l.apply(e,a)).next())}));import{cP as s,bc as i,a as r,w as d,k as c,f as u,o as p,j as m,H as f,E as b,G as g,i as y,n as v,ag as h}from"./index-c5a6c875.js";import{u as w,B as P}from"./useForm-76a4ff23.js";import{a as I,B as O}from"./index-c9e02f09.js";import{u as j,D as R}from"./index-2c15cc4f.js";import{c as x,d as q,e as B}from"./menu-b0618eaf.js";const M=[{title:"菜单名称",dataIndex:"name",width:200,align:"left"},{title:"图标",dataIndex:"source",width:50,customRender:({record:e})=>s(i,{icon:e.source})},{title:"菜单编号",dataIndex:"code",width:180},{title:"路由地址",dataIndex:"path"},{title:"排序",dataIndex:"sort",width:50}],D=e=>2===e,_=e=>1===e,k=[{field:"name",label:"菜单名称",component:"Input",colProps:{span:8}},{field:"code",label:"菜单编号",component:"Input",colProps:{span:8}}],S=[{field:"id",label:"id",component:"Input",show:!1},{field:"category",label:"菜单类型",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"菜单",value:1},{label:"按钮",value:2}]},colProps:{lg:24,md:24}},{field:"name",label:"菜单名称",component:"Input",required:!0},{field:"parentId",label:"上级菜单",component:"TreeSelect",componentProps:{fieldNames:{label:"title",value:"value"},getPopupContainer:()=>document.body}},{field:"code",label:"菜单编号",component:"Input",required:!0,helpMessage:"菜单编号和组件的name对应可实现页面缓存"},{field:"source",label:"图标",component:"IconPicker",required:!0,dynamicDisabled:!0,dynamicRules:({values:e})=>D(e.category)?[]:[{required:!0,message:"请输入图标"}],show:({values:e})=>!D(e.category)},{field:"sort",label:"排序",component:"InputNumber",required:!0},{field:"path",label:"路由地址",component:"Input",dynamicRules:({values:e})=>D(e.category)?[]:[{required:!0,message:"请输入路由地址"}],show:({values:e})=>!D(e.category)},{field:"component",label:"组件地址",component:"Input",dynamicDisabled:({values:e})=>!_(e.category),dynamicRules:({values:e})=>_(e.category)?[{required:!0,message:"请输入组件地址"}]:[],show:({values:e})=>!D(e.category),helpMessage:"目录请输入‘LAYOUT’,菜单请输入组件地址"},{field:"isOpen",label:"打开新窗口",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"否",value:1},{label:"是",value:2}]},show:({values:e})=>!D(e.category),helpMessage:"有外部链接时是否新窗口打开"}],G=[{field:"category",label:"菜单类型"},{field:"name",label:"菜单名称"},{field:"parentName",label:"上级菜单"},{field:"code",label:"菜单编号"},{field:"source",label:"图标",render:e=>s(i,{icon:e})},{field:"sort",label:"排序"},{field:"path",label:"路由地址"}],L=r({emits:["success","register"],setup(e,{emit:s}){const i=d(!0),r=d(!0),[M,{setDescProps:D}]=j({schema:G}),[_,{resetFields:k,setFieldsValue:L,updateSchema:C,validate:F}]=w({labelWidth:100,schemas:S,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[N,{setModalProps:T,closeModal:V}]=I((e=>n(this,null,(function*(){if(k(),i.value=!!(null==e?void 0:e.isUpdate),r.value=!!(null==e?void 0:e.isDetail),c(r)){const a=yield x({id:e.record.id});D({data:a})}else{const n=yield q();if(C({field:"parentId",componentProps:{treeData:n}}),c(i)){const n=yield x({id:e.record.id});L(((e,n)=>{for(var s in n||(n={}))l.call(n,s)&&t(e,s,n[s]);if(a)for(var s of a(n))o.call(n,s)&&t(e,s,n[s]);return e})({},n))}e.addChild&&L({parentId:e.record.id})}T({confirmLoading:!1})})))),z=u((()=>c(i)?"编辑菜单":c(r)?"菜单详情":"新增菜单"));function A(){return n(this,null,(function*(){try{const e=yield F();T({confirmLoading:!0}),yield B(e),V(),s("success")}finally{T({confirmLoading:!1})}}))}return(e,a)=>(p(),m(c(O),h(e.$attrs,{onRegister:c(N),title:c(z),width:"50%",showOkBtn:!r.value,onOk:A}),{default:f((()=>[b(y("div",null,[v(c(R),{size:"middle",onRegister:c(M),column:2},null,8,["onRegister"])],512),[[g,r.value]]),b(y("div",null,[v(c(P),{onRegister:c(_)},null,8,["onRegister"])],512),[[g,!r.value]])])),_:1},16,["onRegister","title","showOkBtn"]))}}),C=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{C as M,L as _,M as c,k as s};
