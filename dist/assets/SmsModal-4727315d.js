var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,i=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))s.call(l,a)&&n(e,a,l[a]);return e},r=(e,l,a)=>new Promise(((t,o)=>{var s=e=>{try{i(a.next(e))}catch(l){o(l)}},n=e=>{try{i(a.throw(e))}catch(l){o(l)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,n);i((a=a.apply(e,l)).next())}));import{a as d,w as c,k as p,f as u,o as m,j as f,H as b,E as y,G as I,i as g,n as v,ag as h}from"./index-c5a6c875.js";import{a as O,B as P}from"./index-c9e02f09.js";import{u as j,B as w}from"./useForm-76a4ff23.js";import{g as x,a as K}from"./sms-c69fdca7.js";import{u as D,D as R}from"./index-2c15cc4f.js";const k=[{title:"分类",dataIndex:"category",format:e=>"1"==e?"云片":"2"==e?"七牛云":"3"==e?"阿里云":"4"==e?"腾讯云":void 0},{title:"资源编号",dataIndex:"smsCode"},{title:"模版ID",dataIndex:"templateId"},{title:"accessKey",dataIndex:"accessKey"},{title:"短信签名",dataIndex:"signName"},{title:"是否启用",dataIndex:"status"}],C=[{field:"category",label:"分类",component:"Input",colProps:{span:8}},{field:"smsCode",label:"资源编号",component:"Input",colProps:{span:8}},{field:"templateId",label:"模版ID",component:"Input",colProps:{span:8}}],_=[{field:"category",component:"RadioGroup",label:"分类",componentProps:{options:[{label:"云片",value:1},{label:"七牛云",value:2},{label:"阿里云",value:3},{label:"腾讯云",value:4}]}},{field:"smsCode",label:"资源编号",component:"Input",required:!0},{field:"templateId",label:"模版ID",component:"Input",required:!0},{field:"signName",label:"短信签名",component:"Input",required:!0},{field:"accessKey",label:"accessKey",component:"Input",required:!0},{field:"secretKey",label:"secretKey",component:"Input",required:!0},{field:"appId",label:"appId",component:"Input",show:({model:e})=>4===e.category},{field:"regionId",label:"regionId",component:"Input",show:({model:e})=>3===e.category},{field:"remark",label:"备注",component:"InputTextArea"}],q=[{field:"category",label:"分类"},{field:"smsCode",label:"资源编号"},{field:"templateId",label:"模版ID"},{field:"signName",label:"短信签名"},{field:"accessKey",label:"accessKey"},{field:"secretKey",label:"secretKey"},{field:"appId",label:"appId"},{field:"regionId",label:"regionId"},{field:"remark",label:"备注"}],B=d({emits:["success","register"],setup(e,{emit:t}){const o=c(!0),s=c(!0),n=c(""),[d,{setDescProps:k}]=D({schema:q}),[C,{setFieldsValue:B,resetFields:S,validate:F}]=j({labelWidth:100,schemas:_,showActionButtonGroup:!1,baseColProps:{span:24},actionColOptions:{span:23}}),[G,{setModalProps:L,closeModal:M}]=O((e=>r(this,null,(function*(){if(S(),L({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),o.value=!!(null==e?void 0:e.isDetail),p(o)){const l=yield x({id:e.record.id});k({data:l})}else if(p(s)){n.value=e.record.id;const l=yield x({id:e.record.id});B(i({},l))}})))),N=u((()=>p(s)?"编辑":p(o)?"详情":"新增"));function z(){return r(this,null,(function*(){try{const r=yield F();L({confirmLoading:!0}),p(s)&&(r.id=n.value),yield K(r),M(),t("success",{isUpdate:p(s),values:(e=i({},r),o={id:n.value},l(e,a(o)))})}finally{L({confirmLoading:!1})}var e,o}))}return(e,l)=>(m(),f(p(P),h(e.$attrs,{onRegister:p(G),title:p(N),onOk:z,showOkBtn:!o.value,width:900}),{default:b((()=>[y(g("div",null,[v(p(R),{size:"middle",onRegister:p(d),column:1},null,8,["onRegister"])],512),[[I,o.value]]),y(g("div",null,[v(p(w),{onRegister:p(C)},null,8,["onRegister"])],512),[[I,!o.value]])])),_:1},16,["onRegister","title","showOkBtn"]))}}),S=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{S,B as _,k as c,C as s};
