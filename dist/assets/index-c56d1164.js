import{B as e}from"./TableImg-d2c728a3.js";import{T as a}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{g as o,r as n}from"./attach-17a7a276.js";import{u as i}from"./index-c9e02f09.js";import s from"./AttachModal-28e0e271.js";import{a as l,ab as r,ac as d,o as c,h as m,n as u,H as p,E as f,j as b,k as j,l as h,K as x,S as g}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const I=[{title:"附件地址",dataIndex:"link"},{title:"附件域名",dataIndex:"domainUrl"},{title:"附件名称",dataIndex:"name"},{title:"附件原名",dataIndex:"originalName"},{title:"附件拓展名",dataIndex:"extension"},{title:"附件大小",dataIndex:"attachSize"}],w=[{field:"domainUrl",label:"附件域名",component:"Input",colProps:{span:8}},{field:"name",label:"附件名称",component:"Input",colProps:{span:8}},{field:"originalName",label:"附件原名",component:"Input",colProps:{span:8}}],y=x(" 上传 "),v=l({setup(l){const{createMessage:x}=g(),{success:v}=x,[C,{openModal:k}]=i(),[R,{reload:_,updateTableDataRecord:P}]=t({api:o,rowKey:"id",columns:I,formConfig:{labelWidth:120,schemas:w},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function S(){k(!0,{isDetail:!1,isUpdate:!1})}function F(e){window.open(`${e.link}`)}function M(e){return a=this,t=null,o=function*(){yield n({ids:e.id}),v("操作成功"),_()},new Promise(((e,n)=>{var i=e=>{try{l(o.next(e))}catch(a){n(a)}},s=e=>{try{l(o.throw(e))}catch(a){n(a)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(i,s);l((o=o.apply(a,t)).next())}));var a,t,o}function O({isUpdate:e,values:a}){v("操作成功"),e?P(a.id,a):_()}return(t,o)=>{const n=r("a-button"),i=d("auth");return c(),m("div",null,[u(j(e),{onRegister:j(R)},{toolbar:p((()=>[f((c(),b(n,{type:"primary",onClick:S},{default:p((()=>[y])),_:1})),[[i,"attach_upload"]])])),bodyCell:p((({column:e,record:t})=>["action"===e.dataIndex?(c(),b(j(a),{key:0,actions:[{auth:"attach_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:M.bind(null,t)}},{auth:"attach_download",label:"下载",icon:"clarity:download-cloud-line",onClick:F.bind(null,t)}]},null,8,["actions"])):h("",!0)])),_:1},8,["onRegister"]),u(s,{onRegister:j(C),onSuccess:O},null,8,["onRegister"])])}}});export{v as default};
