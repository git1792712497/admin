var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,a)=>{for(var l in a||(a={}))r.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&i(e,l,a[l]);return e},n=(e,a,l)=>new Promise(((t,r)=>{var s=e=>{try{o(l.next(e))}catch(a){r(a)}},i=e=>{try{o(l.throw(e))}catch(a){r(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,i);o((l=l.apply(e,a)).next())}));import{a as d,w as u,k as c,f as p,o as f,j as m,H as b,E as v,G as y,i as g,n as O,ag as h}from"./index-c5a6c875.js";import{a as j,B as w}from"./index-c9e02f09.js";import{u as I,B as P}from"./useForm-76a4ff23.js";import{a as x,s as k}from"./datasource-efce687f.js";import{u as R,D as _}from"./index-2c15cc4f.js";const q=[{title:"名称",dataIndex:"name"},{title:"驱动类",dataIndex:"driverClass"},{title:"用户名",dataIndex:"username"},{title:"链接地址",dataIndex:"url"}],B=[{field:"name",label:"名称",component:"Input",required:!0},{field:"driverClass",label:"驱动类",component:"Input",required:!0},{field:"username",label:"用户名",component:"Input",required:!0},{field:"password",label:"密码",component:"Input",required:!0},{field:"url",label:"链接地址",component:"Input",required:!0},{field:"remark",label:"备注",component:"Input"}],C=[{field:"name",label:"名称"},{field:"driverClass",label:"驱动类"},{field:"username",label:"用户名"},{field:"password",label:"密码"},{field:"url",label:"链接地址"},{field:"remark",label:"备注"}],D=d({emits:["success","register"],setup(e,{emit:t}){const r=u(!0),s=u(!0),i=u(""),[d,{setDescProps:q}]=R({schema:C}),[D,{setFieldsValue:F,resetFields:L,validate:M}]=I({labelWidth:100,schemas:B,showActionButtonGroup:!1,baseColProps:{span:12},actionColOptions:{span:23}}),[S,{setModalProps:z,closeModal:E}]=j((e=>n(this,null,(function*(){if(L(),z({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),r.value=!!(null==e?void 0:e.isDetail),c(r)){const a=yield x({id:e.record.id});q({data:a})}else if(c(s)){i.value=e.record.id;const a=yield x({id:e.record.id});F(o({},a))}})))),G=p((()=>c(s)?"编辑应用":c(r)?"应用详情":"新增应用"));function U(){return n(this,null,(function*(){try{const n=yield M();z({confirmLoading:!0}),c(s)&&(n.id=i.value),yield k(n),E(),t("success",{isUpdate:c(s),values:(e=o({},n),r={id:i.value},a(e,l(r)))})}finally{z({confirmLoading:!1})}var e,r}))}return(e,a)=>(f(),m(c(w),h(e.$attrs,{onRegister:c(S),title:c(G),onOk:U,showOkBtn:!r.value,width:900}),{default:b((()=>[v(g("div",null,[O(c(_),{size:"middle",onRegister:c(d),column:1},null,8,["onRegister"])],512),[[y,r.value]]),v(g("div",null,[O(c(P),{onRegister:c(D)},null,8,["onRegister"])],512),[[y,!r.value]])])),_:1},16,["onRegister","title","showOkBtn"]))}}),F=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{F as D,D as _,q as c};
