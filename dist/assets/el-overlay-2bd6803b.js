var J=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var T=(e,o,t)=>o in e?J(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,P=(e,o)=>{for(var t in o||(o={}))X.call(o,t)&&T(e,t,o[t]);if(S)for(var t of S(o))R.call(o,t)&&T(e,t,o[t]);return e},I=(e,o)=>K(e,Q(o));import{b as B,d as k,u as ee}from"./base-27e822c2.js";import{u as z,d as oe}from"./plugin-vue_export-helper-529fb311.js";import{a5 as te,bq as le,w as E,a8 as ne,a2 as x,d as ae,e as se,r as D,p as ue,Y as p,U as F,n as ce,l as ie,A as re}from"./runtime-core.esm-bundler-76eda81d.js";import{P as w}from"./vnode-f161a7f0.js";import{i as de}from"./icon-6077fbcf.js";import{U as L}from"./event-9519ab40.js";import{c as y}from"./index-e961436e.js";import{a as fe}from"./index-10373a61.js";import{u as A}from"./index-35e23b9e.js";import{h as N,g as me,b as ye,r as ve,a as pe}from"./style-e1000a00.js";import{t as Ce}from"./error-78e43d3e.js";import{a as be}from"./scroll-38214788.js";const ge=e=>{te(e)||Ce("[useLockscreen]","You need to pass a ref param to this function");const o=z("popup"),t=le(()=>o.bm("parent","hidden"));if(!y.isClient||N(document.body,t.value))return;let l=0,u=!1,c="0";const n=()=>{setTimeout(()=>{ve(document.body,t.value),u&&(document.body.style.width=c)},200)};E(e,r=>{if(!r){n();return}u=!N(document.body,t.value),u&&(c=document.body.style.width),l=be(o.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,d=me(document.body,"overflowY");l>0&&(s||d==="scroll")&&u&&(document.body.style.width=`calc(100% - ${l}px)`),ye(document.body,t.value)}),ne(()=>n())},he=e=>{if(!e)return{onClick:x,onMousedown:x,onMouseup:x};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},xe=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),we={click:e=>e instanceof MouseEvent};var ke=ae({name:"ElOverlay",props:xe,emits:we,setup(e,{slots:o,emit:t}){const l=z("overlay"),u=s=>{t("click",s)},{onClick:c,onMousedown:n,onMouseup:r}=he(e.customMaskEvent?void 0:u);return()=>e.mask?se("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:n,onMouseup:r},[D(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):ue("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[D(o,"default")])}});const Ve=ke,Ee=B({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:de},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ye={close:()=>!0},$e=B(I(P({},Ee),{appendToBody:{type:Boolean,default:!1},beforeClose:{type:k(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}})),He={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[L]:e=>y.isBoolean(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ue=(e,o)=>{const l=re().emit,{nextZIndex:u}=fe();let c="";const n=A(),r=A(),s=p(!1),d=p(!1),v=p(!1),C=p(e.zIndex||u());let f,m;const V=ee("namespace",oe),Y=F(()=>{const a={},i=`--${V.value}-dialog`;return e.fullscreen||(e.top&&(a[`${i}-margin-top`]=e.top),e.width&&(a[`${i}-width`]=pe(e.width))),a}),$=F(()=>e.alignCenter?{display:"flex"}:{});function H(){l("opened")}function U(){l("closed"),l(L,!1),e.destroyOnClose&&(v.value=!1)}function W(){l("close")}function M(){m==null||m(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=y.useTimeoutFn(()=>O(),e.openDelay):O()}function b(){f==null||f(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=y.useTimeoutFn(()=>h(),e.closeDelay):h()}function g(){function a(i){i||(d.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(a):b()}function _(){e.closeOnClickModal&&g()}function O(){!y.isClient||(s.value=!0)}function h(){s.value=!1}function q(){l("openAutoFocus")}function Z(){l("closeAutoFocus")}function j(a){var i;((i=a.detail)==null?void 0:i.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&ge(s);function G(){e.closeOnPressEscape&&g()}return E(()=>e.modelValue,a=>{a?(d.value=!1,M(),v.value=!0,C.value=e.zIndex?C.value++:u(),ce(()=>{l("open"),o.value&&(o.value.scrollTop=0)})):s.value&&b()}),E(()=>e.fullscreen,a=>{!o.value||(a?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),ie(()=>{e.modelValue&&(s.value=!0,v.value=!0,M())}),{afterEnter:H,afterLeave:U,beforeLeave:W,handleClose:g,onModalClick:_,close:b,doClose:h,onOpenAutoFocus:q,onCloseAutoFocus:Z,onCloseRequested:G,onFocusoutPrevented:j,titleId:n,bodyId:r,closed:d,style:Y,overlayDialogStyle:$,rendered:v,visible:s,zIndex:C}};export{Ve as E,Ye as a,$e as b,He as c,Ee as d,he as e,Ue as u};
