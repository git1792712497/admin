var e=(e,s,a)=>new Promise(((t,o)=>{var r=e=>{try{l(a.next(e))}catch(s){o(s)}},i=e=>{try{l(a.throw(e))}catch(s){o(s)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);l((a=a.apply(e,s)).next())}));import{a as s,B as a}from"./index-c9e02f09.js";import{_ as t}from"./index-941b9c74.js";import{p as o}from"./system-54dc9bf1.js";import{s as r}from"./user-a4458d91.js";import{a as i,w as l,f as n,o as c,j as u,H as d,n as m,k as f,ag as p}from"./index-c5a6c875.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./get-8f9589fb.js";const v=i({emits:["success","register"],setup(i,{emit:v}){const h=l(""),j=l([]),y=l([]),[g,{setModalProps:b,closeModal:k}]=s((s=>e(this,null,(function*(){b({confirmLoading:!1}),h.value=s.recordIds.join(",");const e=yield o();1===s.records.length&&(y.value=s.records[0].roleId.split(",")),j.value=e})))),x=n((()=>"编辑权限"));function w(){return e(this,null,(function*(){try{b({confirmLoading:!0}),yield r({userIds:h.value,roleIds:y.value.join(",")}),k(),v("success")}finally{b({confirmLoading:!1})}}))}return(e,s)=>(c(),u(f(a),p(e.$attrs,{onRegister:f(g),title:f(x),width:"400",height:800,onOk:w}),{default:d((()=>[m(f(t),{treeData:j.value,value:y.value,"onUpdate:value":s[0]||(s[0]=e=>y.value=e),checkedKeys:y.value,fieldNames:{key:"id"},checkable:"",toolbar:""},null,8,["treeData","value","checkedKeys"])])),_:1},16,["onRegister","title"]))}});export{v as default};
