var e=(e,o,n)=>new Promise(((t,i)=>{var a=e=>{try{s(n.next(e))}catch(o){i(o)}},r=e=>{try{s(n.throw(e))}catch(o){i(o)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,r);s((n=n.apply(e,o)).next())}));import{B as o}from"./TableImg-d2c728a3.js";import{T as n}from"./useForm-76a4ff23.js";import{u as t}from"./useTable-0a379cac.js";import{bo as i,a,o as r,h as s,n as l,H as d,j as c,k as m,v as u,l as p,y as f,S as b}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./index-c9e02f09.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";function j(e){return i.get({url:"/blade-report/report/rest/list",params:e},{joinParamsToUrl:!0,joinTime:!1})}const h=[{title:"文件名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime"},{title:"更新时间",dataIndex:"updateTime"}],g=[{field:"name",label:"文件名",component:"Input",colProps:{span:8}}],w=a({setup(a){const{createMessage:w}=b(),[x,{reload:v}]=t({api:j,columns:h,formConfig:{labelWidth:120,schemas:g},useSearchForm:!0,actionColumn:{width:300,title:"操作",dataIndex:"action"}});function y(o){return e(this,null,(function*(){var e;yield(e={ids:o.id},i.post({url:"/blade-report/report/rest/remove",params:e},{joinParamsToUrl:!0,joinTime:!1})),w.success("操作成功"),v()}))}function I(o){return e(this,null,(function*(){window.open(`${f.reportUrl}/designer?_u=blade-${o.name}`)}))}function T(o){return e(this,null,(function*(){window.open(`${f.reportUrl}/preview?_u=blade-${o.name}`)}))}return(e,t)=>(r(),s("div",null,[l(m(o),{onRegister:m(x)},{bodyCell:d((({column:e,record:o})=>["action"===e.dataIndex?(r(),c(m(n),{key:0,actions:[{label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:y.bind(null,o)}},{ifShow:()=>m(u)().getUserInfo.role_name.includes("admin"),label:"设计",icon:"clarity:note-edit-line",onClick:I.bind(null,o)},{ifShow:()=>m(u)().getUserInfo.role_name.includes("admin"),label:"预览",icon:"clarity:info-standard-line",color:"success",onClick:T.bind(null,o)}]},null,8,["actions"])):p("",!0)])),_:1},8,["onRegister"])]))}});export{w as default};
