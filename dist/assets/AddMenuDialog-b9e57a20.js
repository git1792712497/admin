var X=Object.defineProperty,Z=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var S=(p,u,r)=>u in p?X(p,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):p[u]=r,q=(p,u)=>{for(var r in u||(u={}))J.call(u,r)&&S(p,r,u[r]);if(M)for(var r of M(u))W.call(u,r)&&S(p,r,u[r]);return p},P=(p,u)=>Z(p,H(u));var A=(p,u,r)=>new Promise((y,m)=>{var e=v=>{try{b(r.next(v))}catch(f){m(f)}},g=v=>{try{b(r.throw(v))}catch(f){m(f)}},b=v=>v.done?y(v.value):Promise.resolve(v.value).then(e,g);b((r=r.apply(p,u)).next())});import{A as N,w as $,f as Y,p as ee,K as le,L as te,x as oe,M as ae,N as re,O as ne,P as ue,y as pe,Q as se,l as R}from"./element-plus-3c3e7816.js";import{a as de}from"./menu-2a3ae1f5.js";import{I as ie}from"./@element-plus-9f43ecf9.js";import{F as D,s as me,o as i,c as B,a2 as o,a0 as l,p as F,a as j,Q as fe,ab as _e,u as t,$ as c,r as U,q as ce,ao as ye,ac as s,X as ge,Z as V,ae as ve,a4 as be,G as L,n as Ve}from"./@vue-0bd7c233.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./lodash-unified-cbbf5a2b.js";import"./lodash-d8f670e1.js";import"./@amap-9fd45ac7.js";import"./@sxzz-ad8bfd58.js";import"./@vueuse-b3c2dc13.js";import"./dayjs-604b50be.js";import"./async-validator-f102eabc.js";import"./@ctrl-83f18216.js";import"./escape-html-12e99df8.js";import"./normalize-wheel-es-c175a4cf.js";import"./vue-171b62d6.js";import"./@floating-ui-5f39704e.js";import"./memoize-one-0650c7b0.js";import"./pinia-c63b1ff9.js";import"./vue-demi-71ba0ef2.js";import"./axios-226f391c.js";import"./qs-b010a38c.js";import"./side-channel-a082fe58.js";import"./get-intrinsic-5660d814.js";import"./has-symbols-8f82dcae.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-75c15918.js";import"./object-inspect-4572ba77.js";import"./preload-helper-41c905a7.js";import"./vue-router-169b55e4.js";import"./nprogress-57f984c9.js";import"./lodash-es-81e82e73.js";const ke={type:[{type:"number",required:!0,message:"菜单类型是必选项",trigger:"blur"}],sort:[{type:"number",required:!0,message:"菜单序号是必选项",trigger:"blur"}],title:[{type:"string",required:!0,message:"菜单标题是必填项",trigger:"blur"}],name:[{type:"string",required:!0,message:"菜单标识是必填项",trigger:"blur"}],icon:[{required:!0,message:"菜单图标是必选项",trigger:"change"}],path:[{type:"string",required:!1,message:"菜单路径是必填项",trigger:"blur"},{validator(p,u,r,y,m){const e=/^\//,g=/^http/;if(!u){r();return}e.test(u)||g.test(u)?r():r(new Error("菜单路径必须以斜杠开头或http://链接"))}}],component:[{type:"string",required:!1,message:"组件路径是必填项",trigger:"blur"},{validator(p,u,r,y,m){/^\//.test(u)?r():r(new Error("组件路径必须以斜杠开头"))}}]},xe={class:"flex justify-start flex-wrap items-center"},Ee=D({name:"index"}),we=D(P(q({},Ee),{props:{modelValue:{type:String,default:"Menu"}},emits:["update:modelValue"],setup(p,{emit:u}){let r=me(!1);return(y,m)=>{const e=N,g=$,b=Y,v=ee;return i(),B("div",null,[o(v,{width:315,visible:t(r),"onUpdate:visible":m[1]||(m[1]=f=>F(r)?r.value=f:r=f),placement:"bottom",trigger:"click",transition:"el-zoom-in-top","popper-class":"icon-selector-popper"},{reference:l(()=>[o(g,{type:"text",onBlur:m[0]||(m[0]=f=>F(r)?r.value=!1:r=!1),modelValue:p.modelValue,placeholder:"图标"},{prepend:l(()=>[o(e,{size:"small",icon:p.modelValue},null,8,["icon"])]),_:1},8,["modelValue"])]),default:l(()=>[o(b,{height:"210px"},{default:l(()=>[j("nav",xe,[(i(!0),B(fe,null,_e(Object.keys(ie),f=>(i(),c(e,{onClick:C=>u("update:modelValue",f),key:f,icon:f},null,8,["onClick","icon"]))),128))])]),_:1})]),_:1},8,["visible"])])}}}));const he=O(we,[["__scopeId","data-v-16049c43"]]),Ue={class:"dialog-footer"},Ce=D({__name:"AddMenuDialog",props:{menuData:{type:Array,default:[]}},emits:["refresh"],setup(p,{expose:u,emit:r}){const y=U(""),m=U();let e=ce({hidden:1,fullScreen:0,keepAlive:0,name:"",icon:"Menu",path:"",sort:0,component:"",type:void 0,title:"",isLink:0,activePath:""});const g=U(!1);let b=U(!1);const v=()=>{m.value.validate(x=>A(this,null,function*(){if(!x)return;b.value=!0;const a=L(e);a.path=y.value+a.path;try{const{message:d}=yield de(a);R.ElMessage({message:d,type:"success"}),r("refresh"),C()}catch(d){R.ElMessage({message:"创建失败",type:"error"})}finally{b.value=!1}}))},f=x=>A(this,null,function*(){g.value=!0,yield Ve(),x?Object.keys(L(e)).forEach(a=>e[a]=x[a]):(y.value="",e.path="",m.value.resetFields())}),C=()=>g.value=!1;return u({openDialog:f,closeDialog:C}),(x,a)=>{const d=le,E=te,_=oe,w=$,k=ae,h=re,T=ne,z=ue,G=pe,I=N,Q=se,K=ye("auth");return i(),c(Q,{modelValue:g.value,"onUpdate:modelValue":a[16]||(a[16]=n=>g.value=n),title:"新增菜单",width:550},{footer:l(()=>[j("span",Ue,[o(I,{onClick:a[15]||(a[15]=n=>g.value=!1)},{default:l(()=>[s("取消")]),_:1}),ge((i(),c(I,{type:"primary",loading:t(b),onClick:v},{default:l(()=>[s("确定")]),_:1},8,["loading"])),[[K,"addMenu"]])])]),default:l(()=>[o(G,{ref_key:"formRef",ref:m,model:t(e),"status-icon":"",rules:t(ke),"label-width":"80px"},{default:l(()=>[o(_,{label:"菜单类型",prop:"type"},{default:l(()=>[o(E,{modelValue:t(e).type,"onUpdate:modelValue":a[0]||(a[0]=n=>t(e).type=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("目录")]),_:1}),o(d,{label:2},{default:l(()=>[s("菜单")]),_:1}),o(d,{label:3},{default:l(()=>[s("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(h,{gutter:20},{default:l(()=>[o(k,{span:t(e).type===1?24:12},{default:l(()=>[o(_,{label:"菜单名称",prop:"title"},{default:l(()=>[o(w,{modelValue:t(e).title,"onUpdate:modelValue":a[1]||(a[1]=n=>t(e).title=n),clearable:"",autofocus:"",placeholder:"请输入菜单标题"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),o(k,{span:12},{default:l(()=>[t(e).type!==1?(i(),c(_,{key:0,label:"菜单标识",prop:"name"},{default:l(()=>[o(w,{modelValue:t(e).name,"onUpdate:modelValue":a[2]||(a[2]=n=>t(e).name=n),clearable:"",autofocus:"",placeholder:"请输入菜单标识"},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1}),o(_,{label:"父级菜单",prop:"parentId"},{default:l(()=>[o(T,{onClear:a[3]||(a[3]=n=>y.value=void 0),onCurrentChange:a[4]||(a[4]=({path:n})=>y.value=n),modelValue:t(e).parentId,"onUpdate:modelValue":a[5]||(a[5]=n=>t(e).parentId=n),data:p.menuData,"check-strictly":"",clearable:"",props:{label:"title",children:"children",value:"id"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),t(e).type!==3?(i(),c(_,{key:0,label:"菜单路由",prop:"path"},{default:l(()=>[o(w,{modelValue:t(e).path,"onUpdate:modelValue":a[6]||(a[6]=n=>t(e).path=n),clearable:"",placeholder:"请输入路由path或http外链地址"},ve({_:2},[y.value?{name:"prepend",fn:l(()=>[s(be(y.value),1)]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})):V("",!0),t(e).type===2||t(e).type===void 0?(i(),c(_,{key:1,label:"组件路径",prop:"component"},{default:l(()=>[o(w,{modelValue:t(e).component,"onUpdate:modelValue":a[7]||(a[7]=n=>t(e).component=n),clearable:"",placeholder:"请输入组件路径"},{prepend:l(()=>[s("@/views")]),_:1},8,["modelValue"])]),_:1})):V("",!0),t(e).type===2||t(e).type===void 0?(i(),c(_,{key:2,label:"活跃菜单",prop:"activePath"},{default:l(()=>[o(w,{modelValue:t(e).activePath,"onUpdate:modelValue":a[8]||(a[8]=n=>t(e).activePath=n),clearable:"",placeholder:"请输入当前激活菜单路径"},null,8,["modelValue"])]),_:1})):V("",!0),o(h,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type!==3?(i(),c(_,{key:0,label:"菜单图标",prop:"icon"},{default:l(()=>[o(he,{class:"w-full",modelValue:t(e).icon,"onUpdate:modelValue":a[9]||(a[9]=n=>t(e).icon=n)},null,8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:t(e).type===3?24:12},{default:l(()=>[o(_,{label:"菜单排序",prop:"sort"},{default:l(()=>[o(z,{modelValue:t(e).sort,"onUpdate:modelValue":a[10]||(a[10]=n=>t(e).sort=n),min:0,placeholder:"菜单序号",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["span"])]),_:1}),o(h,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(i(),c(_,{key:0,label:"是否外链",prop:"isLink"},{default:l(()=>[o(E,{modelValue:t(e).isLink,"onUpdate:modelValue":a[11]||(a[11]=n=>t(e).isLink=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(i(),c(_,{key:0,label:"菜单状态",prop:"hidden"},{default:l(()=>[o(E,{modelValue:t(e).hidden,"onUpdate:modelValue":a[12]||(a[12]=n=>t(e).hidden=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("显示")]),_:1}),o(d,{label:0},{default:l(()=>[s("隐藏")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1}),o(h,{gutter:20},{default:l(()=>[o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(i(),c(_,{key:0,label:"开启全屏",prop:"fullScreen"},{default:l(()=>[o(E,{modelValue:t(e).fullScreen,"onUpdate:modelValue":a[13]||(a[13]=n=>t(e).fullScreen=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1}),o(k,{span:12},{default:l(()=>[t(e).type===2||t(e).type===void 0?(i(),c(_,{key:0,label:"缓存菜单",prop:"keepAlive"},{default:l(()=>[o(E,{modelValue:t(e).keepAlive,"onUpdate:modelValue":a[14]||(a[14]=n=>t(e).keepAlive=n)},{default:l(()=>[o(d,{label:1},{default:l(()=>[s("开启")]),_:1}),o(d,{label:0},{default:l(()=>[s("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});const pl=O(Ce,[["__scopeId","data-v-a7429179"]]);export{pl as default};
