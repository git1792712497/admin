import{B as e}from"./TableImg-d2c728a3.js";import{T as t}from"./useForm-76a4ff23.js";import{u as i}from"./useTable-0a379cac.js";import{g as a,c as o,s,_ as n,r}from"./ClientModal-5123862e.js";import{u as c}from"./index-c9e02f09.js";import{a as l,ab as d,ac as u,o as m,h as p,n as f,H as b,E as j,j as h,k as g,K as x,S as y}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./index-2c15cc4f.js";const v=x(" 新增 "),C=l({setup(l){const{createMessage:x}=y(),{success:C}=x,[w,{openModal:_}]=c(),[R,{reload:k,updateTableDataRecord:D}]=i({api:a,rowKey:"id",columns:o,formConfig:{labelWidth:120,schemas:s},useSearchForm:!0,actionColumn:{width:250,title:"操作",dataIndex:"action",slots:{customRender:"action"}}});function F(){_(!0,{isDetail:!1,isUpdate:!1})}function M(e){_(!0,{record:e,isUpdate:!1,isDetail:!0})}function O(e){_(!0,{record:e,isDetail:!1,isUpdate:!0})}function S(e){return t=this,i=null,a=function*(){yield r({ids:e.id}),C("操作成功"),k()},new Promise(((e,o)=>{var s=e=>{try{r(a.next(e))}catch(t){o(t)}},n=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,n);r((a=a.apply(t,i)).next())}));var t,i,a}function T({isUpdate:e,values:t}){C("操作成功"),e?D(t.id,t):k()}return(i,a)=>{const o=d("a-button"),s=u("auth");return m(),p("div",null,[f(g(e),{onRegister:g(R)},{toolbar:b((()=>[j((m(),h(o,{type:"primary",onClick:F},{default:b((()=>[v])),_:1})),[[s,"client_add"]])])),action:b((({record:e})=>[f(g(t),{actions:[{auth:"client_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:M.bind(null,e)},{auth:"client_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:O.bind(null,e)},{auth:"client_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:S.bind(null,e)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),f(n,{onRegister:g(w),onSuccess:T},null,8,["onRegister"])])}}});export{C as default};
