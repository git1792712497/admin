var e=(e,o,t)=>new Promise(((a,i)=>{var n=e=>{try{r(t.next(e))}catch(o){i(o)}},s=e=>{try{r(t.throw(e))}catch(o){i(o)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);r((t=t.apply(e,o)).next())}));import{B as o}from"./TableImg-d2c728a3.js";import{T as t}from"./useForm-76a4ff23.js";import{u as a}from"./useTable-0a379cac.js";import{u as i,B as n}from"./index-6c947566.js";import{l as s,r}from"./tenantpackage-ad168568.js";import{u as c}from"./index-c9e02f09.js";import l from"./TenantPackageModal-2c5fc626.js";import{a as d,w as m,ab as u,o as p,j as f,H as j,n as b,k as g,l as h,ag as x,K as w,S as y}from"./index-c5a6c875.js";import"./index-33df9098.js";import"./onMountedOrActivated-48cd1b25.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./menu-b0618eaf.js";const k=w("新增"),I=d({setup(d){const w=m(""),I=m(""),{createMessage:C}=y(),{success:v}=C,[R,{openModal:P}]=c(),[F,{reload:M,setProps:O}]=a({api:s,columns:[{title:"产品包名",dataIndex:"packageName"},{title:"备注",dataIndex:"remark"}],formConfig:{labelWidth:80,schemas:[{field:"packageName",label:"产品包名",component:"Input",colProps:{span:8}}]},rowKey:"id",showIndexColumn:!0,useSearchForm:!0,actionColumn:{width:200,title:"操作",dataIndex:"action"}}),[S,{setDrawerProps:T}]=i((o=>e(this,null,(function*(){O({searchInfo:{menuId:o.record.id}}),w.value=o.record.name,I.value=o.record.id,M(),T({confirmLoading:!1})}))));function _(){P(!0,{isUpdate:!1})}function q(e){P(!0,{record:e,isUpdate:!0})}function B(o){return e(this,null,(function*(){yield r({ids:o.id}),v("操作成功"),M()}))}function E(){v("操作成功"),M()}return(e,a)=>{const i=u("a-button");return p(),f(g(n),x(e.$attrs,{onRegister:g(S),title:"租户产品包管理",width:"1000px"}),{default:j((()=>[b(g(o),{onRegister:g(F)},{toolbar:j((()=>[b(i,{type:"primary",onClick:_},{default:j((()=>[k])),_:1})])),bodyCell:j((({column:e,record:o})=>["action"===e.dataIndex?(p(),f(g(t),{key:0,actions:[{label:"编辑",icon:"clarity:note-edit-line",onClick:q.bind(null,o)},{label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:B.bind(null,o)}}]},null,8,["actions"])):h("",!0)])),_:1},8,["onRegister"]),b(l,{onRegister:g(R),onSuccess:E},null,8,["onRegister"])])),_:1},16,["onRegister"])}}});export{I as default};
