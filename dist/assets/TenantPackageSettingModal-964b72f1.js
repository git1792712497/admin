var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,t,o)=>new Promise(((a,n)=>{var s=e=>{try{i(o.next(e))}catch(t){n(t)}},r=e=>{try{i(o.throw(e))}catch(t){n(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,r);i((o=o.apply(e,t)).next())}));import{a as r,B as i}from"./index-c9e02f09.js";import{u as l,B as d}from"./useForm-76a4ff23.js";import{p as c,d as p}from"./tenantpackage-ad168568.js";import{a as u,w as m,b6 as f,o as b,j,H as g,n as y,k as h,ag as I}from"./index-c5a6c875.js";import{d as v}from"./menu-b0618eaf.js";import{b as P,c as w}from"./tenant-2dbceb61.js";import"./useWindowSizeFn-72c85a53.js";import"./FullscreenOutlined-9b414b92.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./index-bb91fa2a.js";import"./get-8f9589fb.js";import"./uuid-f62a8acd.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const O=u({emits:["success","register"],setup(e,{emit:u}){const O=m(""),[k,{setFieldsValue:x,resetFields:C,validate:F}]=l({labelWidth:100,schemas:[{field:"packageId",label:"产品包",component:"ApiSelect",componentProps:{api:c,labelField:"packageName",valueField:"id",getPopupContainer:()=>document.body,onChange:e=>s(this,null,(function*(){const t=yield p({id:e});x({menuId:t.menuId.split(",")})}))},required:!0},{field:"menuId",label:"菜单预览",component:"ApiTreeSelect",componentProps:{api:v,treeCheckable:!0,showCheckedStrategy:f.SHOW_ALL,getPopupContainer:()=>document.body},required:!0}],showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:24}}),[S,{setModalProps:q,closeModal:L}]=r((e=>s(this,null,(function*(){C(),O.value=e.record.tenantId;const s=yield P({tenantId:e.record.id});s.menuId&&(s.packageId=s.id,s.menuId=s.menuId.split(",")),x(((e,s)=>{for(var r in s||(s={}))o.call(s,r)&&n(e,r,s[r]);if(t)for(var r of t(s))a.call(s,r)&&n(e,r,s[r]);return e})({},s)),q({confirmLoading:!1})}))));function A(){return s(this,null,(function*(){try{const e=yield F();q({confirmLoading:!0}),e.menuId=e.menuId.join(","),e.tenantId=O.value,yield w(e),L(),u("success")}finally{q({confirmLoading:!1})}}))}return(e,t)=>(b(),j(h(i),I(e.$attrs,{onRegister:h(S),title:"租户产品包配置",onOk:A}),{default:g((()=>[y(h(d),{onRegister:h(k)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{O as default};
