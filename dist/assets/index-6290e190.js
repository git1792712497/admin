var e=(e,t,i)=>new Promise(((o,a)=>{var n=e=>{try{r(i.next(e))}catch(t){a(t)}},s=e=>{try{r(i.throw(e))}catch(t){a(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);r((i=i.apply(e,t)).next())}));import{B as t}from"./TableImg-d2c728a3.js";import{T as i}from"./useForm-76a4ff23.js";import{u as o}from"./useTable-0a379cac.js";import{d as a,e as n,r as s}from"./system-54dc9bf1.js";import{a as r}from"./index-33df9098.js";import{u as l}from"./index-c9e02f09.js";import{c as d,s as c,_ as u}from"./DictModal-87b8402c.js";import{a as m,w as p,ab as f,ac as b,o as h,j,H as y,n as g,E as C,k as w,l as x,K as _,S as k}from"./index-c5a6c875.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./useWindowSizeFn-72c85a53.js";import"./onMountedOrActivated-48cd1b25.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./useContentViewHeight-e138bd2a.js";const I=_("新增"),R=_("新增"),v=m({setup(m){const _=p({}),{createMessage:v}=k(),{success:F}=v,[S,{openModal:M}]=l(),[O,{reload:U}]=o({title:"字典列表",api:a,rowKey:"id",columns:d,formConfig:{labelWidth:120,schemas:c},useSearchForm:!0,actionColumn:{width:80,title:"操作",dataIndex:"action"}}),[q,{setProps:E,reload:H}]=o({title:"[]字典详情",api:n,rowKey:"id",searchInfo:{parentId:-1},immediate:!1,columns:d,formConfig:{labelWidth:120,schemas:c},pagination:!1,useSearchForm:!0,actionColumn:{width:300,title:"操作",dataIndex:"action"}});function K(e){_.value=e,E({title:"["+e.dictValue+"]字典详情",searchInfo:{parentId:e.id}}),H()}function P(){M(!0,{isUpdate:!1})}function T(e){M(!0,{parentRecord:e,isUpdate:!1})}function W(e){M(!0,{record:e,isUpdate:!0})}function B(t){return e(this,null,(function*(){yield s({ids:t.id}),F("操作成功"),U()}))}function V(){F("操作成功"),U(),H()}function z(t){return e(this,null,(function*(){yield s({ids:t.id}),F("操作成功"),H()}))}return(e,o)=>{const a=f("a-button"),n=b("auth");return h(),j(w(r),{dense:"",contentFullHeight:"",contentClass:"flex"},{default:y((()=>[g(w(t),{onRegister:w(O),onRowClick:K,class:"w-2/4 xl:w-3/5"},{toolbar:y((()=>[C((h(),j(a,{type:"primary",onClick:P},{default:y((()=>[I])),_:1})),[[n,"dict_add"]])])),bodyCell:y((({column:e,record:t})=>["action"===e.dataIndex?(h(),j(w(i),{key:0,actions:[{auth:"dict_edit",icon:"clarity:note-edit-line",onClick:W.bind(null,t)},{auth:"dict_delete",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:B.bind(null,t)}}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"]),g(w(t),{onRegister:w(q),class:"w-2/4 xl:w-3/5"},{toolbar:y((()=>[C((h(),j(a,{type:"primary",onClick:o[0]||(o[0]=e=>{M(!0,{parentRecord:_.value,isUpdate:!1})})},{default:y((()=>[R])),_:1})),[[n,"dict_add"]])])),bodyCell:y((({column:e,record:t})=>["action"===e.dataIndex?(h(),j(w(i),{key:0,actions:[{auth:"dict_edit",icon:"clarity:note-edit-line",label:"编辑",onClick:W.bind(null,t)},{auth:"dict_delete",icon:"ant-design:delete-outlined",color:"error",label:"删除",popConfirm:{title:"是否确认删除",confirm:z.bind(null,t)}},{auth:"dict_add",icon:"clarity:plus-line",label:"新增子项",onClick:T.bind(null,t)}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"]),g(u,{onRegister:w(S),onSuccess:V},null,8,["onRegister"])])),_:1})}}});export{v as default};
