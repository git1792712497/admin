var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,i=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&r(e,a,t[a]);if(o)for(var a of o(t))n.call(t,a)&&r(e,a,t[a]);return e},d=(e,t,a)=>new Promise(((o,l)=>{var n=e=>{try{i(a.next(e))}catch(t){l(t)}},r=e=>{try{i(a.throw(e))}catch(t){l(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,r);i((a=a.apply(e,t)).next())}));import{a as s,B as c}from"./index-c9e02f09.js";import{u as p,B as u}from"./useForm-76a4ff23.js";import{f as m,h as f}from"./system-54dc9bf1.js";import{a as b,w as y,k as v,f as h,o as I,j as g,H as j,n as w,ag as O}from"./index-c5a6c875.js";const P=[{title:"字典编号",dataIndex:"code"},{title:"字典名称",dataIndex:"dictValue"},{title:"封存",dataIndex:"isSealed",format:e=>"0"==e?"否":"是"}],x=[{field:"code",label:"字典编号",component:"Input",colProps:{span:8}},{field:"dictValue",label:"字典名称",component:"Input",colProps:{span:8}}],R=[{field:"code",label:"字典编号",component:"Input",dynamicDisabled:({model:e})=>"0"!=e.parentId,required:!0},{field:"dictValue",label:"字典名称",component:"Input",required:!0},{field:"parentId",label:"上级字典",component:"Input",dynamicDisabled:!0,show:!1},{field:"parentName",label:"上级字典名称",component:"Input",dynamicDisabled:!0,show:({model:e})=>"0"!=e.parentId},{field:"dictKey",label:"字典键值",component:"Input",show:({model:e})=>"0"!=e.parentId},{field:"sort",label:"字典排序",component:"InputNumber",required:!0},{field:"isSealed",label:"封存",component:"Switch",componentProps:{checkedValue:1,unCheckedValue:0}},{field:"remark",label:"备注",component:"InputTextArea"}],S=b({emits:["success","register"],setup(e,{emit:o}){const l=y(!0),n=y(""),r=y("0"),b=y(""),P=y(""),[x,{resetFields:S,setFieldsValue:V,validate:_}]=p({labelWidth:100,schemas:R,showActionButtonGroup:!1,baseColProps:{span:12},actionColOptions:{span:23}}),[k,{setModalProps:D,closeModal:q}]=s((e=>d(this,null,(function*(){if(S(),r.value="0",P.value="",b.value="",l.value=!!(null==e?void 0:e.isUpdate),e.parentRecord&&(r.value=e.parentRecord.id,P.value=e.parentRecord.dictValue,b.value=null==e?void 0:e.parentRecord.code),v(l)){n.value=e.record.id;const t=yield m({id:e.record.id});V(i({},t))}else V({parentId:r.value,parentName:P.value,code:b.value});D({confirmLoading:!1})})))),B=h((()=>v(l)?"编辑字典":"新增字典"));function C(){return d(this,null,(function*(){try{const d=yield _();D({confirmLoading:!0}),d.isSealed&&(d.isSealed=1),d.dictKey||(d.dictKey="-1"),v(l)?yield f((e=i({},d),r={id:n.value},t(e,a(r)))):yield f(i({},d)),q(),o("success")}finally{D({confirmLoading:!1})}var e,r}))}return(e,t)=>(I(),g(v(c),O(e.$attrs,{onRegister:v(k),width:900,title:v(B),onOk:C}),{default:j((()=>[w(v(u),{onRegister:v(x)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}}),V=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{V as D,S as _,P as c,x as s};
