var e=(e,t,a)=>new Promise(((o,i)=>{var s=e=>{try{r(a.next(e))}catch(t){i(t)}},n=e=>{try{r(a.throw(e))}catch(t){i(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,n);r((a=a.apply(e,t)).next())}));import{c as t,s as a,N as o}from"./noticeModal-cadcdf74.js";import{B as i}from"./TableImg-d2c728a3.js";import{T as s}from"./useForm-76a4ff23.js";import{u as n}from"./useTable-0a379cac.js";import{g as r,r as c}from"./notice-96969c64.js";import{u as l}from"./index-c9e02f09.js";import{a as d,w as u,ab as m,ac as p,o as f,h as j,n as b,H as g,E as h,j as y,O as x,K as v,t as C,k as w,e7 as k,l as _,i as R,S as I}from"./index-c5a6c875.js";import{g as O}from"./system-54dc9bf1.js";import"./attach-17a7a276.js";import"./index-2c15cc4f.js";import"./get-8f9589fb.js";import"./index-327d6ea5.js";import"./uuid-f62a8acd.js";import"./onMountedOrActivated-48cd1b25.js";import"./region-dd8311c2.js";import"./index-33df9098.js";import"./useWindowSizeFn-72c85a53.js";import"./useContentViewHeight-e138bd2a.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./merge-5148c4a3.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";const D=R("h1",null,"表单示例",-1),F=v(" 新增 "),M=d({setup(d){const{createMessage:R}=I(),{success:M}=R,[S,{openModal:T}]=l();let U=u({});!function(){e(this,null,(function*(){U.value.category=yield O({code:"notice"})}))}();const[q,{reload:E,updateTableDataRecord:P}]=n({api:r,rowKey:"id",columns:t,formConfig:{labelWidth:120,schemas:a,baseColProps:{xl:12,xxl:6}},useSearchForm:!0,pagination:!1,actionColumn:{width:250,title:"操作",dataIndex:"action"}});function B(){T(!0,{isDetail:!1,isUpdate:!1})}function H(e){T(!0,{record:e,isUpdate:!1,isDetail:!0})}function K(e){T(!0,{record:e,isDetail:!1,isUpdate:!0})}function W(t){return e(this,null,(function*(){yield c({ids:t.id}),M("操作成功"),E()}))}function z({isUpdate:e,values:t}){M("操作成功"),e?P(t.id,t):E()}return(e,t)=>{const a=m("a-button"),n=p("auth");return f(),j("div",null,[D,b(w(i),{onRegister:w(q)},{toolbar:g((()=>[h((f(),y(a,{type:"primary",onClick:B},{default:g((()=>[F])),_:1})),[[n,"datasource_add"]])])),bodyCell:g((({column:e,record:t})=>["category"===e.dataIndex?(f(),j(x,{key:0},[v(C(w(k)(w(U).category,t.category)),1)],64)):_("",!0),"action"===e.dataIndex?(f(),y(w(s),{key:1,actions:[{auth:"notice_view",label:"查看",color:"success",icon:"clarity:info-standard-line",onClick:H.bind(null,t)},{auth:"notice_edit",label:"编辑",icon:"clarity:note-edit-line",onClick:K.bind(null,t)},{auth:"notice_delete",label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:W.bind(null,t)}}]},null,8,["actions"])):_("",!0)])),_:1},8,["onRegister"]),b(o,{onRegister:w(S),onSuccess:z},null,8,["onRegister"])])}}});export{M as default};
