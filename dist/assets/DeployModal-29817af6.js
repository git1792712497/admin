var e=(e,a,o)=>new Promise(((t,n)=>{var l=e=>{try{i(o.next(e))}catch(a){n(a)}},s=e=>{try{i(o.throw(e))}catch(a){n(a)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,s);i((o=o.apply(e,a)).next())}));import{B as a,a as o}from"./index-c9e02f09.js";import{B as t,u as n}from"./useForm-76a4ff23.js";import{g as l,b as s}from"./system-54dc9bf1.js";import{d as i}from"./flow-db406d19.js";import{f as r}from"./flow-a40dbf2f.js";import{s as d,a as c,w as m,ab as p,o as u,j as f,H as b,n as g,ag as y}from"./index-c5a6c875.js";const v=[{title:"模型主键",dataIndex:"id"},{title:"模型标识",dataIndex:"modelKey"},{title:"模型名称",dataIndex:"name"},{title:"流程版本",dataIndex:"version"},{title:"创建时间",dataIndex:"created"},{title:"更新时间",dataIndex:"lastUpdated"}],I=[{field:"modelKey",label:"模型标识",component:"Input",colProps:{span:8}},{field:"name",label:"模型名称",component:"Input",colProps:{span:8}}],h=[{field:"categoryValue",label:"流程类型",component:"ApiSelect",componentProps:{stringToNumber:!0,api:l,params:{code:"flow"},labelField:"dictValue",valueField:"dictKey"},required:!0},{field:"flowMode",label:"流程模式",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"通用流程",value:1},{label:"定制流程",value:2}]},required:!0},{field:"tenantId",label:"所属租户",component:"ApiSelect",componentProps:{api:s,labelField:"tenantName",valueField:"tenantId",mode:"multiple"},show:({model:e})=>2==e.flowMode}];const x=d(c({name:"PostModal",components:{BasicModal:a,BasicForm:t},emits:["success","register"],setup(a,{emit:t}){const l=m(""),[s,{resetFields:d,validate:c}]=n({labelWidth:100,schemas:h,showActionButtonGroup:!1,actionColOptions:{span:23},baseColProps:{span:24}}),[p,{setModalProps:u,closeModal:f}]=o((a=>e(this,null,(function*(){d(),u({confirmLoading:!1}),l.value=a.record.id}))));return{paramModal:p,paramForm:s,handleSubmit:function(){return e(this,null,(function*(){try{const e=yield c();u({confirmLoading:!0}),yield i({tenantIds:e.tenantId?e.tenantId.join(","):"",modelId:l.value,category:r(e.categoryValue)}),f(),t("success")}finally{u({confirmLoading:!1})}}))}}}}),[["render",function(e,a,o,t,n,l){const s=p("BasicForm"),i=p("BasicModal");return u(),f(i,y(e.$attrs,{onRegister:e.paramModal,title:"部署模型",onOk:e.handleSubmit}),{default:b((()=>[g(s,{onRegister:e.paramForm},null,8,["onRegister"])])),_:1},16,["onRegister","onOk"])}]]),P=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as D,P as a,v as c,I as s};
