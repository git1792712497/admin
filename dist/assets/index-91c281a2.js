var e=(e,t,i)=>new Promise(((o,a)=>{var n=e=>{try{l(i.next(e))}catch(t){a(t)}},s=e=>{try{l(i.throw(e))}catch(t){a(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);l((i=i.apply(e,t)).next())}));import{B as t}from"./TableImg-d2c728a3.js";import{T as i}from"./useForm-76a4ff23.js";import{u as o}from"./useTable-0a379cac.js";import{i as a,j as n,k as s}from"./system-54dc9bf1.js";import{a as l}from"./index-33df9098.js";import{u as r}from"./index-c9e02f09.js";import{c,s as d,_ as u}from"./DictBizModal-e54b0cc4.js";import{a as m,w as p,ab as f,ac as b,o as j,j as h,H as y,n as g,E as C,k as w,l as x,K as _,S as k}from"./index-c5a6c875.js";import"./CheckOutlined-752df576.js";import"./isEqual-f9888ec4.js";import"./_baseIsEqual-f0bca653.js";import"./uuid-f62a8acd.js";import"./merge-5148c4a3.js";import"./get-8f9589fb.js";import"./useWindowSizeFn-72c85a53.js";import"./onMountedOrActivated-48cd1b25.js";import"./sortable.esm-7c85b602.js";import"./RedoOutlined-e07a9f51.js";import"./FullscreenOutlined-9b414b92.js";import"./index-bb91fa2a.js";import"./download-0641dcf7.js";import"./index-b52e0339.js";import"./uniqBy-e29b0e8a.js";import"./useContentViewHeight-e138bd2a.js";const I=_("新增"),R=_("新增"),z=m({setup(m){const _=p({}),{createMessage:z}=k(),[v,{openModal:F}]=r(),[S,{reload:M}]=o({title:"字典列表",api:a,rowKey:"id",columns:c,formConfig:{labelWidth:120,schemas:d},useSearchForm:!0,actionColumn:{width:80,title:"操作",dataIndex:"action"}}),[O,{setProps:U,reload:q}]=o({title:"[]字典详情",api:n,rowKey:"id",searchInfo:{parentId:-1},immediate:!1,columns:c,formConfig:{labelWidth:120,schemas:d},pagination:!1,useSearchForm:!0,actionColumn:{width:300,title:"操作",dataIndex:"action"}});function B(e){_.value=e,U({title:"["+e.dictValue+"]字典详情",searchInfo:{parentId:e.id}}),q()}function E(){F(!0,{isUpdate:!1})}function H(){F(!0,{parentRecord:_.value,isUpdate:!1})}function K(e){F(!0,{parentRecord:e,isUpdate:!1})}function P(e){F(!0,{record:e,isUpdate:!0})}function T(t){return e(this,null,(function*(){yield s({ids:t.id}),z.success("操作成功"),M()}))}function W(){z.success("操作成功"),M(),q()}function V(t){return e(this,null,(function*(){yield s({ids:t.id}),z.success("操作成功"),q()}))}return(e,o)=>{const a=f("a-button"),n=b("auth");return j(),h(w(l),{dense:"",contentFullHeight:"",contentClass:"flex"},{default:y((()=>[g(w(t),{onRegister:w(S),onRowClick:B,class:"w-2/4 xl:w-3/5"},{toolbar:y((()=>[C((j(),h(a,{type:"primary",onClick:E},{default:y((()=>[I])),_:1})),[[n,"dictbiz_add"]])])),bodyCell:y((({column:e,record:t})=>["action"===e.dataIndex?(j(),h(w(i),{key:0,actions:[{auth:"dictbiz_edit",icon:"clarity:note-edit-line",onClick:P.bind(null,t)},{auth:"dictbiz_delete",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:T.bind(null,t)}}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"]),g(w(t),{onRegister:w(O),class:"w-2/4 xl:w-3/5"},{toolbar:y((()=>[C((j(),h(a,{type:"primary",onClick:H},{default:y((()=>[R])),_:1})),[[n,"dictbiz_add"]])])),bodyCell:y((({column:e,record:t})=>["action"===e.dataIndex?(j(),h(w(i),{key:0,actions:[{auth:"dictbiz_edit",icon:"clarity:note-edit-line",label:"编辑",onClick:P.bind(null,t)},{auth:"dictbiz_delete",icon:"ant-design:delete-outlined",color:"error",label:"删除",popConfirm:{title:"是否确认删除",confirm:V.bind(null,t)}},{auth:"dictbiz_add",icon:"clarity:plus-line",label:"新增子项",onClick:K.bind(null,t)}]},null,8,["actions"])):x("",!0)])),_:1},8,["onRegister"]),g(u,{onRegister:w(v),onSuccess:W},null,8,["onRegister"])])),_:1})}}});export{z as default};
